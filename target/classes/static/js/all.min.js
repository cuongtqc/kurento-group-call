/**
 * Created by Tran on 9/4/2016.
 */
function trace(e){if("\n"===e[e.length-1]&&(e=e.substring(0,e.length-1)),window.performance){var t=(window.performance.now()/1e3).toFixed(3);webrtcUtils.log(t+": "+e)}else webrtcUtils.log(e)}function requestUserMedia(e){return new Promise(function(t,n){getUserMedia(e,t,n)})}function register(){name=document.getElementById("name").value;var e=document.getElementById("roomName").value;document.getElementById("room-header").innerText="ROOM "+e,document.getElementById("room").style.display="block",document.getElementById("join").style.display="none";var t={id:"joinRoom",name:name,room:e};sendMessage(t)}function autoRegister(){name=(new Date).getTime();var e="testingRoom";document.getElementById("room-header").innerText="ROOM "+e;var t={id:"joinRoom",name:name,room:e};sendMessage(t)}function onNewParticipant(e){receiveVideo(e.name)}function receiveVideoResponse(e){participants[e.name].rtcPeer.processAnswer(e.sdpAnswer,function(e){})}function callResponse(e){"accepted"!=e.response?stop():webRtcPeer.processAnswer(e.sdpAnswer,function(e){})}function onExistingParticipants(e){var t={audio:!0,video:{mandatory:{maxWidth:1920,maxFrameRate:20,minFrameRate:20}}},n=new Participant(name);participants[name]=n;var r=n.getVideoElement(),i={localVideo:r,mediaConstraints:t,onicecandidate:n.onIceCandidate.bind(n)};n.rtcPeer=new kurentoUtils.WebRtcPeer.WebRtcPeerSendonly(i,function(e){e||this.generateOffer(n.offerToReceiveVideo.bind(n))}),e.data.forEach(receiveVideo)}function leaveRoom(){sendMessage({id:"leaveRoom"});for(var e in participants)participants[e].dispose();document.getElementById("join").style.display="block",document.getElementById("room").style.display="none",ws.close()}function receiveVideo(e){var t=new Participant(e);participants[e]=t;var n=t.getVideoElement(),r={remoteVideo:n,onicecandidate:t.onIceCandidate.bind(t)};t.rtcPeer=new kurentoUtils.WebRtcPeer.WebRtcPeerRecvonly(r,function(e){e||this.generateOffer(t.offerToReceiveVideo.bind(t))})}function onParticipantLeft(e){var t=participants[e.name];t.dispose(),delete participants[e.name]}function sendMessage(e){var t=JSON.stringify(e);ws.send(t)}function Participant(e){function t(){if(r.className===PARTICIPANT_CLASS){var e=Array.prototype.slice.call(document.getElementsByClassName(PARTICIPANT_MAIN_CLASS));e.forEach(function(e){e.className=PARTICIPANT_CLASS}),r.className=PARTICIPANT_MAIN_CLASS}else r.className=PARTICIPANT_CLASS}function n(){return 0!=document.getElementsByClassName(PARTICIPANT_MAIN_CLASS).length}this.name=e;var r=document.createElement("div");r.className=n()?PARTICIPANT_CLASS:PARTICIPANT_MAIN_CLASS,r.id=e;var i=document.createElement("span"),o=document.createElement("video");r.appendChild(o),r.appendChild(i),r.onclick=t,document.getElementById("participants").appendChild(r),i.appendChild(document.createTextNode(e)),o.id="video-"+e,o.autoplay=!0,o.controls=!1,this.getElement=function(){return r},this.getVideoElement=function(){return o},this.offerToReceiveVideo=function(t,n,r){if(!t){var i={id:"receiveVideoFrom",sender:e,sdpOffer:n};sendMessage(i)}},this.onIceCandidate=function(t,n){var r={id:"onIceCandidate",candidate:t,name:e};sendMessage(r)},Object.defineProperty(this,"rtcPeer",{writable:!0}),this.dispose=function(){this.rtcPeer.dispose(),r.parentNode.removeChild(r)}}function detectBrowserInfo(){var e,t,n=navigator.userAgent,r=navigator.appName,i=navigator.appVersion,o=""+parseFloat(navigator.appVersion),s={goog:"Chrome",moz:"Firefox",plugin:"Plugin",edge:"Edge"};-1!==(e=n.indexOf("Opera"))?(r="Opera",o=n.substring(e+6),-1!==(e=n.indexOf("Version"))&&(o=n.substring(e+8)),t=s.goog):-1!==(e=n.indexOf("OPR"))?(r="Opera",o=n.substring(e+4),-1!==(e=n.indexOf("Version"))&&(o=n.substring(e+8)),t=s.goog):-1!==(e=n.indexOf("MSIE"))?(r="Microsoft Internet Explorer",o=n.substring(e+5),t=s.goog):-1!==(e=n.indexOf("Edge"))?(r=s.edge,o=n.substring(e+5),t=s.edge):-1!==(e=n.indexOf("Chrome"))?(r=s.goog,o=n.substring(e+7),t=s.goog):-1!==(e=n.indexOf("Safari"))?(r="Safari",o=n.substring(e+7),-1!==(e=n.indexOf("Version"))&&(o=n.substring(e+8)),t=s.goog):-1!==(e=n.indexOf("Firefox"))?(r="Firefox",o=n.substring(e+8),t=s.moz):-1!==(e=n.indexOf("Trident"))&&(r="Microsoft Internet Explorer",e=n.indexOf("rv"),o=n.substring(e+3,e+7),t=s.goog);var a,c,u=null,l=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10",r:/(Windows 10|Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(a in l)if(c=l[a],c.r.test(n)){u=c.s;break}var d=null;switch(/Windows/.test(u)&&(d=/Windows (.*)/.exec(u)[1],u="Windows"),u){case"Mac OS X":d=/Mac OS X (10[\.\_\d]+)/.exec(n)[1];break;case"Android":d=/Android ([\.\_\d]+)/.exec(n)[1];break;case"iOS":d=/OS (\d+)_(\d+)_?(\d+)?/.exec(i),d=d[1]+"."+d[2]+"."+(0|d[3])}return{name:r,ver:o.toString(),os:u,osVersion:d,codebase:t,userAgent:n}}function measureAppLoadingPerformance(e){var t=0,n=Number.MAX_VALUE,r=0,i="",o="",s=window.performance;if(!("performance"in window&&"timing"in window.performance&&"navigation"in window.performance))return{support:"none",total:void 0};var a=s.timing.loadEventEnd-s.timing.navigationStart;if("Chrome"===e.name||"Opera"===e.name){var c,u=s.getEntriesByType("resource");for(c=0;c<u.length;c++)u[c].duration>r&&(o=u[c].name.substr(u[c].name.lastIndexOf("/")+1),r=u[c].duration),u[c].duration<n&&(i=u[c].name.substr(u[c].name.lastIndexOf("/")+1),n=u[c].duration),u[c].name.indexOf("CALLSTATS_SRC_URLstatic/callstats")>-1&&(t=u[c].duration);return{support:"full",callstats:t,min:{name:i,time:n},max:{name:o,time:r},total:a}}return"Firefox"===e.name?{support:"limited",total:a}:void 0}if(!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t){t=t||Z;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function r(e){var t=!!e&&"length"in e&&e.length,n=pe.type(e);return"function"!==n&&!pe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(pe.isFunction(t))return pe.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return pe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Te.test(t))return pe.filter(t,e,n);t=pe.filter(t,e)}return pe.grep(e,function(e){return ie.call(t,e)>-1!==n&&1===e.nodeType})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return pe.each(e.match(Ee)||[],function(e,n){t[n]=!0}),t}function a(e){return e}function c(e){throw e}function u(e,t,n){var r;try{e&&pe.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&pe.isFunction(r=e.then)?r.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function l(){Z.removeEventListener("DOMContentLoaded",l),e.removeEventListener("load",l),pe.ready()}function d(){this.expando=pe.expando+d.uid++}function p(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Le,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:je.test(n)?JSON.parse(n):n)}catch(i){}Ue.set(e,t,n)}else n=void 0;return n}function f(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return pe.css(e,t,"")},c=a(),u=n&&n[3]||(pe.cssNumber[t]?"":"px"),l=(pe.cssNumber[t]||"px"!==u&&+c)&&_e.exec(pe.css(e,t));if(l&&l[3]!==u){u=u||l[3],n=n||[],l=+c||1;do o=o||".5",l/=o,pe.style(e,t,l+u);while(o!==(o=a()/c)&&1!==o&&--s)}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=i)),i}function h(e){var t,n=e.ownerDocument,r=e.nodeName,i=qe[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=pe.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),qe[r]=i,i)}function m(e,t){for(var n,r,i=[],o=0,s=e.length;s>o;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=Ne.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Be(r)&&(i[o]=h(r))):"none"!==n&&(i[o]="none",Ne.set(r,"display",n)));for(o=0;s>o;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function g(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&pe.nodeName(e,t)?pe.merge([e],n):n}function v(e,t){for(var n=0,r=e.length;r>n;n++)Ne.set(e[n],"globalEval",!t||Ne.get(t[n],"globalEval"))}function y(e,t,n,r,i){for(var o,s,a,c,u,l,d=t.createDocumentFragment(),p=[],f=0,h=e.length;h>f;f++)if(o=e[f],o||0===o)if("object"===pe.type(o))pe.merge(p,o.nodeType?[o]:o);else if(Je.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(We.exec(o)||["",""])[1].toLowerCase(),c=ze[a]||ze._default,s.innerHTML=c[1]+pe.htmlPrefilter(o)+c[2],l=c[0];l--;)s=s.lastChild;pe.merge(p,s.childNodes),s=d.firstChild,s.textContent=""}else p.push(t.createTextNode(o));for(d.textContent="",f=0;o=p[f++];)if(r&&pe.inArray(o,r)>-1)i&&i.push(o);else if(u=pe.contains(o.ownerDocument,o),s=g(d.appendChild(o),"script"),u&&v(s),n)for(l=0;o=s[l++];)Ve.test(o.type||"")&&n.push(o);return d}function b(){return!0}function w(){return!1}function S(){try{return Z.activeElement}catch(e){}}function T(e,t,n,r,i,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)T(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=w;else if(!i)return e;return 1===o&&(s=i,i=function(e){return pe().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,i,r,n)})}function C(e,t){return pe.nodeName(e,"table")&&pe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function x(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function k(e){var t=tt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function D(e,t){var n,r,i,o,s,a,c,u;if(1===t.nodeType){if(Ne.hasData(e)&&(o=Ne.access(e),s=Ne.set(t,o),u=o.events)){delete s.handle,s.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)pe.event.add(t,i,u[i][n])}Ue.hasData(e)&&(a=Ue.access(e),c=pe.extend({},a),Ue.set(t,c))}}function I(e,t){var n=t.nodeName.toLowerCase();"input"===n&&He.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function E(e,t,r,i){t=ne.apply([],t);var o,s,a,c,u,l,d=0,p=e.length,f=p-1,h=t[0],m=pe.isFunction(h);if(m||p>1&&"string"==typeof h&&!le.checkClone&&et.test(h))return e.each(function(n){var o=e.eq(n);m&&(t[0]=h.call(this,n,o.html())),E(o,t,r,i)});if(p&&(o=y(t,e[0].ownerDocument,!1,e,i),s=o.firstChild,1===o.childNodes.length&&(o=s),s||i)){for(a=pe.map(g(o,"script"),x),c=a.length;p>d;d++)u=o,d!==f&&(u=pe.clone(u,!0,!0),c&&pe.merge(a,g(u,"script"))),r.call(e[d],u,d);if(c)for(l=a[a.length-1].ownerDocument,pe.map(a,k),d=0;c>d;d++)u=a[d],Ve.test(u.type||"")&&!Ne.access(u,"globalEval")&&pe.contains(l,u)&&(u.src?pe._evalUrl&&pe._evalUrl(u.src):n(u.textContent.replace(nt,""),l))}return e}function P(e,t,n){for(var r,i=t?pe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||pe.cleanData(g(r)),r.parentNode&&(n&&pe.contains(r.ownerDocument,r)&&v(g(r,"script")),r.parentNode.removeChild(r));return e}function A(e,t,n){var r,i,o,s,a=e.style;return n=n||ot(e),n&&(s=n.getPropertyValue(t)||n[t],""!==s||pe.contains(e.ownerDocument,e)||(s=pe.style(e,t)),!le.pixelMarginRight()&&it.test(s)&&rt.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function R(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function O(e){if(e in lt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=ut.length;n--;)if(e=ut[n]+t,e in lt)return e}function N(e,t,n){var r=_e.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function U(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=pe.css(e,n+Fe[o],!0,i)),r?("content"===n&&(s-=pe.css(e,"padding"+Fe[o],!0,i)),"margin"!==n&&(s-=pe.css(e,"border"+Fe[o]+"Width",!0,i))):(s+=pe.css(e,"padding"+Fe[o],!0,i),"padding"!==n&&(s+=pe.css(e,"border"+Fe[o]+"Width",!0,i)));return s}function j(e,t,n){var r,i=!0,o=ot(e),s="border-box"===pe.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),0>=r||null==r){if(r=A(e,t,o),(0>r||null==r)&&(r=e.style[t]),it.test(r))return r;i=s&&(le.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+U(e,t,n||(s?"border":"content"),i,o)+"px"}function L(e,t,n,r,i){return new L.prototype.init(e,t,n,r,i)}function M(){pt&&(e.requestAnimationFrame(M),pe.fx.tick())}function _(){return e.setTimeout(function(){dt=void 0}),dt=pe.now()}function F(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Fe[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function B(e,t,n){for(var r,i=(H.tweeners[t]||[]).concat(H.tweeners["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function $(e,t,n){var r,i,o,s,a,c,u,l,d="width"in t||"height"in t,p=this,f={},h=e.style,g=e.nodeType&&Be(e),v=Ne.get(e,"fxshow");n.queue||(s=pe._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,pe.queue(e,"fx").length||s.empty.fire()})}));for(r in t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}f[r]=v&&v[r]||pe.style(e,r)}if(c=!pe.isEmptyObject(t),c||!pe.isEmptyObject(f)){d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=v&&v.display,null==u&&(u=Ne.get(e,"display")),l=pe.css(e,"display"),"none"===l&&(u?l=u:(m([e],!0),u=e.style.display||u,l=pe.css(e,"display"),m([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===pe.css(e,"float")&&(c||(p.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1;for(r in f)c||(v?"hidden"in v&&(g=v.hidden):v=Ne.access(e,"fxshow",{display:u}),o&&(v.hidden=!g),g&&m([e],!0),p.done(function(){g||m([e]),Ne.remove(e,"fxshow");for(r in f)pe.style(e,r,f[r])})),c=B(g?v[r]:0,r,p),r in v||(v[r]=c.start,g&&(c.end=c.start,c.start=0))}}function q(e,t){var n,r,i,o,s;for(n in e)if(r=pe.camelCase(n),i=t[r],o=e[n],pe.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=pe.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function H(e,t,n){var r,i,o=0,s=H.prefilters.length,a=pe.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=dt||_(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,s=0,c=u.tweens.length;c>s;s++)u.tweens[s].run(o);return a.notifyWith(e,[u,o,n]),1>o&&c?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:pe.extend({},t),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||_(),duration:n.duration,tweens:[],createTween:function(t,n){var r=pe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),l=u.props;for(q(l,u.opts.specialEasing);s>o;o++)if(r=H.prefilters[o].call(u,e,l,u.opts))return pe.isFunction(r.stop)&&(pe._queueHooks(u.elem,u.opts.queue).stop=pe.proxy(r.stop,r)),r;return pe.map(l,B,u),pe.isFunction(u.opts.start)&&u.opts.start.call(e,u),pe.fx.timer(pe.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e,t,n,r){var i;if(pe.isArray(t))pe.each(t,function(t,i){n||Dt.test(e)?r(e,i):V(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==pe.type(t))r(e,t);else for(i in t)V(e+"["+i+"]",t[i],n,r)}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Ee)||[];if(pe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function J(e,t,n,r){function i(a){var c;return o[a]=!0,pe.each(e[a]||[],function(e,a){var u=a(t,n,r);return"string"!=typeof u||s||o[u]?s?!(c=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),c}var o={},s=e===_t;return i(t.dataTypes[0])||!o["*"]&&i("*")}function G(e,t){var n,r,i=pe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&pe.extend(!0,e,r),e}function X(e,t,n){for(var r,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function K(e,t,n,r){var i,o,s,a,c,u={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(s=u[c+" "+o]||u["* "+o],!s)for(i in u)if(a=i.split(" "),a[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[i]:u[i]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function Q(e){return pe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],Z=e.document,ee=Object.getPrototypeOf,te=Y.slice,ne=Y.concat,re=Y.push,ie=Y.indexOf,oe={},se=oe.toString,ae=oe.hasOwnProperty,ce=ae.toString,ue=ce.call(Object),le={},de="3.1.0",pe=function(e,t){return new pe.fn.init(e,t)},fe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/^-ms-/,me=/-([a-z])/g,ge=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:de,constructor:pe,length:0,toArray:function(){return te.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:te.call(this)},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return pe.each(this,e)},map:function(e){return this.pushStack(pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:re,sort:Y.sort,splice:Y.splice},pe.extend=pe.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||pe.isFunction(s)||(s={}),a===c&&(s=this,a--);c>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(u&&r&&(pe.isPlainObject(r)||(i=pe.isArray(r)))?(i?(i=!1,o=n&&pe.isArray(n)?n:[]):o=n&&pe.isPlainObject(n)?n:{},s[t]=pe.extend(u,o,r)):void 0!==r&&(s[t]=r));return s},pe.extend({expando:"jQuery"+(de+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=pe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==se.call(e)||(t=ee(e))&&(n=ae.call(t,"constructor")&&t.constructor,"function"!=typeof n||ce.call(n)!==ue))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?oe[se.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(he,"ms-").replace(me,ge)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(r(e))for(n=e.length;n>i&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(fe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?pe.merge(n,"string"==typeof e?[e]:e):re.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ie.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,n){var i,o,s=0,a=[];if(r(e))for(i=e.length;i>s;s++)o=t(e[s],s,n),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,n),null!=o&&a.push(o);return ne.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),pe.isFunction(e)?(r=te.call(arguments,2),i=function(){return e.apply(t||this,r.concat(te.call(arguments)))},i.guid=e.guid=e.guid||pe.guid++,i):void 0},now:Date.now,support:le}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=Y[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){oe["[object "+t+"]"]=t.toLowerCase()});var ve=function(e){function t(e,t,n,r){var i,o,s,a,c,u,l,p=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&((t?t.ownerDocument||t:$)!==N&&O(t),t=t||N,j)){if(11!==h&&(c=ve.exec(e)))if(i=c[1]){if(9===h){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(p&&(s=p.getElementById(i))&&F(t,s)&&s.id===i)return n.push(s),n}else{if(c[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(i)),n}if(T.qsa&&!z[e+" "]&&(!L||!L.test(e))){if(1!==h)p=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(Se,Te):t.setAttribute("id",a=B),u=D(e),o=u.length;o--;)u[o]="#"+a+" "+f(u[o]);l=u.join(","),p=ye.test(e)&&d(t.parentNode)||t}if(l)try{return Y.apply(n,p.querySelectorAll(l)),n}catch(m){}finally{a===B&&t.removeAttribute("id")}}}return E(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[B]=!0,e}function i(e){var t=N.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)C.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"label"in t&&t.disabled===e||"form"in t&&t.disabled===e||"form"in t&&t.disabled===!1&&(t.isDisabled===e||t.isDisabled!==!e&&("label"in t||!xe(t))!==e)}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=H++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,c){var u,l,d,p=[q,a];if(c){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(d=t[B]||(t[B]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[o])&&u[0]===q&&u[1]===a)return p[2]=u[2];if(l[o]=p,p[2]=e(t,n,c))return!0}}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function v(e,t,n,r,i){for(var o,s=[],a=0,c=e.length,u=null!=t;c>a;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),u&&t.push(a)));return s}function y(e,t,n,i,o,s){return i&&!i[B]&&(i=y(i)),o&&!o[B]&&(o=y(o,s)),r(function(r,s,a,c){var u,l,d,p=[],f=[],h=s.length,m=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?m:v(m,p,e,a,c),b=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,b,a,c),i)for(u=v(b,f),i(u,[],a,c),l=u.length;l--;)(d=u[l])&&(b[f[l]]=!(y[f[l]]=d));if(r){if(o||e){if(o){for(u=[],l=b.length;l--;)(d=b[l])&&u.push(y[l]=d);o(null,b=[],u,c)}for(l=b.length;l--;)(d=b[l])&&(u=o?ee(r,d):p[l])>-1&&(r[u]=!(s[u]=d))}}else b=v(b===s?b.splice(h,b.length):b),o?o(null,s,b,c):Y.apply(s,b)})}function b(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],s=o||C.relative[" "],a=o?1:0,c=h(function(e){return e===t},s,!0),u=h(function(e){return ee(t,e)>-1},s,!0),l=[function(e,n,r){var i=!o&&(r||n!==P)||((t=n).nodeType?c(e,n,r):u(e,n,r));return t=null,i}];i>a;a++)if(n=C.relative[e[a].type])l=[h(m(l),n)];else{if(n=C.filter[e[a].type].apply(null,e[a].matches),n[B]){for(r=++a;i>r&&!C.relative[e[r].type];r++);return y(a>1&&m(l),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,r>a&&b(e.slice(a,r)),i>r&&b(e=e.slice(r)),i>r&&f(e))}l.push(n)}return m(l)}function w(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,c,u){var l,d,p,f=0,h="0",m=r&&[],g=[],y=P,b=r||o&&C.find.TAG("*",u),w=q+=null==y?1:Math.random()||.1,S=b.length;for(u&&(P=s===N||s||u);h!==S&&null!=(l=b[h]);h++){if(o&&l){for(d=0,s||l.ownerDocument===N||(O(l),a=!j);p=e[d++];)if(p(l,s||N,a)){c.push(l);break}u&&(q=w)}i&&((l=!p&&l)&&f--,r&&m.push(l))}if(f+=h,i&&h!==f){for(d=0;p=n[d++];)p(m,g,s,a);if(r){if(f>0)for(;h--;)m[h]||g[h]||(g[h]=K.call(c));g=v(g)}Y.apply(c,g),u&&!r&&g.length>0&&f+n.length>1&&t.uniqueSort(c)}return u&&(q=w,P=y),m};return i?r(s):s}var S,T,C,x,k,D,I,E,P,A,R,O,N,U,j,L,M,_,F,B="sizzle"+1*new Date,$=e.document,q=0,H=0,W=n(),V=n(),z=n(),J=function(e,t){return e===t&&(R=!0),0},G={}.hasOwnProperty,X=[],K=X.pop,Q=X.push,Y=X.push,Z=X.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,Te=function(e,t){return t?"\x00"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){O()},xe=h(function(e){return e.disabled===!0},{dir:"parentNode",next:"legend"});try{Y.apply(X=Z.call($.childNodes),$.childNodes),X[$.childNodes.length].nodeType}catch(ke){Y={apply:X.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}T=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==N&&9===r.nodeType&&r.documentElement?(N=r,U=N.documentElement,j=!k(N),$!==N&&(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),T.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=i(function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=ge.test(N.getElementsByClassName),T.getById=i(function(e){return U.appendChild(e).id=B,!N.getElementsByName||!N.getElementsByName(B).length}),T.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&j){var n=t.getElementById(e);return n?[n]:[]}},C.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=T.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&j?t.getElementsByClassName(e):void 0},M=[],L=[],(T.qsa=ge.test(N.querySelectorAll))&&(i(function(e){U.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||L.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=N.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),U.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:");
    })),(T.matchesSelector=ge.test(_=U.matches||U.webkitMatchesSelector||U.mozMatchesSelector||U.oMatchesSelector||U.msMatchesSelector))&&i(function(e){T.disconnectedMatch=_.call(e,"*"),_.call(e,"[s!='']:x"),M.push("!=",oe)}),L=L.length&&new RegExp(L.join("|")),M=M.length&&new RegExp(M.join("|")),t=ge.test(U.compareDocumentPosition),F=t||ge.test(U.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=t?function(e,t){if(e===t)return R=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===N||e.ownerDocument===$&&F($,e)?-1:t===N||t.ownerDocument===$&&F($,t)?1:A?ee(A,e)-ee(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return R=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],c=[t];if(!i||!o)return e===N?-1:t===N?1:i?-1:o?1:A?ee(A,e)-ee(A,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;a[r]===c[r];)r++;return r?s(a[r],c[r]):a[r]===$?-1:c[r]===$?1:0},N):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&O(e),n=n.replace(le,"='$1']"),T.matchesSelector&&j&&!z[n+" "]&&(!M||!M.test(n))&&(!L||!L.test(n)))try{var r=_.call(e,n);if(r||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&O(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&O(e);var n=C.attrHandle[t.toLowerCase()],r=n&&G.call(C.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==r?r:T.attributes||!j?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(Se,Te)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(R=!T.detectDuplicates,A=!T.sortStable&&e.slice(0),e.sort(J),R){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return A=null,e},x=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=x(t);return n},C=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=D(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var u,l,d,p,f,h,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!c&&!a,b=!1;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&y){for(p=g,d=p[B]||(p[B]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),u=l[e]||[],f=u[0]===q&&u[1],b=f&&u[2],p=f&&g.childNodes[f];p=++f&&p&&p[m]||(b=f=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){l[e]=[q,f,b];break}}else if(y&&(p=t,d=p[B]||(p[B]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),u=l[e]||[],f=u[0]===q&&u[1],b=f),b===!1)for(;(p=++f&&p&&p[m]||(b=f=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(y&&(d=p[B]||(p[B]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),l[e]=[q,b]),p!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(i=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=ee(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=I(e.replace(ae,"$1"));return i[B]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===U},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})C.pseudos[S]=c(S);return p.prototype=C.filters=C.pseudos,C.setFilters=new p,D=t.tokenize=function(e,n){var r,i,o,s,a,c,u,l=V[e+" "];if(l)return n?0:l.slice(0);for(a=e,c=[],u=C.preFilter;a;){r&&!(i=ce.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),r=!1,(i=ue.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ae," ")}),a=a.slice(r.length));for(s in C.filter)!(i=fe[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):V(e,c).slice(0)},I=t.compile=function(e,t){var n,r=[],i=[],o=z[e+" "];if(!o){for(t||(t=D(e)),n=t.length;n--;)o=b(t[n]),o[B]?r.push(o):i.push(o);o=z(e,w(i,r)),o.selector=e}return o},E=t.select=function(e,t,n,r){var i,o,s,a,c,u="function"==typeof e&&e,l=!r&&D(e=u.selector||e);if(n=n||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&T.getById&&9===t.nodeType&&j&&C.relative[o[1].type]){if(t=(C.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=fe.needsContext.test(e)?0:o.length;i--&&(s=o[i],!C.relative[a=s.type]);)if((c=C.find[a])&&(r=c(s.matches[0].replace(be,we),ye.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return Y.apply(n,r),n;break}}return(u||I(e,l))(r,t,!j,n,!t||ye.test(e)&&d(t.parentNode)||t),n},T.sortStable=B.split("").sort(J).join("")===B,T.detectDuplicates=!!R,O(),T.sortDetached=i(function(e){return 1&e.compareDocumentPosition(N.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);pe.find=ve,pe.expr=ve.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=ve.uniqueSort,pe.text=ve.getText,pe.isXMLDoc=ve.isXML,pe.contains=ve.contains,pe.escapeSelector=ve.escape;var ye=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&pe(e).is(n))break;r.push(e)}return r},be=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},we=pe.expr.match.needsContext,Se=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Te=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?pe.find.matchesSelector(r,e)?[r]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;r>t;t++)if(pe.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;r>t;t++)pe.find(e,i[t],n);return r>1?pe.uniqueSort(n):n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&we.test(e)?pe(e):e||[],!1).length}});var Ce,xe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ke=pe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Ce,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:xe.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),Se.test(r[1])&&pe.isPlainObject(t))for(r in t)pe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=Z.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):pe.isFunction(e)?void 0!==n.ready?n.ready(e):e(pe):pe.makeArray(e,this)};ke.prototype=pe.fn,Ce=pe(Z);var De=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t=pe(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(pe.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&pe(e);if(!we.test(e))for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&pe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?pe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ie.call(pe(e),this[0]):ie.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ye(e,"parentNode")},parentsUntil:function(e,t,n){return ye(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return ye(e,"nextSibling")},prevAll:function(e){return ye(e,"previousSibling")},nextUntil:function(e,t,n){return ye(e,"nextSibling",n)},prevUntil:function(e,t,n){return ye(e,"previousSibling",n)},siblings:function(e){return be((e.parentNode||{}).firstChild,e)},children:function(e){return be(e.firstChild)},contents:function(e){return e.contentDocument||pe.merge([],e.childNodes)}},function(e,t){pe.fn[e]=function(n,r){var i=pe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=pe.filter(r,i)),this.length>1&&(Ie[e]||pe.uniqueSort(i),De.test(e)&&i.reverse()),this.pushStack(i)}});var Ee=/\S+/g;pe.Callbacks=function(e){e="string"==typeof e?s(e):pe.extend({},e);var t,n,r,i,o=[],a=[],c=-1,u=function(){for(i=e.once,r=t=!0;a.length;c=-1)for(n=a.shift();++c<o.length;)o[c].apply(n[0],n[1])===!1&&e.stopOnFalse&&(c=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(c=o.length-1,a.push(n)),function r(t){pe.each(t,function(t,n){pe.isFunction(n)?e.unique&&l.has(n)||o.push(n):n&&n.length&&"string"!==pe.type(n)&&r(n)})}(arguments),n&&!t&&u()),this},remove:function(){return pe.each(arguments,function(e,t){for(var n;(n=pe.inArray(t,o,n))>-1;)o.splice(n,1),c>=n&&c--}),this},has:function(e){return e?pe.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},pe.extend({Deferred:function(t){var n=[["notify","progress",pe.Callbacks("memory"),pe.Callbacks("memory"),2],["resolve","done",pe.Callbacks("once memory"),pe.Callbacks("once memory"),0,"resolved"],["reject","fail",pe.Callbacks("once memory"),pe.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return pe.Deferred(function(t){pe.each(n,function(n,r){var i=pe.isFunction(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var u=this,l=arguments,d=function(){var e,d;if(!(s>t)){if(e=r.apply(u,l),e===n.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,pe.isFunction(d)?i?d.call(e,o(s,n,a,i),o(s,n,c,i)):(s++,d.call(e,o(s,n,a,i),o(s,n,c,i),o(s,n,a,n.notifyWith))):(r!==a&&(u=void 0,l=[e]),(i||n.resolveWith)(u,l))}},p=i?d:function(){try{d()}catch(e){pe.Deferred.exceptionHook&&pe.Deferred.exceptionHook(e,p.stackTrace),t+1>=s&&(r!==c&&(u=void 0,l=[e]),n.rejectWith(u,l))}};t?p():(pe.Deferred.getStackHook&&(p.stackTrace=pe.Deferred.getStackHook()),e.setTimeout(p))}}var s=0;return pe.Deferred(function(e){n[0][3].add(o(0,e,pe.isFunction(i)?i:a,e.notifyWith)),n[1][3].add(o(0,e,pe.isFunction(t)?t:a)),n[2][3].add(o(0,e,pe.isFunction(r)?r:c))}).promise()},promise:function(e){return null!=e?pe.extend(e,i):i}},o={};return pe.each(n,function(e,t){var s=t[2],a=t[5];i[t[1]]=s.add,a&&s.add(function(){r=a},n[3-e][2].disable,n[0][2].lock),s.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=te.call(arguments),o=pe.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?te.call(arguments):n,--t||o.resolveWith(r,i)}};if(1>=t&&(u(e,o.done(s(n)).resolve,o.reject),"pending"===o.state()||pe.isFunction(i[n]&&i[n].then)))return o.then();for(;n--;)u(i[n],s(n),o.reject);return o.promise()}});var Pe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pe.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Pe.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},pe.readyException=function(t){e.setTimeout(function(){throw t})};var Ae=pe.Deferred();pe.fn.ready=function(e){return Ae.then(e)["catch"](function(e){pe.readyException(e)}),this},pe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?pe.readyWait++:pe.ready(!0)},ready:function(e){(e===!0?--pe.readyWait:pe.isReady)||(pe.isReady=!0,e!==!0&&--pe.readyWait>0||Ae.resolveWith(Z,[pe]))}}),pe.ready.then=Ae.then,"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?e.setTimeout(pe.ready):(Z.addEventListener("DOMContentLoaded",l),e.addEventListener("load",l));var Re=function(e,t,n,r,i,o,s){var a=0,c=e.length,u=null==n;if("object"===pe.type(n)){i=!0;for(a in n)Re(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,pe.isFunction(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(pe(e),n)})),t))for(;c>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:u?t.call(e):c?t(e[0],n):o},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};d.uid=1,d.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[pe.camelCase(t)]=n;else for(r in t)i[pe.camelCase(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][pe.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){pe.isArray(t)?t=t.map(pe.camelCase):(t=pe.camelCase(t),t=t in r?[t]:t.match(Ee)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||pe.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!pe.isEmptyObject(t)}};var Ne=new d,Ue=new d,je=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Le=/[A-Z]/g;pe.extend({hasData:function(e){return Ue.hasData(e)||Ne.hasData(e)},data:function(e,t,n){return Ue.access(e,t,n)},removeData:function(e,t){Ue.remove(e,t)},_data:function(e,t,n){return Ne.access(e,t,n)},_removeData:function(e,t){Ne.remove(e,t)}}),pe.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=Ue.get(o),1===o.nodeType&&!Ne.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=pe.camelCase(r.slice(5)),p(o,r,i[r])));Ne.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Ue.set(this,e)}):Re(this,function(t){var n;if(o&&void 0===t){if(n=Ue.get(o,e),void 0!==n)return n;if(n=p(o,e),void 0!==n)return n}else this.each(function(){Ue.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ue.remove(this,e)})}}),pe.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=Ne.get(e,t),n&&(!r||pe.isArray(n)?r=Ne.access(e,t,pe.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=pe.queue(e,t),r=n.length,i=n.shift(),o=pe._queueHooks(e,t),s=function(){pe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ne.get(e,n)||Ne.access(e,n,{empty:pe.Callbacks("once memory").add(function(){Ne.remove(e,[t+"queue",n])})})}}),pe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?pe.queue(this[0],e):void 0===t?this:this.each(function(){var n=pe.queue(this,e,t);pe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=pe.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Ne.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var Me=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=new RegExp("^(?:([+-])=|)("+Me+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&pe.contains(e.ownerDocument,e)&&"none"===pe.css(e,"display")},$e=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},qe={};pe.fn.extend({show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?pe(this).show():pe(this).hide()})}});var He=/^(?:checkbox|radio)$/i,We=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ve=/^$|\/(?:java|ecma)script/i,ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td;var Je=/<|&#?\w+;/;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),le.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ge=Z.documentElement,Xe=/^key/,Ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qe=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,n,r,i){var o,s,a,c,u,l,d,p,f,h,m,g=Ne.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&pe.find.matchesSelector(Ge,i),n.guid||(n.guid=pe.guid++),(c=g.events)||(c=g.events={}),(s=g.handle)||(s=g.handle=function(t){return"undefined"!=typeof pe&&pe.event.triggered!==t.type?pe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ee)||[""],u=t.length;u--;)a=Qe.exec(t[u])||[],f=m=a[1],h=(a[2]||"").split(".").sort(),f&&(d=pe.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,d=pe.event.special[f]||{},l=pe.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&pe.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=c[f])||(p=c[f]=[],p.delegateCount=0,d.setup&&d.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(f,s)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),pe.event.global[f]=!0)},remove:function(e,t,n,r,i){var o,s,a,c,u,l,d,p,f,h,m,g=Ne.hasData(e)&&Ne.get(e);if(g&&(c=g.events)){for(t=(t||"").match(Ee)||[""],u=t.length;u--;)if(a=Qe.exec(t[u])||[],f=m=a[1],h=(a[2]||"").split(".").sort(),f){for(d=pe.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,p=c[f]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)l=p[o],!i&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,d.remove&&d.remove.call(e,l));s&&!p.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||pe.removeEvent(e,f,g.handle),delete c[f])}else for(f in c)pe.event.remove(e,f+t[u],n,r,!0);pe.isEmptyObject(c)&&Ne.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=pe.event.fix(e),c=new Array(arguments.length),u=(Ne.get(this,"events")||{})[a.type]||[],l=pe.event.special[a.type]||{};for(c[0]=a,t=1;t<arguments.length;t++)c[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,a)!==!1){for(s=pe.event.handlers.call(this,a,u),t=0;(i=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,r=((pe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c),void 0!==r&&(a.result=r)===!1&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,c=e.target;if(a&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?pe(i,this).index(c)>-1:pe.find(i,this,null,[c]).length),r[i]&&r.push(o);r.length&&s.push({elem:c,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},addProp:function(e,t){Object.defineProperty(pe.Event.prototype,e,{enumerable:!0,configurable:!0,get:pe.isFunction(t)?function(){return this.originalEvent?t(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[pe.expando]?e:new pe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==S()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===S()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&pe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return pe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},pe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},pe.Event=function(e,t){return this instanceof pe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?b:w,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),void(this[pe.expando]=!0)):new pe.Event(e,t)},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=b,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=b,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=b,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Xe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},pe.event.addProp),pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||pe.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),pe.fn.extend({on:function(e,t,n,r){return T(this,e,t,n,r)},one:function(e,t,n,r){return T(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,pe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=w),this.each(function(){pe.event.remove(this,e,n,t)})}});var Ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ze=/<script|<style|<link/i,et=/checked\s*(?:[^=]|=\s*.checked.)/i,tt=/^true\/(.*)/,nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pe.extend({htmlPrefilter:function(e){return e.replace(Ye,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),c=pe.contains(e.ownerDocument,e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(s=g(a),o=g(e),r=0,i=o.length;i>r;r++)I(o[r],s[r]);if(t)if(n)for(o=o||g(e),s=s||g(a),r=0,i=o.length;i>r;r++)D(o[r],s[r]);else D(e,a);return s=g(a,"script"),s.length>0&&v(s,!c&&g(e,"script")),a},cleanData:function(e){for(var t,n,r,i=pe.event.special,o=0;void 0!==(n=e[o]);o++)if(Oe(n)){if(t=n[Ne.expando]){if(t.events)for(r in t.events)i[r]?pe.event.remove(n,r):pe.removeEvent(n,r,t.handle);n[Ne.expando]=void 0}n[Ue.expando]&&(n[Ue.expando]=void 0)}}}),pe.fn.extend({detach:function(e){return P(this,e,!0)},remove:function(e){return P(this,e)},text:function(e){return Re(this,function(e){return void 0===e?pe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return E(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=C(this,e);t.appendChild(e)}})},prepend:function(){return E(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=C(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return E(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return E(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(pe.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return Re(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ze.test(e)&&!ze[(We.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(pe.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return E(this,arguments,function(t){var n=this.parentNode;pe.inArray(this,e)<0&&(pe.cleanData(g(this)),n&&n.replaceChild(t,this))},e)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pe.fn[e]=function(e){for(var n,r=[],i=pe(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),pe(i[s])[t](n),re.apply(r,n.get());return this.pushStack(r)}});var rt=/^margin/,it=new RegExp("^("+Me+")(?!px)[a-z%]+$","i"),ot=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",
        a.innerHTML="",Ge.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Ge.removeChild(s),a=null}}var n,r,i,o,s=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),pe.extend(le,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),o}}))}();var st=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"},ut=["Webkit","Moz","ms"],lt=Z.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=A(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=pe.camelCase(t),c=e.style;return t=pe.cssProps[a]||(pe.cssProps[a]=O(a)||a),s=pe.cssHooks[t]||pe.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:c[t]:(o=typeof n,"string"===o&&(i=_e.exec(n))&&i[1]&&(n=f(e,t,i),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(pe.cssNumber[a]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(c[t]=n))))}},css:function(e,t,n,r){var i,o,s,a=pe.camelCase(t);return t=pe.cssProps[a]||(pe.cssProps[a]=O(a)||a),s=pe.cssHooks[t]||pe.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=A(e,t,r)),"normal"===i&&t in ct&&(i=ct[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),pe.each(["height","width"],function(e,t){pe.cssHooks[t]={get:function(e,n,r){return n?!st.test(pe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?j(e,t,r):$e(e,at,function(){return j(e,t,r)}):void 0},set:function(e,n,r){var i,o=r&&ot(e),s=r&&U(e,t,r,"border-box"===pe.css(e,"boxSizing",!1,o),o);return s&&(i=_e.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=pe.css(e,t)),N(e,n,s)}}}),pe.cssHooks.marginLeft=R(le.reliableMarginLeft,function(e,t){return t?(parseFloat(A(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),pe.each({margin:"",padding:"",border:"Width"},function(e,t){pe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Fe[r]+t]=o[r]||o[r-2]||o[0];return i}},rt.test(e)||(pe.cssHooks[e+t].set=N)}),pe.fn.extend({css:function(e,t){return Re(this,function(e,t,n){var r,i,o={},s=0;if(pe.isArray(t)){for(r=ot(e),i=t.length;i>s;s++)o[t[s]]=pe.css(e,t[s],!1,r);return o}return void 0!==n?pe.style(e,t,n):pe.css(e,t)},e,t,arguments.length>1)}}),pe.Tween=L,L.prototype={constructor:L,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(pe.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=L.prototype.init,pe.fx.step={};var dt,pt,ft=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;pe.Animation=pe.extend(H,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return f(n.elem,e,_e.exec(t),n),n}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Ee);for(var n,r=0,i=e.length;i>r;r++)n=e[r],H.tweeners[n]=H.tweeners[n]||[],H.tweeners[n].unshift(t)},prefilters:[$],prefilter:function(e,t){t?H.prefilters.unshift(e):H.prefilters.push(e)}}),pe.speed=function(e,t,n){var r=e&&"object"==typeof e?pe.extend({},e):{complete:n||!n&&t||pe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!pe.isFunction(t)&&t};return pe.fx.off||Z.hidden?r.duration=0:r.duration="number"==typeof r.duration?r.duration:r.duration in pe.fx.speeds?pe.fx.speeds[r.duration]:pe.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){pe.isFunction(r.old)&&r.old.call(this),r.queue&&pe.dequeue(this,r.queue)},r},pe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=pe.isEmptyObject(e),o=pe.speed(t,n,r),s=function(){var t=H(this,pe.extend({},e),o);(i||Ne.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=pe.timers,s=Ne.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ht.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||pe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ne.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=pe.timers,s=r?r.length:0;for(n.finish=!0,pe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),pe.each(["toggle","show","hide"],function(e,t){var n=pe.fn[t];pe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,r,i)}}),pe.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),pe.timers=[],pe.fx.tick=function(){var e,t=0,n=pe.timers;for(dt=pe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||pe.fx.stop(),dt=void 0},pe.fx.timer=function(e){pe.timers.push(e),e()?pe.fx.start():pe.timers.pop()},pe.fx.interval=13,pe.fx.start=function(){pt||(pt=e.requestAnimationFrame?e.requestAnimationFrame(M):e.setInterval(pe.fx.tick,pe.fx.interval))},pe.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(pt):e.clearInterval(pt),pt=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(t,n){return t=pe.fx?pe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),n=t.appendChild(Z.createElement("option"));e.type="checkbox",le.checkOn=""!==e.value,le.optSelected=n.selected,e=Z.createElement("input"),e.value="t",e.type="radio",le.radioValue="t"===e.value}();var mt,gt=pe.expr.attrHandle;pe.fn.extend({attr:function(e,t){return Re(this,pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;return 3!==o&&8!==o&&2!==o?"undefined"==typeof e.getAttribute?pe.prop(e,t,n):(1===o&&pe.isXMLDoc(e)||(i=pe.attrHooks[t.toLowerCase()]||(pe.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void pe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=pe.find.attr(e,t),null==r?void 0:r)):void 0},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&pe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Ee);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return t===!1?pe.removeAttr(e,n):e.setAttribute(n,n),n}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=gt[t]||pe.find.attr;gt[t]=function(e,t,r){var i,o,s=t.toLowerCase();return r||(o=gt[s],gt[s]=i,i=null!=n(e,t,r)?s:null,gt[s]=o),i}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return Re(this,pe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[pe.propFix[e]||e]})}}),pe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;return 3!==o&&8!==o&&2!==o?(1===o&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,i=pe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this});var bt=/[\t\r\n\f]/g;pe.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,c=0;if(pe.isFunction(e))return this.each(function(t){pe(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(Ee)||[];n=this[c++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(bt," ")){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=pe.trim(r),i!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,c=0;if(pe.isFunction(e))return this.each(function(t){pe(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ee)||[];n=this[c++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(bt," ")){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=pe.trim(r),i!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):pe.isFunction(e)?this.each(function(n){pe(this).toggleClass(e.call(this,n,W(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=pe(this),o=e.match(Ee)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=W(this),t&&Ne.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ne.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(bt," ").indexOf(t)>-1)return!0;return!1}});var wt=/\r/g,St=/[\x20\t\r\n\f]+/g;pe.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=pe.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,pe(this).val()):e,null==i?i="":"number"==typeof i?i+="":pe.isArray(i)&&(i=pe.map(i,function(e){return null==e?"":e+""})),t=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=pe.valHooks[i.type]||pe.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(wt,""):null==n?"":n)):void 0}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:pe.trim(pe.text(e)).replace(St," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],a=o?i+1:r.length,c=0>i?a:o?i:0;a>c;c++)if(n=r[c],(n.selected||c===i)&&!n.disabled&&(!n.parentNode.disabled||!pe.nodeName(n.parentNode,"optgroup"))){if(t=pe(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=pe.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=pe.inArray(pe.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){return pe.isArray(t)?e.checked=pe.inArray(pe(e).val(),t)>-1:void 0}},le.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tt=/^(?:focusinfocus|focusoutblur)$/;pe.extend(pe.event,{trigger:function(t,n,r,i){var o,s,a,c,u,l,d,p=[r||Z],f=ae.call(t,"type")?t.type:t,h=ae.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||Z,3!==r.nodeType&&8!==r.nodeType&&!Tt.test(f+pe.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[pe.expando]?t:new pe.Event(f,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:pe.makeArray(n,[t]),d=pe.event.special[f]||{},i||!d.trigger||d.trigger.apply(r,n)!==!1)){if(!i&&!d.noBubble&&!pe.isWindow(r)){for(c=d.delegateType||f,Tt.test(c+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||Z)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?c:d.bindType||f,l=(Ne.get(s,"events")||{})[t.type]&&Ne.get(s,"handle"),l&&l.apply(s,n),l=u&&s[u],l&&l.apply&&Oe(s)&&(t.result=l.apply(s,n),t.result===!1&&t.preventDefault());return t.type=f,i||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),n)!==!1||!Oe(r)||u&&pe.isFunction(r[f])&&!pe.isWindow(r)&&(a=r[u],a&&(r[u]=null),pe.event.triggered=f,r[f](),pe.event.triggered=void 0,a&&(r[u]=a)),t.result}},simulate:function(e,t,n){var r=pe.extend(new pe.Event,n,{type:e,isSimulated:!0});pe.event.trigger(r,null,t)}}),pe.fn.extend({trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?pe.event.trigger(e,t,n,!0):void 0}}),pe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){pe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),le.focusin="onfocusin"in e,le.focusin||pe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){pe.event.simulate(t,e.target,pe.event.fix(e))};pe.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Ne.access(r,t);i||r.addEventListener(e,n,!0),Ne.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Ne.access(r,t)-1;i?Ne.access(r,t,i):(r.removeEventListener(e,n,!0),Ne.remove(r,t))}}});var Ct=e.location,xt=pe.now(),kt=/\?/;pe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+t),n};var Dt=/\[\]$/,It=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var n,r=[],i=function(e,t){var n=pe.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(pe.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){i(this.name,this.value)});else for(n in e)V(n,e[n],t,i);return r.join("&")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&Pt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!He.test(e))}).map(function(e,t){var n=pe(this).val();return null==n?null:pe.isArray(n)?pe.map(n,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:n.replace(It,"\r\n")}}).get()}});var At=/%20/g,Rt=/#.*$/,Ot=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Mt={},_t={},Ft="*/".concat("*"),Bt=Z.createElement("a");Bt.href=Ct.href,pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Ut.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?G(G(e,pe.ajaxSettings),t):G(pe.ajaxSettings,e)},ajaxPrefilter:z(Mt),ajaxTransport:z(_t),ajax:function(t,n){function r(t,n,r,a){var u,p,f,w,S,T=n;l||(l=!0,c&&e.clearTimeout(c),i=void 0,s=a||"",C.readyState=t>0?4:0,u=t>=200&&300>t||304===t,r&&(w=X(h,C,r)),w=K(h,w,C,u),u?(h.ifModified&&(S=C.getResponseHeader("Last-Modified"),S&&(pe.lastModified[o]=S),S=C.getResponseHeader("etag"),S&&(pe.etag[o]=S)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=w.state,p=w.data,f=w.error,u=!f)):(f=T,!t&&T||(T="error",0>t&&(t=0))),C.status=t,C.statusText=(n||T)+"",u?v.resolveWith(m,[p,T,C]):v.rejectWith(m,[C,T,f]),C.statusCode(b),b=void 0,d&&g.trigger(u?"ajaxSuccess":"ajaxError",[C,h,u?p:f]),y.fireWith(m,[C,T]),d&&(g.trigger("ajaxComplete",[C,h]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,s,a,c,u,l,d,p,f,h=pe.ajaxSetup({},n),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?pe(m):pe.event,v=pe.Deferred(),y=pe.Callbacks("once memory"),b=h.statusCode||{},w={},S={},T="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=Nt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){return null==l&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)C.always(e[C.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||T;return i&&i.abort(t),r(0,t),this}};if(v.promise(C),h.url=((t||h.url||Ct.href)+"").replace(Lt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Ee)||[""],null==h.crossDomain){u=Z.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=u.protocol+"//"+u.host}catch(x){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=pe.param(h.data,h.traditional)),J(Mt,h,n,C),l)return C;d=pe.event&&h.global,d&&0===pe.active++&&pe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!jt.test(h.type),o=h.url.replace(Rt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(At,"+")):(f=h.url.slice(o.length),h.data&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(o=o.replace(Ot,""),f=(kt.test(o)?"&":"?")+"_="+xt++ +f),h.url=o+f),h.ifModified&&(pe.lastModified[o]&&C.setRequestHeader("If-Modified-Since",pe.lastModified[o]),pe.etag[o]&&C.setRequestHeader("If-None-Match",pe.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ft+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)C.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(m,C,h)===!1||l))return C.abort();if(T="abort",y.add(h.complete),C.done(h.success),C.fail(h.error),i=J(_t,h,n,C)){if(C.readyState=1,d&&g.trigger("ajaxSend",[C,h]),l)return C;h.async&&h.timeout>0&&(c=e.setTimeout(function(){C.abort("timeout")},h.timeout));try{l=!1,i.send(w,r)}catch(x){if(l)throw x;r(-1,x)}}else r(-1,"No Transport");return C},getJSON:function(e,t,n){return pe.get(e,t,n,"json")},getScript:function(e,t){return pe.get(e,void 0,t,"script")}}),pe.each(["get","post"],function(e,t){pe[t]=function(e,n,r,i){return pe.isFunction(n)&&(i=i||r,r=n,n=void 0),pe.ajax(pe.extend({url:e,type:t,dataType:i,data:n,success:r},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pe.fn.extend({wrapAll:function(e){var t;return this[0]&&(pe.isFunction(e)&&(e=e.call(this[0])),t=pe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return pe.isFunction(e)?this.each(function(t){pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=pe.isFunction(e);return this.each(function(n){pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){pe(this).replaceWith(this.childNodes)}),this}}),pe.expr.pseudos.hidden=function(e){return!pe.expr.pseudos.visible(e)},pe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},pe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var $t={0:200,1223:204},qt=pe.ajaxSettings.xhr();le.cors=!!qt&&"withCredentials"in qt,le.ajax=qt=!!qt,pe.ajaxTransport(function(t){var n,r;return le.cors||qt&&!t.crossDomain?{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o($t[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(c){if(n)throw c}},abort:function(){n&&n()}}:void 0}),pe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),pe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=pe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ht=[],Wt=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||pe.expando+"_"+xt++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=pe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Wt,"$1"+i):t.jsonp!==!1&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||pe.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){void 0===o?pe(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ht.push(i)),s&&pe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),le.createHTMLDocument=function(){var e=Z.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),pe.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(le.createHTMLDocument?(t=Z.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=Z.location.href,t.head.appendChild(r)):t=Z),i=Se.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=y([e],t,o),o&&o.length&&pe(o).remove(),pe.merge([],i.childNodes))},pe.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=pe.trim(e.slice(a)),e=e.slice(0,a)),pe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&pe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?pe("<div>").append(pe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.pseudos.animated=function(e){return pe.grep(pe.timers,function(t){return e===t.elem}).length},pe.offset={setOffset:function(e,t,n){var r,i,o,s,a,c,u,l=pe.css(e,"position"),d=pe(e),p={};"static"===l&&(e.style.position="relative"),a=d.offset(),o=pe.css(e,"top"),c=pe.css(e,"left"),u=("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1,u?(r=d.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),pe.isFunction(t)&&(t=t.call(e,n,pe.extend({},a))),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):d.css(p)}},pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){pe.offset.setOffset(this,e,t)});var t,n,r,i,o=this[0];return o?o.getClientRects().length?(r=o.getBoundingClientRect(),r.width||r.height?(i=o.ownerDocument,n=Q(i),t=i.documentElement,{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===pe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pe.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+pe.css(e[0],"borderTopWidth",!0),left:r.left+pe.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-pe.css(n,"marginTop",!0),left:t.left-r.left-pe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||Ge})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;pe.fn[e]=function(r){return Re(this,function(e,r,i){var o=Q(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),pe.each(["top","left"],function(e,t){pe.cssHooks[t]=R(le.pixelPosition,function(e,n){return n?(n=A(e,t),it.test(n)?pe(e).position()[t]+"px":n):void 0})}),pe.each({Height:"height",Width:"width"},function(e,t){pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){pe.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return Re(this,function(t,n,i){var o;return pe.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?pe.css(t,n,a):pe.style(t,n,i,a)},t,s?i:void 0,s)}})}),pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),pe.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var Vt=e.jQuery,zt=e.$;return pe.noConflict=function(t){return e.$===pe&&(e.$=zt),t&&e.jQuery===pe&&(e.jQuery=Vt),pe},t||(e.jQuery=e.$=pe),pe}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.7",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){s.detach().trigger("closed.bs.alert").remove()}var i=e(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=e("#"===o?[]:o);t&&t.preventDefault(),s.length||(s=i.closest(".alert")),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,o)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,
    r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target).closest(".btn");t.call(r,"toggle"),e(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),s="string"==typeof t?t:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof t?i.to(t):s?i[s]():o.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(t,i),s=this.interval,a="next"==t?"left":"right",c=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],l=e.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(a),o.addClass(a),i.one("bsTransitionEnd",function(){o.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=e.extend({},o.data(),i.data()),a=i.attr("data-slide-to");a&&(s.interval=!1),t.call(o,s),a&&o.data("bs.carousel").to(a),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var c=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[s](this.$element[0][c])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),s=o.data("bs.collapse"),a=s?"toggle":i.data();n.call(o,a)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(o).each(function(){var r=e(this),i=t(r),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new s(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.7",s.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var o=t(i),s=o.hasClass("open");if(n(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var a={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",a)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",a))}return!1}},s.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),s=i.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&i.find(o).trigger("focus"),r.trigger("click");var a=" li:not(.disabled):visible a",c=i.find(".dropdown-menu"+a);if(c.length){var u=c.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<c.length-1&&u++,~u||(u=0),c.eq(u).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),s=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);o||i.data("bs.modal",o=new n(this,s)),"string"==typeof t?o[t](r):s.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,s,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var s=i[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",c="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,u=c.test(a);u&&(a=a.replace(c,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),d=o[0].offsetWidth,p=o[0].offsetHeight;if(u){var f=a,h=this.getPosition(this.$viewport);a="bottom"==a&&l.bottom+p>h.bottom?"top":"top"==a&&l.top-p<h.top?"bottom":"right"==a&&l.right+d>h.width?"left":"left"==a&&l.left-d<h.left?"right":a,o.removeClass(f).addClass(a)}var m=this.getCalculatedOffset(a,l,d,p);this.applyPlacement(m,a);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),a=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var c=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=o&&(t.top=t.top+o-u);var l=this.getViewportAdjustedDelta(n,t,c,u);l.left?t.left+=l.left:t.top+=l.top;var d=/top|bottom/.test(n),p=d?2*l.left-i+c:2*l.top-o+u,f=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=e(this.$tip),s=e.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,s=r?{top:0,left:0}:o?null:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},c=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,c,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-o-s.scroll,c=t.top+o-s.scroll+r;a<s.top?i.top=s.top-a:c>s.top+s.height&&(i.top=s.top+s.height-c)}else{var u=t.left-o,l=t.left+o+n;u<s.left?i.left=s.left-u:l>s.right&&(i.left=s.left+s.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return s!=(e=o[o.length-1])&&this.activate(e);if(s&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)s!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),s=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=e(r);this.activate(t.closest("li"),n),this.activate(a,a.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),a=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof t&&i[t]()})}var n=function(t,r){
    this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(e-r>=i+s)&&"bottom";var a=null==this.affixed,c=a?i:o.top,u=a?s:t;return null!=n&&n>=i?"top":null!=r&&c+u>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,s=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var a=this.getState(s,t,i,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var c="affix"+(a?"-"+a:""),u=e.Event(c+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-t-o})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery);var getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,webrtcUtils={log:function(){"undefined"!=typeof module||"function"==typeof require&&"function"==typeof define||console.log.apply(console,arguments)},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}};if("object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return"mozSrcObject"in this?this.mozSrcObject:this._srcObject},set:function(e){"mozSrcObject"in this?this.mozSrcObject=e:(this._srcObject=e,this.src=URL.createObjectURL(e))}}),getUserMedia=window.navigator&&window.navigator.getUserMedia),attachMediaStream=function(e,t){e.srcObject=t},reattachMediaStream=function(e,t){e.srcObject=t.srcObject},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia){if(webrtcUtils.log("This appears to be Firefox"),webrtcDetectedBrowser="firefox",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),webrtcMinimumVersion=31,window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(38>webrtcDetectedVersion&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var s={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(s.username=i.username,s.credential=i.credential),n.push(s)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return arguments.length?mozRTCPeerConnection.generateCertificate.apply(null,arguments):mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),getUserMedia=function(e,t,n){var r=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if((void 0!==r.min||void 0!==r.max||void 0!==r.exact)&&t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return 38>webrtcDetectedVersion&&(webrtcUtils.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),webrtcUtils.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=getUserMedia,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:requestUserMedia,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},41>webrtcDetectedVersion){var orgEnumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return orgEnumerateDevices().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){webrtcUtils.log("This appears to be Chrome"),webrtcDetectedBrowser="chrome",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),webrtcMinimumVersion=38,window.RTCPeerConnection=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),r=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return r(e,t);var s=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t};if(arguments.length>=2){var a=function(e){o[1](s(e))};return r.apply(this,[a,arguments[0]])}return new Promise(function(t,n){1===o.length&&null===e?r.apply(i,[function(e){t.apply(null,[s(e)])},n]):r.apply(i,[t,n])})},n},webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return arguments.length?webkitRTCPeerConnection.generateCertificate.apply(null,arguments):webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise(function(r,i){t.apply(n,[e[0],function(){r(),e.length>=2&&e[1].apply(null,[])},function(t){i(t),e.length>=3&&e[2].apply(null,[t])}])})}});var constraintsToChrome=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(getUserMedia=function(e,t,n){return e.audio&&(e.audio=constraintsToChrome(e.audio)),e.video&&(e.video=constraintsToChrome(e.video)),webrtcUtils.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=getUserMedia,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:requestUserMedia,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return webrtcUtils.log("spec:   "+JSON.stringify(e)),e.audio=constraintsToChrome(e.audio),e.video=constraintsToChrome(e.video),webrtcUtils.log("chrome: "+JSON.stringify(e)),origGetUserMedia(e)}}else navigator.mediaDevices.getUserMedia=function(e){return requestUserMedia(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){webrtcUtils.log("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){webrtcUtils.log("Dummy mediaDevices.removeEventListener called.")}),attachMediaStream=function(e,t){webrtcDetectedVersion>=43?e.srcObject=t:"undefined"!=typeof e.src?e.src=URL.createObjectURL(t):webrtcUtils.log("Error attaching stream to element.")},reattachMediaStream=function(e,t){webrtcDetectedVersion>=43?e.srcObject=t.srcObject:e.src=t.src}}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)){if(webrtcUtils.log("This appears to be Edge"),webrtcDetectedBrowser="edge",webrtcDetectedVersion=webrtcUtils.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),webrtcMinimumVersion=10547,window.RTCIceGatherer){var generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},localCName=generateIdentifier(),SDPUtils={};SDPUtils.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},SDPUtils.splitSections=function(e){var t=e.split("\r\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},SDPUtils.matchPrefix=function(e,t){return SDPUtils.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},SDPUtils.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},SDPUtils.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},SDPUtils.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},SDPUtils.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},SDPUtils.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},SDPUtils.writeFtmp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&e.parameters.length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},SDPUtils.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},SDPUtils.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+" "+e.parameter+"\r\n"}),t},SDPUtils.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:e.substr(7,t-7)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},SDPUtils.getDtlsParameters=function(e,t){var n=SDPUtils.splitLines(e);n=n.concat(SDPUtils.splitLines(t));var r=n.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),i={role:"auto",fingerprints:[{algorithm:r.split(" ")[0],value:r.split(" ")[1]}]};return i},SDPUtils.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},SDPUtils.getIceParameters=function(e,t){var n=SDPUtils.splitLines(e);n=n.concat(SDPUtils.splitLines(t));var r={usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return r},SDPUtils.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},SDPUtils.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=SDPUtils.splitLines(e),r=n[0].split(" "),i=3;i<r.length;i++){var o=r[i],s=SDPUtils.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=SDPUtils.parseRtpMap(s),c=SDPUtils.matchPrefix(e,"a=fmtp:"+o+" ");a.parameters=c.length?SDPUtils.parseFmtp(c[0]):{},a.rtcpFeedback=SDPUtils.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(SDPUtils.parseRtcpFb),t.codecs.push(a)}}return t},SDPUtils.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=SDPUtils.writeRtpMap(e),n+=SDPUtils.writeFtmp(e),n+=SDPUtils.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},SDPUtils.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},SDPUtils.writeMediaSection=function(e,t,n,r){var i=SDPUtils.writeRtpDescription(e.kind,t);if(i+=SDPUtils.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=SDPUtils.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendSsrc+" "+o}return i+="a=ssrc:"+e.sendSsrc+" cname:"+localCName+"\r\n"},SDPUtils.getDirection=function(e,t){for(var n=SDPUtils.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?SDPUtils.getDirection(t):"sendrecv"},window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e}),window.RTCPeerConnection=function(e){var t=this;if(this.onicecandidate=null,this.onaddstream=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}e&&e.iceServers&&e.iceServers.forEach(function(e){if(e.urls){var n;n="string"==typeof e.urls?e.urls:e.urls[0],-1!==n.indexOf("transport=udp")&&t.iceServers.push({username:e.username,credential:e.credential,urls:n})}}),this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this;this._localIceCandidatesBuffer.forEach(function(t){null!==e.onicecandidate&&e.onicecandidate(t)}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i);break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,r=new RTCIceGatherer(n.iceOptions),i=new RTCIceTransport(r);r.onlocalcandidate=function(o){var s={};s.candidate={sdpMid:e,sdpMLineIndex:t};var a=o.candidate;a&&0!==Object.keys(a).length?(a.component="RTCP"===i.component?2:1,s.candidate.candidate=SDPUtils.writeCandidate(a)):(void 0===r.state&&(r.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates");var c=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});null!==n.onicecandidate&&(n.localDescription&&""===n.localDescription.type?(n._localIceCandidatesBuffer.push(s),c&&n._localIceCandidatesBuffer.push({})):(n.onicecandidate(s),c&&n.onicecandidate({})))},i.onicestatechange=function(){n._updateConnectionState()};var o=new RTCDtlsTransport(i);return o.ondtlsstatechange=function(){n._updateConnectionState()},o.onerror=function(){o.state="failed",n._updateConnectionState()},{iceGatherer:r,iceTransport:i,dtlsTransport:o}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var r=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(r.encodings=[{ssrc:e.sendSsrc}],r.rtcp={cname:localCName,ssrc:e.recvSsrc},e.rtpSender.send(r)),n&&e.rtpReceiver&&(r.encodings=[{ssrc:e.recvSsrc}],r.rtcp={cname:e.cname,ssrc:e.sendSsrc},e.rtpReceiver.receive(r))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t=this;if("offer"===e.type)this._pendingOffer&&(this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){var n=SDPUtils.splitSections(t.remoteDescription.sdp),r=n.shift();n.forEach(function(e,n){var i=t.transceivers[n],o=i.iceGatherer,s=i.iceTransport,a=i.dtlsTransport,c=i.localCapabilities,u=i.remoteCapabilities,l="0"===e.split("\n",1)[0].split(" ",2)[1];if(!l){var d=SDPUtils.getIceParameters(e,r);s.start(o,d,"controlled");var p=SDPUtils.getDtlsParameters(e,r);a.start(p);var f=t._getCommonCapabilities(c,u);t._transceive(i,f.codecs.length>0,!1)}})}switch(this.localDescription=e,e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var i=arguments.length>1&&"function"==typeof arguments[1];if(i){var o=arguments[1];window.setTimeout(function(){o(),t._emitBufferedCandidates()},0)}var s=Promise.resolve();return s.then(function(){i||window.setTimeout(t._emitBufferedCandidates.bind(t),0)}),s},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,r=SDPUtils.splitSections(e.sdp),i=r.shift();switch(r.forEach(function(r,o){var s,a,c,u,l,d,p,f,h,m,g,v=SDPUtils.splitLines(r),y=v[0].substr(2).split(" "),b=y[0],w="0"===y[1],S=SDPUtils.getDirection(r,i),T=SDPUtils.parseRtpParameters(r);w||(m=SDPUtils.getIceParameters(r,i),g=SDPUtils.getDtlsParameters(r,i));var C,x=SDPUtils.matchPrefix(r,"a=mid:")[0].substr(6),k=SDPUtils.matchPrefix(r,"a=ssrc:").map(function(e){return SDPUtils.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];if(k&&(f=parseInt(k.ssrc,10),C=k.value),"offer"===e.type){var D=t._createIceAndDtlsTransports(x,o);if(h=RTCRtpReceiver.getCapabilities(b),p=1001*(2*o+2),d=new RTCRtpReceiver(D.dtlsTransport,b),n.addTrack(d.track),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=o){var I=t.localStreams[0].getTracks()[o];l=new RTCRtpSender(I,D.dtlsTransport)}t.transceivers[o]={iceGatherer:D.iceGatherer,iceTransport:D.iceTransport,dtlsTransport:D.dtlsTransport,localCapabilities:h,remoteCapabilities:T,rtpSender:l,rtpReceiver:d,kind:b,mid:x,cname:C,sendSsrc:p,recvSsrc:f},t._transceive(t.transceivers[o],!1,"sendrecv"===S||"sendonly"===S)}else"answer"!==e.type||w||(s=t.transceivers[o],a=s.iceGatherer,c=s.iceTransport,u=s.dtlsTransport,l=s.rtpSender,d=s.rtpReceiver,p=s.sendSsrc,h=s.localCapabilities,t.transceivers[o].recvSsrc=f,t.transceivers[o].remoteCapabilities=T,t.transceivers[o].cname=C,c.start(a,m,"controlling"),u.start(g),t._transceive(s,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!d||"sendrecv"!==S&&"sendonly"!==S?delete s.rtpReceiver:n.addTrack(d.track))}),this.remoteDescription=e,e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return window.setTimeout(function(){null!==t.onaddstream&&n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){t.onaddstream({stream:n})},0))},0),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e,null!==this.onsignalingstatechange&&this.onsignalingstatechange()},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){null!==this.onnegotiationneeded&&this.onnegotiationneeded()},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n["new"]>0?e="new":(n.connecting>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState&&(t.iceConnectionState=e,null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange())},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],r=0,i=0;if(this.localStreams.length&&(r=this.localStreams[0].getAudioTracks().length,i=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(r=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(i=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?r>0:i>0}),"audio"===e.kind?r--:"video"===e.kind&&i--});r>0||i>0;)r>0&&(n.push({kind:"audio",wantReceive:!0}),r--),i>0&&(n.push({kind:"video",wantReceive:!0}),i--);var o=SDPUtils.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var r,i,a=t.track,c=t.kind,u=generateIdentifier(),l=e._createIceAndDtlsTransports(u,n),d=RTCRtpSender.getCapabilities(c),p=1001*(2*n+1);a&&(r=new RTCRtpSender(a,l.dtlsTransport)),t.wantReceive&&(i=new RTCRtpReceiver(l.dtlsTransport,c)),s[n]={iceGatherer:l.iceGatherer,iceTransport:l.iceTransport,dtlsTransport:l.dtlsTransport,localCapabilities:d,remoteCapabilities:null,rtpSender:r,rtpReceiver:i,kind:c,mid:u,sendSsrc:p,recvSsrc:null};var f=s[n];o+=SDPUtils.writeMediaSection(f,f.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var a=new RTCSessionDescription({type:"offer",sdp:o});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,a),Promise.resolve(a)},window.RTCPeerConnection.prototype.createAnswer=function(){var e,t=this;1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var n=SDPUtils.writeSessionBoilerplate();this.transceivers.forEach(function(e){var r=t._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);n+=SDPUtils.writeMediaSection(e,r,"answer",t.localStreams[0])});var r=new RTCSessionDescription({type:"answer",sdp:n});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,r),Promise.resolve(r)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var r=this.transceivers[t];if(r){var i=Object.keys(e.candidate).length>0?SDPUtils.parseCandidate(e.candidate):{};if("tcp"===i.protocol&&0===i.port)return;if("1"!==i.component)return;"endOfCandidates"===i.type&&(i={}),r.iceTransport.addRemoteCandidate(i)}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r={};Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}}else webrtcUtils.log("Browser does not appear to be WebRTC-capable");else webrtcUtils.log("This does not appear to be a browser"),webrtcDetectedBrowser="not a browser";var webrtcTesting={};try{Object.defineProperty(webrtcTesting,"version",{set:function(e){webrtcDetectedVersion=e}})}catch(e){}if("undefined"!=typeof module){var RTCPeerConnection,RTCIceCandidate,RTCSessionDescription;"undefined"!=typeof window&&(RTCPeerConnection=window.RTCPeerConnection,RTCIceCandidate=window.RTCIceCandidate,RTCSessionDescription=window.RTCSessionDescription),module.exports={RTCPeerConnection:RTCPeerConnection,RTCIceCandidate:RTCIceCandidate,RTCSessionDescription:RTCSessionDescription,getUserMedia:getUserMedia,attachMediaStream:attachMediaStream,reattachMediaStream:reattachMediaStream,webrtcDetectedBrowser:webrtcDetectedBrowser,webrtcDetectedVersion:webrtcDetectedVersion,webrtcMinimumVersion:webrtcMinimumVersion,webrtcTesting:webrtcTesting,webrtcUtils:webrtcUtils}}else"function"==typeof require&&"function"==typeof define&&define([],function(){return{RTCPeerConnection:window.RTCPeerConnection,RTCIceCandidate:window.RTCIceCandidate,RTCSessionDescription:window.RTCSessionDescription,getUserMedia:getUserMedia,attachMediaStream:attachMediaStream,reattachMediaStream:reattachMediaStream,webrtcDetectedBrowser:webrtcDetectedBrowser,webrtcDetectedVersion:webrtcDetectedVersion,webrtcMinimumVersion:webrtcMinimumVersion,webrtcTesting:webrtcTesting,webrtcUtils:webrtcUtils}});var ws=new WebSocket("wss://"+location.host+"/groupcall"),participants={},name;window.onbeforeunload=function(){ws.close()},ws.onmessage=function(e){var t=JSON.parse(e.data);switch(t.id){case"existingParticipants":onExistingParticipants(t);break;case"newParticipantArrived":onNewParticipant(t);break;case"participantLeft":onParticipantLeft(t);break;case"receiveVideoAnswer":receiveVideoResponse(t);break;case"iceCandidate":participants[t.name].rtcPeer.addIceCandidate(t.candidate,function(e){})}};const PARTICIPANT_MAIN_CLASS="participant main",PARTICIPANT_CLASS="participant";!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.kurentoUtils=e()}}(function(){var e;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(e){e&&console.error(e)}function i(e){e.stop&&e.stop()}function o(e){e.getTracks().forEach(i)}function s(e,t){var n=[];return e.addEventListener("signalingstatechange",function(){if("stable"===this.signalingState)for(;n.length;){var e=n.shift();this.addIceCandidate(e.candidate,e.callback,e.callback)}}),function(r,i){switch(i=i||t,e.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":if(e.remoteDescription){e.addIceCandidate(r,i,i);break}default:n.push({candidate:r,callback:i})}}}function a(e){var t=e.indexOf("a=ssrc-group:FID");return t>0?e.slice(0,t):e}function c(e){var t=e.getVideoTracks();if(!t.length)return console.warn("No video tracks available in the video stream"),"";var n=["a=x-google-flag:conference","a=ssrc-group:SIM 1 2 3","a=ssrc:1 cname:localVideo","a=ssrc:1 msid:"+e.id+" "+t[0].id,"a=ssrc:1 mslabel:"+e.id,"a=ssrc:1 label:"+t[0].id,"a=ssrc:2 cname:localVideo","a=ssrc:2 msid:"+e.id+" "+t[0].id,"a=ssrc:2 mslabel:"+e.id,"a=ssrc:2 label:"+t[0].id,"a=ssrc:3 cname:localVideo","a=ssrc:3 msid:"+e.id+" "+t[0].id,"a=ssrc:3 mslabel:"+e.id,"a=ssrc:3 label:"+t[0].id];return n.push(""),n.join("\n")}function u(e,t,n){function i(){if(v){var e=A.getRemoteStreams()[0],t=e?URL.createObjectURL(e):"";v.pause(),v.src=t,v.load()}}function o(e){return F&&("Chrome"===I.name||"Chromium"===I.name)&&(e=new RTCSessionDescription({type:e.type,sdp:a(e.sdp)+c(b)})),e}function l(){h.emit("streamended",this)}function d(){"closed"===A.signalingState&&n('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),
b&&g&&h.showLocalVideo(),b&&(b.addEventListener("ended",l),A.addStream(b)),C&&(C.addEventListener("ended",l),A.addStream(C));var t=D.getBrowser();"sendonly"!==e||"Chrome"!==t.name&&"Chromium"!==t.name||39!==t.major||(e="sendrecv"),n()}function p(e){void 0===e&&(e=x),getUserMedia(e,function(e){b=e,d()},n)}if(!(this instanceof u))return new u(e,t,n);u.super_.call(this),t instanceof Function&&(n=t,t=void 0),t=t||{},n=(n||r).bind(this);var f,h=this,g=t.localVideo,v=t.remoteVideo,b=t.videoStream,C=t.audioStream,k=t.mediaConstraints,P=t.connectionConstraints,A=t.peerConnection,R=t.sendSource||"webcam",O=t.dataChannelConfig,N=t.dataChannels||!1,U=y.v4(),j=S({iceServers:m()},t.configuration),L=t.onstreamended;L&&this.on("streamended",L);var M=t.onicecandidate;M&&this.on("icecandidate",M);var _=t.oncandidategatheringdone;_&&this.on("candidategatheringdone",_);var F=t.simulcast,B=t.multistream,$=new T.Interop,q=[],H=!1;if(Object.defineProperties(this,{peerConnection:{get:function(){return A}},id:{value:t.id||U,writable:!1},remoteVideo:{get:function(){return v}},localVideo:{get:function(){return g}},dataChannel:{get:function(){return f}},currentFrame:{get:function(){if(v){if(v.readyState<v.HAVE_CURRENT_DATA)throw new Error("No video stream data available");var e=document.createElement("canvas");return e.width=v.videoWidth,e.height=v.videoHeight,e.getContext("2d").drawImage(v,0,0),e}}}}),!A&&(A=new RTCPeerConnection(j),N&&!f)){var W="WebRtcPeer-"+h.id,V=void 0;O&&(W=O.id||W,V-O.options),f=A.createDataChannel(W,V),O&&(f.onopen=O.onopen,f.onclose=O.onclose,f.onmessage=O.onmessage)}A.addEventListener("icecandidate",function(e){var t=e.candidate;if(w.listenerCount(h,"icecandidate")||w.listenerCount(h,"candidategatheringdone"))if(t){var n;n=B&&E?$.candidateToUnifiedPlan(t):t,h.emit("icecandidate",n),H=!1}else H||(h.emit("candidategatheringdone"),H=!0);else H||(q.push(t),t||(H=!0))}),A.onaddstream=t.onaddstream,A.onnegotiationneeded=t.onnegotiationneeded,this.on("newListener",function(e,t){if("icecandidate"===e||"candidategatheringdone"===e)for(;q.length;){var n=q.shift();!n==("candidategatheringdone"===e)&&t(n)}});var z=s(A);this.addIceCandidate=function(e,t){var n;n=B&&E?$.candidateToPlanB(e):new RTCIceCandidate(e),console.log("ICE candidate received"),t=(t||r).bind(this),z(n,t)},this.generateOffer=function(t){t=t.bind(this);var n=!0,r=!0;k&&(n="boolean"==typeof k.audio?k.audio:!0,r="boolean"==typeof k.video?k.video:!0);var i="Firefox"===I.name&&I.version>34?{offerToReceiveAudio:"sendonly"!==e&&n,offerToReceiveVideo:"sendonly"!==e&&r}:{mandatory:{OfferToReceiveAudio:"sendonly"!==e&&n,OfferToReceiveVideo:"sendonly"!==e&&r},optional:[{DtlsSrtpKeyAgreement:!0}]},s=S(i,P);A.createOffer(s).then(function(e){return e=o(e),A.setLocalDescription(e)}).then(function(){var e=A.localDescription;B&&E&&(e=$.toUnifiedPlan(e)),t(null,e.sdp,h.processAnswer.bind(h))})["catch"](t)},this.getLocalSessionDescriptor=function(){return A.localDescription},this.getRemoteSessionDescriptor=function(){return A.remoteDescription},this.showLocalVideo=function(){g.src=URL.createObjectURL(b),g.muted=!0},this.send=function(e){f&&"open"===f.readyState&&f.send(e)},this.processAnswer=function(e,t){t=(t||r).bind(this);var n=new RTCSessionDescription({type:"answer",sdp:e});if(B&&E){var o=$.toPlanB(n);n=o}return"closed"===A.signalingState?t("PeerConnection is closed"):void A.setRemoteDescription(n,function(){i(),t()},t)},this.processOffer=function(e,t){t=t.bind(this);var n=new RTCSessionDescription({type:"offer",sdp:e});if(B&&E){var r=$.toPlanB(n);n=r}return"closed"===A.signalingState?t("PeerConnection is closed"):void A.setRemoteDescription(n).then(function(){return i()}).then(function(){return A.createAnswer()}).then(function(e){return e=o(e),A.setLocalDescription(e)}).then(function(){var e=A.localDescription;B&&E&&(e=$.toUnifiedPlan(e)),t(null,e.sdp)})["catch"](t)},"recvonly"===e||b||C?setTimeout(d,0):"webcam"===R?p(k):getScreenConstraints(R,function(e,t){return e?n(e):(constraints=[k],constraints.unshift(t),void p(S.apply(void 0,constraints)))},U),this.on("_dispose",function(){g&&(g.pause(),g.src="",g.load(),g.muted=!1),v&&(v.pause(),v.src="",v.load()),h.removeAllListeners(),void 0!==window.cancelChooseDesktopMedia&&window.cancelChooseDesktopMedia(U)})}function l(e){var t="get"+e+"Tracks";return{enumerable:!0,get:function(){if(this.peerConnection){var e=this.peerConnection.getLocalStreams();if(e.length){for(var n,r=0;n=e[r];r++)for(var i,o=n[t](),s=0;i=o[s];s++)if(!i.enabled)return!1;return!0}}},set:function(e){function n(t){t.enabled=e}this.peerConnection.getLocalStreams().forEach(function(e){e[t]().forEach(n)})}}}function d(e,t){return this instanceof d?void d.super_.call(this,"recvonly",e,t):new d(e,t)}function p(e,t){return this instanceof p?void p.super_.call(this,"sendonly",e,t):new p(e,t)}function f(e,t){return this instanceof f?void f.super_.call(this,"sendrecv",e,t):new f(e,t)}function h(e,t){return b(e,t)}var m=e("freeice"),g=e("inherits"),v=e("ua-parser-js"),y=e("uuid"),b=e("hark"),w=e("events").EventEmitter,S=e("merge").recursive.bind(void 0,!0),T=e("sdp-translator");try{e("kurento-browser-extensions")}catch(C){"undefined"==typeof getScreenConstraints&&(getScreenConstraints=function(e,t){t(new Error("This library is not enabled for screen sharing"))})}var x={audio:!0,video:{width:640,framerate:15}},k=window&&window.navigator?window.navigator.userAgent:"",D=new v(k),I=D.getBrowser(),E=!1;("Chrome"===I.name||"Chromium"===I.name)&&(E=!0);g(u,w),Object.defineProperties(u.prototype,{enabled:{enumerable:!0,get:function(){return this.audioEnabled&&this.videoEnabled},set:function(e){this.audioEnabled=this.videoEnabled=e}},audioEnabled:l("Audio"),videoEnabled:l("Video")}),u.prototype.getLocalStream=function(e){return this.peerConnection?this.peerConnection.getLocalStreams()[e||0]:void 0},u.prototype.getRemoteStream=function(e){return this.peerConnection?this.peerConnection.getRemoteStreams()[e||0]:void 0},u.prototype.dispose=function(){var e=this.peerConnection,t=this.dataChannel;try{if(t){if("closed"===t.signalingState)return;t.close()}if(e){if("closed"===e.signalingState)return;e.getLocalStreams().forEach(o),e.close()}}catch(n){}this.emit("_dispose")},g(d,u),g(p,u),g(f,u),n.bufferizeCandidates=s,n.WebRtcPeerRecvonly=d,n.WebRtcPeerSendonly=p,n.WebRtcPeerSendrecv=f,n.hark=h},{events:4,freeice:5,hark:8,inherits:9,"kurento-browser-extensions":10,merge:11,"sdp-translator":18,"ua-parser-js":21,uuid:23}],2:[function(e,t,n){window.addEventListener&&(t.exports=e("./index"))},{"./index":3}],3:[function(e,t,n){var r=e("./WebRtcPeer");n.WebRtcPeer=r},{"./WebRtcPeer":1}],4:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],5:[function(e,t,n){"use strict";var r=e("normalice");t.exports=function(t){function n(e,t){for(var n,i=[],s=[].concat(o[e]);s.length&&i.length<t;)n=Math.random()*s.length|0,i=i.concat(s.splice(n,1));return i.map(function(t){return"string"==typeof t||t instanceof String?r(e+":"+t):t})}var i,o={stun:(t||{}).stun||e("./stun.json"),turn:(t||{}).turn||e("./turn.json")},s=(t||{}).stunCount||2,a=(t||{}).turnCount||0;return i=[].concat(n("stun",s)),a&&(i=i.concat(n("turn",a))),i}},{"./stun.json":6,"./turn.json":7,normalice:12}],6:[function(e,t,n){t.exports=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org","stun.services.mozilla.com"]},{}],7:[function(e,t,n){t.exports=[]},{}],8:[function(e,t,n){function r(e,t){var n=-(1/0);e.getFloatFrequencyData(t);for(var r=4,i=t.length;i>r;r++)t[r]>n&&t[r]<0&&(n=t[r]);return n}var i=e("wildemitter"),o=window.AudioContext||window.webkitAudioContext,s=null;t.exports=function(e,t){var n=new i;if(!o)return n;var t=t||{},a=t.smoothing||.1,c=t.interval||50,u=t.threshold,l=t.play,d=t.history||10,p=!0;s||(s=new o);var f,h,m;m=s.createAnalyser(),m.fftSize=512,m.smoothingTimeConstant=a,h=new Float32Array(m.fftSize),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(f=s.createMediaElementSource(e),"undefined"==typeof l&&(l=!0),u=u||-50):(f=s.createMediaStreamSource(e),u=u||-50),f.connect(m),l&&m.connect(s.destination),n.speaking=!1,n.setThreshold=function(e){u=e},n.setInterval=function(e){c=e},n.stop=function(){p=!1,n.emit("volume_change",-100,u),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking"))},n.speakingHistory=[];for(var g=0;d>g;g++)n.speakingHistory.push(0);var v=function(){setTimeout(function(){if(p){var e=r(m,h);n.emit("volume_change",e,u);var t=0;if(e>u&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(u>e&&n.speaking){for(var i=0;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>u)),v()}},c)};return v(),n}},{wildemitter:24}],9:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],10:[function(e,t,n){},{}],11:[function(e,t,n){!function(e){function n(e,t){if("object"!==i(e))return t;for(var r in t)"object"===i(e[r])&&"object"===i(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,r){var s=r[0],a=r.length;(e||"object"!==i(s))&&(s={});for(var c=0;a>c;++c){var u=r[c],l=i(u);if("object"===l)for(var d in u){var p=e?o.clone(u[d]):u[d];t?s[d]=n(s[d],p):s[d]=p}}return s}function i(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var o=function(e){return r(e===!0,!1,arguments)},s="merge";o.recursive=function(e){return r(e===!0,!0,arguments)},o.clone=function(e){var t,n,r=e,s=i(e);if("array"===s)for(r=[],n=e.length,t=0;n>t;++t)r[t]=o.clone(e[t]);else if("object"===s){r={};for(t in e)r[t]=o.clone(e[t])}return r},e?t.exports=o:window[s]=o}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],12:[function(e,t,n){var r=["stun:","turn:"];t.exports=function(e){var t,n,i=(e||{}).url||e,o={};return"string"==typeof i||i instanceof String?(i=i.trim(),(t=r[r.indexOf(i.slice(0,5))])?(i=i.slice(5),n=i.split("@"),o.username=e.username,o.credential=e.credential,n.length>1&&(i=n[1],n=n[0].split(":"),o.username=n[0],o.credential=(e||{}).credential||n[1]||""),o.url=t+i,o.urls=[o.url],o):e):e}},{}],13:[function(e,t,n){var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],14:[function(e,t,n){var r=e("./parser"),i=e("./writer");n.write=i,n.parse=r.parse,n.parseFmtpConfig=r.parseFmtpConfig,n.parsePayloads=r.parsePayloads,n.parseRemoteCandidates=r.parseRemoteCandidates},{"./parser":15,"./writer":16}],15:[function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))},o=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:r?t[e.name]:t;i(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},s=e("./grammar"),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);n.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(s[t]||[]).length;a+=1){var c=s[t][a];if(c.reg.test(i))return o(c,r,i)}}),t.media=n,t};var c=function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=r(n[1])),e};n.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(c,{})},n.parsePayloads=function(e){return e.split(" ").map(Number)},n.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t}},{"./grammar":13}],16:[function(e,t,n){var r=e("./grammar"),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},s=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,i=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var a=t.names[s];t.name?i.push(n[t.name][a]):i.push(n[t.names[s]])}else i.push(n[t.name]);return o.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||a,i=t.innerOrder||c,o=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(s(t,n,e))})})}),e.media.forEach(function(e){o.push(s("m",r.m[0],e)),i.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(s(t,n,e))})})})}),o.join("\r\n")+"\r\n"}},{"./grammar":13}],17:[function(e,t,n){t.exports=function r(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;n>t;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!r.apply(this[t],[e[t]]))return!1}else if(this[t]!=e[t])return!1;return!0}},{}],18:[function(e,t,n){n.Interop=e("./interop")},{"./interop":19}],19:[function(e,t,n){"use strict";function r(){this.cache={mlB2UMap:{},mlU2BMap:{}}}function i(e){"undefined"!=typeof e.setup&&("active"===e.setup?e.setup="passive":"passive"===e.setup&&(e.setup="active"))}var o=e("./transform"),s=e("./array-equals");t.exports=r,r.prototype.candidateToUnifiedPlan=function(e){var t=new RTCIceCandidate(e);return t.sdpMLineIndex=this.cache.mlB2UMap[t.sdpMLineIndex],t},r.prototype.candidateToPlanB=function(e){var t=new RTCIceCandidate(e);if(0===t.sdpMid.indexOf("audio"))t.sdpMid="audio";else{if(0!==t.sdpMid.indexOf("video"))throw new Error("candidate with "+t.sdpMid+" not allowed");t.sdpMid="video"}return t.sdpMLineIndex=this.cache.mlU2BMap[t.sdpMLineIndex],t},r.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=o.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},r.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return e;var n=o.parse(e.sdp);if("undefined"==typeof n.media||!Array.isArray(n.media)||0===n.media.length)return e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return e;for(var r=e.sdp,i=!1,s=0;s<n.media.length;s++){var a=n.media[s];a.rtp.forEach(function(e){if("NULL"===e.codec){i=!0;var n=o.parse(t.cache.offer);e.codec=n.media[s].rtp[0].codec}})}i&&(r=o.write(n)),this.cache[e.type]=r;var c=n.media;n.media=[];var u={},l=[];c.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");("undefined"==typeof u[e.type]||"inactive"===u[e.type].direction)&&(u[e.type]=e)}),c.forEach(function(e){return"application"===e.type?(n.media.push(e),void l.push(e.mid)):("object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){"object"!=typeof u[e.type].sources&&(u[e.type].sources={}),u[e.type].sources[t]=e.sources[t],"undefined"!=typeof e.msid&&(u[e.type].sources[t].msid=e.msid)}),"undefined"!=typeof e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&("undefined"!=typeof u[e.type].ssrcGroups&&Array.isArray(u[e.type].ssrcGroups)||(u[e.type].ssrcGroups=[]),u[e.type].ssrcGroups=u[e.type].ssrcGroups.concat(e.ssrcGroups)),void(u[e.type]===e&&(e.mid=e.type,delete e.bundleOnly,delete e.msid,"audio"==e.type?(l.unshift(e.type),n.media.unshift(e)):(l.push(e.type),n.media.push(e)))))}),"undefined"!=typeof n.groups&&n.groups.some(function(e){return"BUNDLE"===e.type?(e.mids=l.join(" "),!0):void 0}),n.msidSemantic={semantic:"WMS",token:"*"};var d=o.write(n);return new RTCSessionDescription({type:e.type,sdp:d})},r.prototype.toUnifiedPlan=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return e;var n=o.parse(e.sdp);if("undefined"==typeof n.media||!Array.isArray(n.media)||0===n.media.length)return e;if(n.media.length>3||!n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return e;var r=[];n.media.forEach(function(e){r.push(e.mid)});var a=!1;if("undefined"!=typeof n.groups&&Array.isArray(n.groups)&&(a=n.groups.every(function(e){return"BUNDLE"!==e.type||s.apply(e.mids.sort(),[r.sort()])})),!a&n.media.length>1)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");var c;if("answer"===e.type)c="offer";else{if("offer"!==e.type)throw new Error("Type '"+e.type+"' not supported.");c="answer"}var u;"undefined"!=typeof this.cache[c]&&(u=o.parse(this.cache[c]));var l,d,p,f,h={audio:{},video:{}},m={},g=0,v=0,y={},b={},w={},S={};if(n.media.forEach(function(n){if(("string"!=typeof n.rtcpMux||"rtcp-mux"!==n.rtcpMux)&&"inactive"!==n.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"===n.type)return void(m[n.mid]=n);var r=n.sources,i=n.ssrcGroups,o=n.port;if("undefined"!=typeof n.candidates&&(l="undefined"!=typeof l?l.concat(n.candidates):n.candidates),"undefined"!=typeof d&&"undefined"!=typeof n.iceUfrag&&d!=n.iceUfrag)throw new Error("Only BUNDLE supported, iceUfrag must be the same for all m-lines.\n	Last iceUfrag: "+d+"\n	New iceUfrag: "+n.iceUfrag);if("undefined"!=typeof n.iceUfrag&&(d=n.iceUfrag),"undefined"!=typeof p&&"undefined"!=typeof n.icePwd&&p!=n.icePwd)throw new Error("Only BUNDLE supported, icePwd must be the same for all m-lines.\n	Last icePwd: "+p+"\n	New icePwd: "+n.icePwd);if("undefined"!=typeof n.icePwd&&(p=n.icePwd),"undefined"!=typeof f&&"undefined"!=typeof n.fingerprint&&(f.type!=n.fingerprint.type||f.hash!=n.fingerprint.hash))throw new Error("Only BUNDLE supported, fingerprint must be the same for all m-lines.\n	Last fingerprint: "+JSON.stringify(f)+"\n	New fingerprint: "+JSON.stringify(n.fingerprint));"undefined"!=typeof n.fingerprint&&(f=n.fingerprint),b[n.type]=n.payloads,w[n.type]=n.rtcpFb,S[n.type]=n.rtp;var s={};"undefined"!=typeof i&&Array.isArray(i)&&i.forEach(function(e){"undefined"!=typeof e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(t){"undefined"==typeof s[t]&&(s[t]=[]),s[t].push(e)})});var a={};if("object"==typeof r)delete n.sources,delete n.ssrcGroups,delete n.candidates,delete n.iceUfrag,delete n.icePwd,delete n.fingerprint,delete n.port,delete n.mid,Object.keys(r).forEach(function(i){var c;return"offer"!==e.type||r[i].msid?("undefined"!=typeof s[i]&&Array.isArray(s[i])&&s[i].some(function(e){return e.ssrcs.some(function(e){return"object"==typeof a[e]?(c=a[e],!0):void 0})}),void("object"==typeof c?(c.sources[i]=r[i],delete r[i].msid):(c=Object.create(n),a[i]=c,"undefined"!=typeof r[i].msid&&(c.msid=r[i].msid,delete r[i].msid),c.sources={},c.sources[i]=r[i],c.ssrcGroups=s[i],"undefined"!=typeof u&&"undefined"!=typeof u.media&&Array.isArray(u.media)&&u.media.forEach(function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){t===i&&(c.mid=e.mid)})}),"undefined"==typeof c.mid&&(c.mid=[n.type,"-",i].join("")),c.candidates=l,c.iceUfrag=d,c.icePwd=p,c.fingerprint=f,c.port=o,m[c.mid]=c,y[v]=c.sources,t.cache.mlU2BMap[v]=g,"undefined"==typeof t.cache.mlB2UMap[g]&&(t.cache.mlB2UMap[g]=v),v++))):void(h[n.type][i]=r[i])});else{var c=n;c.candidates=l,c.iceUfrag=d,c.icePwd=p,c.fingerprint=f,c.port=o,m[c.mid]=c,t.cache.mlU2BMap[v]=g,"undefined"==typeof t.cache.mlB2UMap[g]&&(t.cache.mlB2UMap[g]=v)}g++}),n.media=[],r=[],"answer"===e.type)for(var T=0;T<u.media.length;T++){var C=u.media[T];"undefined"==typeof m[C.mid]&&(delete C.msid,delete C.sources,delete C.ssrcGroups,"undefined"==typeof y[T]&&(C.direction&&"sendrecv"!==C.direction?"sendonly"===C.direction&&(C.direction="inactive"):C.direction="recvonly"),C.sources=y[T],C.candidates=l,C.iceUfrag=d,C.icePwd=p,C.fingerprint=f,C.rtp=S[C.type],C.payloads=b[C.type],C.rtcpFb=w[C.type]),n.media.push(C),"string"==typeof C.mid&&r.push(C.mid)}else"undefined"!=typeof u&&"undefined"!=typeof u.media&&Array.isArray(u.media)&&u.media.forEach(function(e){r.push(e.mid),"undefined"!=typeof m[e.mid]?n.media.push(m[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="sendonly"),e.direction&&"recvonly"!==e.direction||(e.direction="inactive"),i(e),n.media.push(e))}),Object.keys(m).forEach(function(e){if(-1===r.indexOf(e))if(r.push(e),"recvonly"===m[e].direction){var t=!1;n.media.some(function(n){return"sendrecv"!==n.direction&&"sendonly"!==n.direction||n.type!==m[e].type?void 0:(Object.keys(m[e].sources).forEach(function(t){n.sources[t]=m[e].sources[t]}),t=!0,!0)}),t||n.media.push(m[e])}else n.media.push(m[e])});["audio","video"].forEach(function(e){if(n&&n.media&&Array.isArray(n.media)){var r=null;if(Object.keys(h[e]).length>0&&(r=t.getFirstSendingIndexFromAnswer(e),null===r))for(var i=0;i<n.media.length;i++)if(n.media[i].type===e){r=i;break}if(r&&n.media.length>r){var o=n.media[r];Object.keys(h[e]).forEach(function(t){o.sources&&o.sources[t],o.sources||(o.sources={}),o.sources[t]=h[e][t]})}}}),"undefined"!=typeof n.groups&&n.groups.some(function(e){return"BUNDLE"===e.type?(e.mids=r.join(" "),!0):void 0}),n.msidSemantic={semantic:"WMS",token:"*"};var x=o.write(n);return this.cache[e.type]=x,new RTCSessionDescription({type:e.type,sdp:x})}},{"./array-equals":17,"./transform":20}],20:[function(e,t,n){var r=e("sdp-transform");n.write=function(e,t){return"undefined"!=typeof e&&"undefined"!=typeof e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){"undefined"!=typeof e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(t){var n=e.sources[t];Object.keys(n).forEach(function(r){e.ssrcs.push({id:t,attribute:r,value:n[r]})})}),delete e.sources),"undefined"!=typeof e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"undefined"!=typeof e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),"undefined"!=typeof e&&"undefined"!=typeof e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){"undefined"!=typeof e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),r.write(e,t)},n.parse=function(e){var t=r.parse(e);return"undefined"!=typeof t&&"undefined"!=typeof t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){"undefined"!=typeof e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value}),delete e.ssrcs),"undefined"!=typeof e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),"undefined"!=typeof t&&"undefined"!=typeof t.groups&&Array.isArray(t.groups)&&t.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),t}},{"sdp-transform":14}],21:[function(t,n,r){!function(t,i){"use strict";var o="0.7.10",s="",a="?",c="function",u="undefined",l="object",d="string",p="major",f="model",h="name",m="type",g="vendor",v="version",y="architecture",b="console",w="mobile",S="tablet",T="smarttv",C="wearable",x="embedded",k={extend:function(e,t){for(var n in t)-1!=="browser cpu device engine os".indexOf(n)&&t[n].length%2===0&&(e[n]=t[n].concat(e[n]));return e},has:function(e,t){return"string"==typeof e?-1!==t.toLowerCase().indexOf(e.toLowerCase()):!1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===d?e.split(".")[0]:i}},D={rgx:function(){for(var e,t,n,r,o,s,a,d=0,p=arguments;d<p.length&&!s;){var f=p[d],h=p[d+1];if(typeof e===u){e={};for(r in h)h.hasOwnProperty(r)&&(o=h[r],typeof o===l?e[o[0]]=i:e[o]=i)}for(t=n=0;t<f.length&&!s;)if(s=f[t++].exec(this.getUA()))for(r=0;r<h.length;r++)a=s[++n],o=h[r],typeof o===l&&o.length>0?2==o.length?typeof o[1]==c?e[o[0]]=o[1].call(this,a):e[o[0]]=o[1]:3==o.length?typeof o[1]!==c||o[1].exec&&o[1].test?e[o[0]]=a?a.replace(o[1],o[2]):i:e[o[0]]=a?o[1].call(this,a,o[2]):i:4==o.length&&(e[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):i):e[o]=a?a:i;d+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(k.has(t[n][r],e))return n===a?i:n}else if(k.has(t[n],e))return n===a?i:n;return e}},I={browser:{oldsafari:{version:{
    "1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},E={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[h,v],[/\s(opr)\/([\w\.]+)/i],[[h,"Opera"],v],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[h,v],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[h,"IE"],v],[/(edge)\/((\d+)?[\w\.]+)/i],[h,v],[/(yabrowser)\/([\w\.]+)/i],[[h,"Yandex"],v],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],v],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[h,v],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[h,"UCBrowser"],v],[/(dolfin)\/([\w\.]+)/i],[[h,"Dolphin"],v],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[h,"Chrome"],v],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[v,[h,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[v,[h,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[v,[h,"Facebook"]],[/fxios\/([\w\.-]+)/i],[v,[h,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[v,[h,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[v,h],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[h,[v,D.str,I.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[h,v],[/(navigator|netscape)\/([\w\.-]+)/i],[[h,"Netscape"],v],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[h,v]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[y,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[y,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,g,[m,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[g,"Apple"],[m,S]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[g,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[g,f,[m,S]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[g,"Amazon"],[m,S]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,D.str,I.device.amazon.model],[g,"Amazon"],[m,w]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,g,[m,w]],[/\((ip[honed|\s\w*]+);/i],[f,[g,"Apple"],[m,w]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[g,f,[m,w]],[/\(bb10;\s(\w+)/i],[f,[g,"BlackBerry"],[m,w]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[f,[g,"Asus"],[m,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[g,"Sony"],[f,"Xperia Tablet"],[m,S]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[g,"Sony"],[f,"Xperia Phone"],[m,w]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[g,f,[m,b]],[/android.+;\s(shield)\sbuild/i],[f,[g,"Nvidia"],[m,b]],[/(playstation\s[34portablevi]+)/i],[f,[g,"Sony"],[m,b]],[/(sprint\s(\w+))/i],[[g,D.str,I.device.sprint.vendor],[f,D.str,I.device.sprint.model],[m,w]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[g,f,[m,S]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[g,[f,/_/g," "],[m,w]],[/(nexus\s9)/i],[f,[g,"HTC"],[m,S]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[g,"Microsoft"],[m,b]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[g,"Microsoft"],[m,w]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[f,[g,"Motorola"],[m,w]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[g,"Motorola"],[m,S]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[g,"Samsung"],f,[m,S]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[g,"Samsung"],f,[m,w]],[/(samsung);smarttv/i],[g,f,[m,T]],[/\(dtv[\);].+(aquos)/i],[f,[g,"Sharp"],[m,T]],[/sie-(\w+)*/i],[f,[g,"Siemens"],[m,w]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[g,"Nokia"],f,[m,w]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[g,"Acer"],[m,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[g,"LG"],f,[m,S]],[/(lg) netcast\.tv/i],[g,f,[m,T]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[f,[g,"LG"],[m,w]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[g,"Lenovo"],[m,S]],[/linux;.+((jolla));/i],[g,f,[m,w]],[/((pebble))app\/[\d\.]+\s/i],[g,f,[m,C]],[/android.+;\s(glass)\s\d/i],[f,[g,"Google"],[m,C]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[g,"Xiaomi"],[m,w]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[m,k.lowerize],g,f]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[v,[h,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[h,v],[/rv\:([\w\.]+).*(gecko)/i],[v,h]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[h,v],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[h,[v,D.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[h,"Windows"],[v,D.str,I.os.windows.version]],[/\((bb)(10);/i],[[h,"BlackBerry"],v],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[h,v],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[h,"Symbian"],v],[/\((series40);/i],[h],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[h,"Firefox OS"],v],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[h,v],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[h,"Chromium OS"],v],[/(sunos)\s?([\w\.]+\d)*/i],[[h,"Solaris"],v],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[h,v],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[h,"iOS"],[v,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[h,"Mac OS"],[v,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[h,v]]},P=function(e,n){if(!(this instanceof P))return new P(e,n).getResult();var r=e||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:s),i=n?k.extend(E,n):E;return this.getBrowser=function(){var e=D.rgx.apply(this,i.browser);return e.major=k.major(e.version),e},this.getCPU=function(){return D.rgx.apply(this,i.cpu)},this.getDevice=function(){return D.rgx.apply(this,i.device)},this.getEngine=function(){return D.rgx.apply(this,i.engine)},this.getOS=function(){return D.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this.setUA(r),this};P.VERSION=o,P.BROWSER={NAME:h,MAJOR:p,VERSION:v},P.CPU={ARCHITECTURE:y},P.DEVICE={MODEL:f,VENDOR:g,TYPE:m,CONSOLE:b,MOBILE:w,SMARTTV:T,TABLET:S,WEARABLE:C,EMBEDDED:x},P.ENGINE={NAME:h,VERSION:v},P.OS={NAME:h,VERSION:v},typeof r!==u?(typeof n!==u&&n.exports&&(r=n.exports=P),r.UAParser=P):typeof e===c&&e.amd?e(function(){return P}):t.UAParser=P;var A=t.jQuery||t.Zepto;if(typeof A!==u){var R=new P;A.ua=R.getResult(),A.ua.get=function(){return R.getUA()},A.ua.set=function(e){R.setUA(e);var t=R.getResult();for(var n in t)A.ua[n]=t[n]}}}("object"==typeof window?window:this)},{}],22:[function(e,t,n){(function(e){var n;if(e.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,n){function r(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[r+i++]=u[e])});16>i;)t[r+i++]=0;return t}function i(e,t){var n=t||0,r=c;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function o(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:f,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:m+1,u=a-h+(c-m)/1e4;if(0>u&&void 0===e.clockseq&&(s=s+1&16383),(0>u||a>h)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=a,m=c,f=s,a+=122192928e5;var l=(1e4*(268435455&a)+c)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var d=a/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var g=e.node||p,v=0;6>v;v++)o[r+v]=g[v];return t?t:i(o)}function s(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;16>s;s++)t[r+s]=o[s];return t||i(o)}for(var a=e("./rng"),c=[],u={},l=0;256>l;l++)c[l]=(l+256).toString(16).substr(1),u[c[l]]=l;var d=a(),p=[1|d[0],d[1],d[2],d[3],d[4],d[5]],f=16383&(d[6]<<8|d[7]),h=0,m=0,g=s;g.v1=o,g.v4=s,g.parse=r,g.unparse=i,t.exports=g},{"./rng":22}],24:[function(e,t,n){function r(){}t.exports=r,r.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},t.once=function(e,t,n){function r(){i.off(e,r),a.apply(this,arguments)}var i=this,o=3===arguments.length,s=o?arguments[1]:void 0,a=o?arguments[2]:arguments[1];return this.on(e,s,r),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,n,r,i;for(t in this.callbacks)for(i=this.callbacks[t],n=0,r=i.length;r>n;n++)i[n]._groupName===e&&(i.splice(n,1),n--,r--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(n=r.indexOf(t),r.splice(n,1),0===r.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,r,i=[].slice.call(arguments,1),o=this.callbacks[e],s=this.getWildcardCallbacks(e);if(o)for(r=o.slice(),t=0,n=r.length;n>t&&r[t];++t)r[t].apply(this,i);if(s)for(n=s.length,r=s.slice(),t=0,n=r.length;n>t&&r[t];++t)r[t].apply(this,[e].concat(i));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}},r.mixin(r)},{}]},{},[2])(2)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.io=e()}}(function(){var e;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(e,t,n){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=l(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=l(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate?t.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized;var i="object"==typeof n&&n;i.global===i&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),c=e("indexof"),u=e("engine.io-parser"),l=e("parseuri"),d=e("parsejson"),p=e("parseqs");t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=e("./transport"),r.transports=e("./transports"),r.parser=e("engine.io-parser"),r.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=i(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return n},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;d=d||t}d||(a('probe transport "%s" opened',e),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",l),!l)return;r.priorWebsocketSuccess="websocket"==l.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){d||"closed"!=p.readyState&&(a("changing transport and sending upgrade packet"),u(),p.setTransport(l),l.send([{type:"upgrade"}]),p.emit("upgrade",l),l=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=l.name,p.emit("upgradeError",n)}}))}function n(){d||(d=!0,u(),l.close(),l=null)}function i(t){var r=new Error("probe error: "+t);r.transport=l.name,n(),a('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",r)}function o(){i("transport closed")}function s(){i("socket closed")}function c(e){l&&e.name!=l.name&&(a('"%s" works - aborting "%s"',e.name,l.name),n())}function u(){l.removeListener("open",t),l.removeListener("error",i),l.removeListener("close",o),p.removeListener("close",s),p.removeListener("upgrading",c)}a('probing transport "%s"',e);var l=this.createTransport(e,{probe:1}),d=!1,p=this;r.priorWebsocketSuccess=!1,l.once("open",t),l.once("error",i),l.once("close",o),this.once("close",s),this.once("upgrading",c),l.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){a("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;r>n;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var i=e("engine.io-parser"),o=e("component-emitter");t.exports=r,o(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(e,t,n){(function(t){function r(e){var n,r=!1,a=!1,c=!1!==e.jsonp;if(t.location){var u="https:"==location.protocol,l=location.port;l||(l=u?443:80),r=e.hostname!=location.hostname||l!=e.port,a=e.secure!=u}if(e.xdomain=r,e.xscheme=a,n=new i(e),"open"in n&&!e.forceJSONP)return new o(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var i=e("xmlhttprequest-ssl"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");n.polling=r,n.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(e,t,n){(function(n){function r(){}function i(e){o.call(this,e),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=r)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=i;var a,c=/\n/g,u=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=l,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(e,t,n){(function(n){function r(){}function i(e){if(c.call(this,e),n.location){var t="https:"==location.protocol,r=location.port;r||(r=t?443:80),this.xd=e.hostname!=n.location.hostname||r!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest-ssl"),c=e("./polling"),u=e("component-emitter"),l=e("component-inherit"),d=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,l(i,c),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new o(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},i.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),r=this;try{d("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}}catch(s){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?r.onLoad():setTimeout(function(){r.onError(t.status)},0))},d("xhr data %s",this.data),t.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(t){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var r=new Uint8Array(this.xhr.response),i=[],o=0,s=r.length;s>o;o++)i.push(r[o]);e=String.fromCharCode.apply(null,i)}else e=this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",s):n.addEventListener&&n.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(e,t,n){function r(e){var t=e&&e.forceBase64;(!l||t)&&(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("parseqs"),s=e("engine.io-parser"),a=e("component-inherit"),c=e("yeast"),u=e("debug")("engine.io-client:polling");
    t.exports=r;var l=function(){var t=e("xmlhttprequest-ssl"),n=new t({xdomain:!1});return null!=n.responseType}();a(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){u("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||t()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;u("polling got data %s",e);var n=function(e,n,r){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){u("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e);var r=-1!==this.hostname.indexOf(":");return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(e,t,n){(function(n){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,i.call(this,e)}var i=e("../transport"),o=e("engine.io-parser"),s=e("parseqs"),a=e("component-inherit"),c=e("yeast"),u=e("debug")("engine.io-client:websocket"),l=n.WebSocket||n.MozWebSocket,d=l;if(!d&&"undefined"==typeof window)try{d=e("ws")}catch(p){}t.exports=r,a(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.ws=l?new d(e):new d(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=e.length,s=0,a=i;a>s;s++)!function(e){o.encodePacket(e,r.supportsBinary,function(o){if(!l){var s={};if(e.options&&(s.compress=e.options.compress),r.perMessageDeflate){var a="string"==typeof o?n.Buffer.byteLength(o):o.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{l?r.ws.send(o):r.ws.send(o,s)}catch(c){u("websocket closed before onclose event")}--i||t()})}(e[s])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e);var r=-1!==this.hostname.indexOf(":");return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===r.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(e,t,n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":22}],11:[function(e,t,n){function r(e,t,n){function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}var o=!1;return n=n||i,r.count=e,0===e?t():r}function i(){}t.exports=r},{}],12:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(0>t&&(t+=r),0>n&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;n>s;s++,a++)o[a]=i[s];return o.buffer}},{}],13:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;i>n;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,r,i,o,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),d=new Uint8Array(l);for(n=0;c>n;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[u++]=r<<2|i>>4,d[u++]=(15&i)<<4|o>>2,d[u++]=(3&o)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new o;n(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),c=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return s?a?e.Blob:i:c?r:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],15:[function(e,t,n){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],17:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=o,n.formatArgs=i,n.save=s,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":18}],18:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var c=i.log||n.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,l=0},{ms:25}],19:[function(e,t,n){(function(t){function r(e,t){var r="b"+n.packets[e.type]+e.data.data;return t(r)}function i(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=v[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}function o(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,r)},i.readAsArrayBuffer(e.data)}function s(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(g)return o(e,t,r);var i=new Uint8Array(1);i[0]=v[e.type];var s=new w([i.buffer,e.data]);return r(s)}function a(e,t,n){for(var r=new Array(e.length),i=p(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},s=0;s<e.length;s++)o(s,e[s],i)}var c=e("./keys"),u=e("has-binary"),l=e("arraybuffer.slice"),d=e("base64-arraybuffer"),p=e("after"),f=e("utf8"),h=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),g=h||m;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=c(v),b={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return i(e,n,a);if(w&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var u=v[e.type];return void 0!==e.data&&(u+=o?f.encode(String(e.data)):String(e.data)),a(""+u)},n.encodeBase64Packet=function(e,r){var i="b"+n.packets[e.type];if(w&&e.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var c=new Uint8Array(e.data),u=new Array(c.length),l=0;l<c.length;l++)u[l]=c[l];s=String.fromCharCode.apply(null,u)}return i+=t.btoa(s),r(i)},n.decodePacket=function(e,t,r){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r)try{e=f.decode(e)}catch(i){return b}var o=e.charAt(0);return Number(o)==o&&y[o]?e.length>1?{type:y[o],data:e.substring(1)}:{type:y[o]}:b}var s=new Uint8Array(e),o=s[0],a=l(e,1);return w&&"blob"===t&&(a=new w([a])),{type:y[o],data:a}},n.decodeBase64Packet=function(e,n){var r=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:r,data:{base64:!0,data:e.substr(1)}};var i=d.decode(e.substr(1));return"blob"===n&&w&&(i=new w([i])),{type:r,data:i}},n.encodePayload=function(e,t,r){function i(e){return e.length+":"+e}function o(e,r){n.encodePacket(e,s?t:!1,!0,function(e){r(null,i(e))})}"function"==typeof t&&(r=t,t=null);var s=u(e);return t&&s?w&&!g?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void a(e,o,function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);"function"==typeof t&&(r=t,t=null);var i;if(""==e)return r(b,0,1);for(var o,s,a="",c=0,u=e.length;u>c;c++){var l=e.charAt(c);if(":"!=l)a+=l;else{if(""==a||a!=(o=Number(a)))return r(b,0,1);if(s=e.substr(c+1,o),a!=s.length)return r(b,0,1);if(s.length){if(i=n.decodePacket(s,t,!0),b.type==i.type&&b.data==i.data)return r(b,0,1);var d=r(i,c+o,u);if(!1===d)return}c+=o,a=""}}return""!=a?r(b,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void a(e,r,function(e,n){var r=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}t?i[o++]=0:i[o++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),t(i.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,w){var c=new w([n.buffer,a.buffer,e]);t(null,c)}})}a(e,r,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var i=e,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",d=1;255!=a[d];d++){if(u.length>310){s=!0;break}u+=a[d]}if(s)return r(b,0,1);i=l(i,2+u.length),u=parseInt(u);var p=l(i,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(f){var h=new Uint8Array(p);p="";for(var d=0;d<h.length;d++)p+=String.fromCharCode(h[d])}o.push(p),i=l(i,u)}var m=o.length;o.forEach(function(e,i){r(n.decodePacket(e,t,!0),i,m)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],21:[function(e,t,n){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:24}],22:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(r){t.exports=!1}},{}],23:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],24:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],25:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=c?Math.round(e/c)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,l,"day")||s(e,u,"hour")||s(e,c,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,c=60*a,u=60*c,l=24*u,d=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):i(e)}},{}],26:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],27:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;i>r;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],28:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=r.exec(e||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],29:[function(t,n,r){(function(t){!function(i){function o(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function s(e){for(var t,n=e.length,r=-1,i="";++r<n;)t=e[r],t>65535&&(t-=65536,i+=w(t>>>10&1023|55296),t=56320|1023&t),i+=w(t);return i}function a(e){if(e>=55296&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function c(e,t){return w(e>>t&63|128)}function u(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(a(e),t=w(e>>12&15|224),t+=c(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=c(e,12),t+=c(e,6)),t+=w(63&e|128)}function l(e){for(var t,n=o(e),r=n.length,i=-1,s="";++i<r;)t=n[i],s+=u(t);return s}function d(){if(b>=y)throw Error("Invalid byte index");var e=255&v[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,n,r,i;if(b>y)throw Error("Invalid byte index");if(b==y)return!1;if(e=255&v[b],b++,0==(128&e))return e;if(192==(224&e)){var t=d();if(i=(31&e)<<6|t,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),i=(15&e)<<12|t<<6|n,i>=2048)return a(i),i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),r=d(),i=(15&e)<<18|t<<12|n<<6|r,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function f(e){v=o(e),y=v.length,b=0;for(var t,n=[];(t=p())!==!1;)n.push(t);return s(n)}var h="object"==typeof r&&r,m="object"==typeof n&&n&&n.exports==h&&n,g="object"==typeof t&&t;(g.global===g||g.window===g)&&(i=g);var v,y,b,w=String.fromCharCode,S={version:"2.0.0",encode:l,decode:f};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return S});else if(h&&!h.nodeType)if(m)m.exports=S;else{var T={},C=T.hasOwnProperty;for(var x in S)C.call(S,x)&&(h[x]=S[x])}else i.utf8=S}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],30:[function(e,t,n){"use strict";function r(e){var t="";do t=a[e%c]+t,e=Math.floor(e/c);while(e>0);return t}function i(e){var t=0;for(d=0;d<e.length;d++)t=t*c+u[e.charAt(d)];return t}function o(){var e=r(+new Date);return e!==s?(l=0,s=e):e+"."+r(l++)}for(var s,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),c=64,u={},l=0,d=0;c>d;d++)u[a[d]]=d;o.encode=r,o.decode=i,t.exports=o},{}],31:[function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=i(e),o=r.source,u=r.id,l=r.path,d=c[u]&&l in c[u].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||d;return p?(a("ignoring socket cache for %s",o),n=s(o,t)):(c[u]||(a("new io instance for %s",o),c[u]=s(o,t)),n=c[u]),n.socket(r.path)}var i=e("./url"),o=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=n=r;var c=n.managers={};n.protocol=o.protocol,n.connect=r,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(e,t,n){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var i=e("engine.io-client"),o=e("./socket"),s=e("component-emitter"),a=e("socket.io-parser"),c=e("./on"),u=e("component-bind"),l=e("debug")("socket.io-client:manager"),d=e("indexof"),p=e("backo2"),f=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},s(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=c(t,"open",function(){n.onopen(),e&&e()}),o=c(t,"error",function(t){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;l("connect attempt will timeout after %d",s);var a=setTimeout(function(){l("connect attempt timed out after %d",s),r.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(o),this},r.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",u(this,"ondata"))),this.subs.push(c(e,"ping",u(this,"onping"))),this.subs.push(c(e,"pong",u(this,"onpong"))),this.subs.push(c(e,"error",u(this,"onerror"))),this.subs.push(c(e,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){function t(){~d(r.connecting,n)||r.connecting.push(n)}var n=this.nsps[e];if(!n){n=new o(this,e),this.nsps[e]=n;var r=this;n.on("connecting",t),n.on("connect",function(){n.id=r.engine.id}),this.autoConnect&&t()}return n},r.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},r.prototype.packet=function(e){l("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){l("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(e,t,n){function r(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=r},{}],34:[function(e,t,n){function r(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var i=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:socket"),l=e("has-binary");t.exports=n=r;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",c(this,"onopen")),a(e,"packet",c(this,"onpacket")),a(e,"close",c(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=s(arguments),n=i.EVENT;l(t)&&(n=i.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},r.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:
    this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);u("sending ack %j",r);var o=l(r)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(e,t,n){(function(n){function r(e,t){var r=e,t=t||n.location;null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=-1!==r.host.indexOf(":"),a=s?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(t&&t.port==r.port?"":":"+r.port),r}var i=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:39,parseuri:45}],36:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],37:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],38:[function(e,t,n){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],39:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./debug":40,dup:17}],40:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,ms:44}],41:[function(e,t,n){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:43}],42:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],43:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],44:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],45:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{dup:28}],46:[function(e,t,n){(function(t){var r=e("isarray"),i=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var c in e)s[c]=t(e[c]);return s}return e}var n=[],o=e.data,s=e;return s.data=t(o),s.attachments=n.length,{packet:s,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var i=t[e.num];return i}if(r(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=n(e[s]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,c,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var l=new FileReader;l.onload=function(){u?u[c]=this.result:a=this.result,--s||n(a)},l.readAsArrayBuffer(e)}else if(r(e))for(var d=0;d<e.length;d++)o(e[d],d,e);else if(e&&"object"==typeof e&&!i(e))for(var p in e)o(e[p],p,e)}var s=0,a=e;o(a),s||n(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(e,t,n){function r(){}function i(e){var t="",r=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=d.stringify(e.data)),l("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=f.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}f.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return u();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var i="";"-"!=e.charAt(++r)&&(i+=e.charAt(r),r!=e.length););if(i!=Number(i)||"-"!=e.charAt(r))throw new Error("Illegal attachments");t.attachments=Number(i)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(t.nsp+=o,r==e.length)break}else t.nsp="/";var s=e.charAt(r+1);if(""!==s&&Number(s)==s){for(t.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(t.id+=e.charAt(r),r==e.length)break}t.id=Number(t.id)}if(e.charAt(++r))try{t.data=d.parse(e.substr(r))}catch(a){return u()}return l("decoded %s as %j",e,t),t}function c(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:n.ERROR,data:"parser error"}}var l=e("debug")("socket.io-parser"),d=e("json3"),p=(e("isarray"),e("component-emitter")),f=e("./binary"),h=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=s,r.prototype.encode=function(e,t){if(l("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var r=i(e);t([r])}},p(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new c(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!h(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],49:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],50:[function(t,n,r){(function(t){(function(){function i(e,t){function n(e){if(n[e]!==g)return n[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=n("json-stringify")&&n("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,l="function"==typeof c&&b;if(l){(s=function(){return 1}).toJSON=s;try{l="0"===c(0)&&"0"===c(new r)&&'""'==c(new o)&&c(y)===g&&c(g)===g&&c()===g&&"1"===c(s)&&"[1]"==c([s])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,y,null])&&c({a:[s,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===c(null,s)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(d){l=!1}}i=l}if("json-parse"==e){var p=t.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){s=p(a);var f=5==s.a.length&&1===s.a[0];if(f){try{f=!p('"	"')}catch(d){}if(f)try{f=1!==p("01")}catch(d){}if(f)try{f=1!==p("1.")}catch(d){}}}}catch(d){f=!1}i=f}}return n[e]=!!i}e||(e=c.Object()),t||(t=c.Object());var r=e.Number||c.Number,o=e.String||c.String,a=e.Object||c.Object,u=e.Date||c.Date,l=e.SyntaxError||c.SyntaxError,d=e.TypeError||c.TypeError,p=e.Math||c.Math,f=e.JSON||c.JSON;"object"==typeof f&&f&&(t.stringify=f.stringify,t.parse=f.parse);var h,m,g,v=a.prototype,y=v.toString,b=new u(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(w){}if(!n("json")){var S="[object Function]",T="[object Date]",C="[object Number]",x="[object String]",k="[object Array]",D="[object Boolean]",I=n("bug-string-char-index");if(!b)var E=p.floor,P=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return P[t]+365*(e-1970)+E((e-1969+(t=+(t>1)))/4)-E((e-1901+t)/100)+E((e-1601+t)/400)};if((h=v.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)h.call(r,i)&&o++;return n=r=null,o?m=2==o?function(e,t){var n,r={},i=y.call(e)==S;for(n in e)i&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,i=y.call(e)==S;for(n in e)i&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,i,o=y.call(e)==S,a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)o&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var R={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O="000000",N=function(e,t){return(O+(t||0)).slice(-e)},U="\\u00",j=function(e){for(var t='"',n=0,r=e.length,i=!I||r>10,o=i&&(I?e.split(""):e);r>n;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=R[s];break;default:if(32>s){t+=U+N(2,s.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},L=function(e,t,n,r,i,o,s){var a,c,u,l,p,f,v,b,w,S,I,P,R,O,U,M;try{a=t[e]}catch(_){}if("object"==typeof a&&a)if(c=y.call(a),c!=T||h.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=C&&c!=x&&c!=k||h.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(A){for(p=E(a/864e5),u=E(p/365.2425)+1970-1;A(u+1,0)<=p;u++);for(l=E((p-A(u,0))/30.42);A(u,l+1)<=p;l++);p=1+p-A(u,l),f=(a%864e5+864e5)%864e5,v=E(f/36e5)%24,b=E(f/6e4)%60,w=E(f/1e3)%60,S=f%1e3}else u=a.getUTCFullYear(),l=a.getUTCMonth(),p=a.getUTCDate(),v=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(0>=u||u>=1e4?(0>u?"-":"+")+N(6,0>u?-u:u):N(4,u))+"-"+N(2,l+1)+"-"+N(2,p)+"T"+N(2,v)+":"+N(2,b)+":"+N(2,w)+"."+N(3,S)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if(c=y.call(a),c==D)return""+a;if(c==C)return a>-1/0&&1/0>a?""+a:"null";if(c==x)return j(""+a);if("object"==typeof a){for(O=s.length;O--;)if(s[O]===a)throw d();if(s.push(a),I=[],U=o,o+=i,c==k){for(R=0,O=a.length;O>R;R++)P=L(R,a,n,r,i,o,s),I.push(P===g?"null":P);M=I.length?i?"[\n"+o+I.join(",\n"+o)+"\n"+U+"]":"["+I.join(",")+"]":"[]"}else m(r||a,function(e){var t=L(e,a,n,r,i,o,s);t!==g&&I.push(j(e)+":"+(i?" ":"")+t)}),M=I.length?i?"{\n"+o+I.join(",\n"+o)+"\n"+U+"}":"{"+I.join(",")+"}":"{}";return s.pop(),M}};t.stringify=function(e,t,n){var r,i,o,a;if(s[typeof t]&&t)if((a=y.call(t))==S)i=t;else if(a==k){o={};for(var c,u=0,l=t.length;l>u;c=t[u++],a=y.call(c),(a==x||a==C)&&(o[c]=1));}if(n)if((a=y.call(n))==C){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==x&&(r=n.length<=10?n:n.slice(0,10));return L("",(c={},c[""]=e,c),i,o,r,"",[])}}if(!n("json-parse")){var M,_,F=o.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},$=function(){throw M=_=null,l()},q=function(){for(var e,t,n,r,i,o=_,s=o.length;s>M;)switch(i=o.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=I?o.charAt(M):o[M],M++,e;case 34:for(e="@",M++;s>M;)if(i=o.charCodeAt(M),32>i)$();else if(92==i)switch(i=o.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=B[i],M++;break;case 117:for(t=++M,n=M+4;n>M;M++)i=o.charCodeAt(M),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||$();e+=F("0x"+o.slice(t,M));break;default:$()}else{if(34==i)break;for(i=o.charCodeAt(M),t=M;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++M);e+=o.slice(t,M)}if(34==o.charCodeAt(M))return M++,e;$();default:if(t=M,45==i&&(r=!0,i=o.charCodeAt(++M)),i>=48&&57>=i){for(48==i&&(i=o.charCodeAt(M+1),i>=48&&57>=i)&&$(),r=!1;s>M&&(i=o.charCodeAt(M),i>=48&&57>=i);M++);if(46==o.charCodeAt(M)){for(n=++M;s>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==M&&$(),M=n}if(i=o.charCodeAt(M),101==i||69==i){for(i=o.charCodeAt(++M),(43==i||45==i)&&M++,n=M;s>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==M&&$(),M=n}return+o.slice(t,M)}if(r&&$(),"true"==o.slice(M,M+4))return M+=4,!0;if("false"==o.slice(M,M+5))return M+=5,!1;if("null"==o.slice(M,M+4))return M+=4,null;$()}return"$"},H=function(e){var t,n;if("$"==e&&$(),"string"==typeof e){if("@"==(I?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=q(),"]"!=e;n||(n=!0))n&&(","==e?(e=q(),"]"==e&&$()):$()),","==e&&$(),t.push(H(e));return t}if("{"==e){for(t={};e=q(),"}"!=e;n||(n=!0))n&&(","==e?(e=q(),"}"==e&&$()):$()),(","==e||"string"!=typeof e||"@"!=(I?e.charAt(0):e[0])||":"!=q())&&$(),t[e.slice(1)]=H(q());return t}$()}return e},W=function(e,t,n){var r=V(e,t,n);r===g?delete e[t]:e[t]=r},V=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(y.call(i)==k)for(r=i.length;r--;)W(i,r,n);else m(i,function(e){W(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return M=0,_=""+e,n=H(q()),"$"!=q()&&$(),M=_=null,t&&y.call(t)==S?V((r={},r[""]=n,r),"",t):n}}}return t.runInContext=i,t}var o="function"==typeof e&&e.amd,s={"function":!0,object:!0},a=s[typeof r]&&r&&!r.nodeType&&r,c=s[typeof window]&&window||this,u=a&&s[typeof n]&&n&&!n.nodeType&&"object"==typeof t&&t;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),a&&!o)i(c,a);else{var l=c.JSON,d=c.JSON3,p=!1,f=i(c,c.JSON3={noConflict:function(){return p||(p=!0,c.JSON=l,c.JSON3=d,l=d=null),f}});c.JSON={parse:f.parse,stringify:f.stringify}}o&&e(function(){return f})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],51:[function(e,t,n){function r(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}t.exports=r},{}]},{},[31])(31)}),!function(e){"use strict";var t=function(e,t){function n(){var e=(Math.random()+1).toString(36);return e.substring(2,e.length)}function r(){return window.performance.now?window.performance.now()+window.performance.timing.navigationStart:Date.now()}function i(){var e=r();return e+Je.currentOffset}function o(){return window.performance.now?window.performance.now():null}function s(){"function"==typeof navigator.getBattery&&navigator.getBattery().then(function(e){me=e})}function a(){return me?me.level:void 0}function c(){return me?me.charging:void 0}function u(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then(function(e){he=e})}function l(){Ee||window.addEventListener("beforeunload",function(e){var t;for(t in Ve)Ve.hasOwnProperty(t)&&Bt(it.userLeft,null,t,Ve[t].ucID,null,null,null);return"Are you sure you want to close the call?"})}function d(e,t){setTimeout(function(){var t=i(),n=t-e.data.apiTS;e.data.timeShift=n,ce(e.type,e.action,e.data,e.callback)},t)}function p(e,t,n,r,i){var s=Yt(n,r),a=null;s?(a=o(),Bt(it.mediaPlaybackStartEvent,t,n,e,{ssrc:i,highResTs:a},s,null)):console.error("sendMediaStartEvent: Invalid pcHash")}function f(e,t,n,r,i){var s=Yt(n,r),a=null;s?(a=o(),Bt(it.mediaSuspendedEvent,t,n,e,{ssrc:i,highResTs:a},s,null)):console.error("sendMediaSuspendedEvent: Invalid pcHash")}function h(e,t,n,r,i){var o=document.getElementById(n);if(o){var s=Ve[t].ucID;o.oncanplay=function(){p(s,e,t,r,i)},o.onsuspend=function(){f(s,e,t,r,i)}}}function m(e){var t=qe.codebase,n=!1;if(null===e)n=!1;else if(t===Ct.firefox){var r=typeof mozRTCPeerConnection,i=typeof RTCPeerConnection;"undefined"!==r&&e instanceof mozRTCPeerConnection?n=!0:"undefined"!==i&&e instanceof RTCPeerConnection&&(n=!0)}else null!==nt&&e instanceof nt&&(n=!0),("function"==typeof e||t===Ct.edge)&&(n=!0);return n}function g(e,t){var n;return e&&(t===Ct.chrome?(n=e.googLocalAddress,n.concat(":",e.googRemoteAddress)):t===Ct.firefox&&(n=e.localAddr,n.concat(":",e.remoteAddr))),zt(n)}function v(){var e;return e=navigator.onLine===!0?"online":"offline"}function y(e,t){var n=xt.unknown,r=null;if(t===Ct.chrome)void 0!==e&&(void 0!==e.data.googFrameRateReceived||void 0!==e.data.googFrameRateSent?n=xt.video:(void 0!==e.data.audioInputLevel||void 0!==e.data.audioOutputLevel)&&(n=xt.audio),r=e.data.googCodecName);else{if(t!==Ct.firefox)return;void 0!==e&&(void 0!==e.data.mediaType?n=e.data.mediaType:void 0!==e.data.framerateMean&&(n=xt.video))}return Ke.hasOwnProperty(e.data.ssrc)&&(Ke[e.data.ssrc].mediaType=n,Ke[e.data.ssrc].codec=r),n}function b(e,t){var n;return t===Ct.chrome?void 0!==e.data.googFrameRateOutput?n=parseInt(e.data.googFrameRateOutput,10):void 0!==e.data.googFrameRateDecoded?n=parseInt(e.data.googFrameRateDecoded,10):void 0!==e.data.googFrameRateReceived?n=parseInt(e.data.googFrameRateReceived,10):void 0!==e.data.googFrameRateSent&&(n=parseInt(e.data.googFrameRateSent,10)):t===Ct.firefox&&void 0!==e.data.framerateMean&&(n=parseInt(e.data.framerateMean,10)),void 0!==n&&(n=isNaN(n)||0>n?null:n),n}function w(e,t){var n="unavailable";if(t===Ct.chrome){var r,i,o;r=b(e,t),void 0!==e.data.googFrameWidthReceived?o=e.data.googFrameWidthReceived:void 0!==e.data.googFrameWidthSent&&(o=e.data.googFrameWidthSent),void 0!==e.data.googFrameHeightReceived?i=e.data.googFrameHeightReceived:void 0!==e.data.googFrameHeightSent&&(i=e.data.googFrameHeightSent),void 0!==r&&void 0!==o&&void 0!==i&&o>0&&i>0&&(n=o.concat("x",i,"@",r))}else t===Ct.firefox;return n}function S(e,t){var n;return t===Ct.chrome?void 0!==e.data.googFrameWidthReceived?n=e.data.googFrameWidthReceived:void 0!==e.data.googFrameWidthSent&&(n=e.data.googFrameWidthSent):t===Ct.firefox,n}function T(e){var t;return t=isNaN(e)||0>e?null:e}function C(e,t){var n;if(t===Ct.chrome){if(void 0!==e&&void 0!==e.data.googRtt)return n=T(parseInt(e.data.googRtt,10))}else if(t===Ct.firefox){if(void 0!==e&&void 0!==e.data.mozRtt)return n=T(parseInt(e.data.mozRtt,10))}else if(t===Ct.edge&&e&&e.data.roundTripTime)return n=T(parseInt(e.data.roundTripTime,10))}function x(e){var t=isNaN(e)?null:e;return t}function k(e,t){var n;if(t===Ct.chrome){if(void 0!==e&&void 0!==e.data.googJitterReceived)return n=x(parseInt(e.data.googJitterReceived,10)),n&&(n/=1e3),n}else if(t===Ct.firefox&&void 0!==e&&void 0!==e.data.jitter)return n=x(parseInt(e.data.jitter,10))}function D(e,t){if(t.sort(),t.length>0){var n=e/100*t.length;n=Math.ceil(n);var r=t[n-1];return r}}function I(e,t,n){var r;return t===xt.audio?e<n.audio.gThreshold?r=ft.excellent:e>n.audio.gThreshold&&e<n.audio.rThreshold?r=ft.fair:e>n.audio.rThreshold&&(r=ft.bad):t===xt.video&&(e<n.video.gThreshold?r=ft.excellent:e>n.video.gThreshold&&e<n.video.rThreshold?r=ft.fair:e>n.video.rThreshold&&(r=ft.bad)),r}function E(e,t,n){var r;return t===xt.audio?e>n.audio.gThreshold?r=ft.excellent:e>n.audio.rThreshold&&e<n.audio.gThreshold?r=ft.fair:e<n.audio.rThreshold&&(r=ft.bad):t===xt.video&&(e>n.video.gThreshold?r=ft.excellent:e>n.video.rThreshold&&e<n.video.gThreshold?r=ft.fair:e<n.video.rThreshold&&(r=ft.bad)),r}function P(){var e,t,n=0,r=0;for(e=0;e<arguments.length;e++)void 0!==arguments[e]&&null!==arguments[e]&&(n+=arguments[e],r++);return r>0&&(n/=r,n=Math.floor(n),n===ft.excellent?t=ht.excellent:n===ft.fair?t=ht.fair:n===ft.bad&&(t=ht.bad)),t}function A(e,t,n){var r,i,o,s,a,c,u,l,d,p=[];if(void 0!==e.lastStatsSent&&void 0!==e.lastStatsSent.statistics.Transport)for(o=e.lastStatsSent.statistics.Transport,s=e.latestEventSent,a=void 0,r=0;r<t.length;r++){for(l={},a=void 0,i=0;i<o.length;i++)if(t[r].hash===o[i].hash){a=o[i];break}void 0!==a&&(c=parseInt(a.bytesReceived,10),u=parseInt(a.bytesSent,10),l.hash=t[r].hash,d=n-s,d>0&&(l.receivedBwKbps=8*(parseInt(t[r].bytesReceived,10)-c)/d,l.sentBwKbps=8*(parseInt(t[r].bytesSent,10)-u)/d,void 0!==a.packetsSent&&void 0!==t[r].packetsSent&&(l.sentPacketRate=(parseInt(t[r].packetsSent,10)-parseInt(a.packetsSent,10))/(d/1e3)),void 0!==a.packetsReceived&&void 0!==t[r].packetsReceived&&(l.receivedPacketRate=(parseInt(t[r].packetsReceived,10)-parseInt(a.packetsReceived,10))/(d/1e3))),l.rtt=t[r].googRtt,p.push(l))}return p}function R(e,t,n,r){var i=[];return n===Ct.firefox?i=null:n===Ct.chrome&&(i=A(e,t,r)),i}function O(e){if(e=x(e),null!==e){var t=0>e?null:e;return t}}function N(e,t,n,r,i,o,s){return void 0===e[n]&&(e[n]={}),void 0===e[n].streams&&(e[n].streams={}),void 0===e[n].streams[t]&&(e[n].streams[t]={}),void 0===e[n].streams[t][i]&&(e[n].streams[t][i]={}),void 0===e[n].streams[t][i][r]&&(e[n].streams[t][i][r]={}),void 0===e[n].streams[t][i][r].totalTimeMs&&(s?e[n].streams[t][i][r][o]=[]:e[n].streams[t][i][r][o]=0),e}function U(e,t,n,r,i,o,s){var a,c,u,l,d,p,f,h,m,g,v,T,k,A,R,U,j,M,_,F,B,$,q=null,H=null,W=null,V=t.reportType,z=null,J=null,G=null,X=null,K=null,Q=null,Y=null,Z=null,ee=null,te=t.data,ne=L(n.streams,t.ssrc,"outbound",V);ne?(a=x(parseInt(ne.data.bytesSent,10)),c=e.lastStatsSent.apiTS,R=x(parseInt(ne.data.packetsSent,10)),j=x(parseInt(ne.data.packetsLost,10)),M=x(parseInt(ne.data.discardedPackets,10))):(a=0,c=i,j=0,R=0,M=0),l=i,T=l-c,p=y(t,r),f=w(t,r),h=b(t,r),m=S(t,r),d=C(t,r),u=x(parseInt(te.bytesSent,10)),null!==u&&null!==a&&a>u&&(a=0,It(Se,Te,"log",{msg:"getstats: curBytesSent < prevBytesSent counter reset",conferenceID:o,ucID:s})),void 0!==te.droppedFrames&&(_=O(parseInt(te.droppedFrames,10)),null!==_&&null!==M&&M>_&&(M=0),null!==_&&null!==M&&(F=_-M)),U=O(parseInt(te.packetsLost,10)),null!==U&&null!==j&&(H=U-j),A=O(parseInt(te.packetsSent,10)),null!==A&&null!==R&&(k=A-R),void 0!==H&&void 0!==k&&k+H>0&&(W=H/(k+H)),T>0&&(null!==u&&null!==a&&(q=8*(u-a)/T),void 0!==k&&(ee=k/(T/1e3)));var re=t.ssrc;e=N(e,re,"rttInfo",V,"outbound","rttArray",!0),e=N(e,re,"fractionalLossInfo",V,"outbound","fractionalLossArray",!0),e=N(e,re,"timeElapse",V,"outbound","totalTimeMs",!1),e=N(e,re,"frameWidthInfo",V,"outbound","frameWidthArray",!0),e=N(e,re,"frameRateInfo",V,"outbound","frameRateArray",!0),void 0!==d&&null!==d&&e.rttInfo.streams[re].outbound[V].rttArray.push(parseInt(d,10)),void 0!==W&&null!==W&&e.fractionalLossInfo.streams[re].outbound[V].fractionalLossArray.push(W),void 0!==h&&null!==h&&e.frameRateInfo.streams[re].outbound[V].frameRateArray.push(parseInt(h,10)),void 0!==m&&null!==m&&e.frameWidthInfo.streams[re].outbound[V].frameWidthArray.push(parseInt(m,10)),z=D(95,e.rttInfo.streams[re].outbound[V].rttArray),X=D(95,e.fractionalLossInfo.streams[re].outbound[V].fractionalLossArray),null!==u&&null!==a&&u>a&&(e.timeElapse.streams[re].outbound[V].totalTimeMs=e.timeElapse.streams[re].outbound[V].totalTimeMs+T),e.timeElapse.streams[re].outbound[V].totalTimeMs>0&&null!==u&&(Z=8*u/e.timeElapse.streams[re].outbound[V].totalTimeMs);var ie={csioIntMs:T,csioIntFL:W,csioIntPR:ee,csioIntBRKbps:q,csioMediaType:p,csioSig2Latency:z,csioAvgBRKbps:Z,csioTimeElapseMs:e.timeElapse.streams[re].outbound[V].totalTimeMs,csioRes:f,csioPercentileFl:X,csioIntFramesDropped:F};for(B in te)te.hasOwnProperty(B)&&(ie[B]=te[B]);return p===xt.audio?($=z+40,J=I($,p,Tt),G=E(q,p,yt),g=P(J,G),ie.csioMark=g,ie.csioeM=$):p===xt.video&&(ie.csioPercentileFrameWidth=D(95,e.frameWidthInfo.streams[re].outbound[V].frameWidthArray),ie.csioPercentileFrameRate=D(95,e.frameRateInfo.streams[re].outbound[V].frameRateArray),v=parseInt(e.rttInfo.streams[re].outbound[V].frameRate,10),K=E(h/v,p,bt),Q=I(d,p,wt),Y=E(q,p,yt),g=P(K,Q,Y),e.rttInfo.streams[re].outbound[V].frameRate=h,ie.csioMark=g),ie}function j(e,t,n,r,i,o,s){var a,c,u,l,d,p,f,h,m,g,v,T,A,R,U,j,M,_,F,B,$,q,H,W,V,z,J=null,G=null,X=t.reportType,K=null,Q=null,Y=null,Z=null,ee=null,te=null,ne=null,re=null,ie=null,oe=t.data,se=L(n.streams,t.ssrc,"inbound",X);se?(a=x(parseInt(se.data.bytesReceived,10)),d=x(parseInt(se.data.packetsLost,10)),B=x(parseInt(se.data.packetsReceived,10)),c=e.lastStatsSent.apiTS,q=x(parseInt(se.data.discardedPackets,10))):(a=0,c=i,d=0,B=0,q=0),h=y(t,r),m=w(t,r),v=b(t,r),g=k(t,r),z=S(t,r),f=C(t,r),u=x(parseInt(oe.bytesReceived,10)),null!==u&&null!==a&&a>u&&(a=0,d=0,B=0,It(Se,Te,"log",{msg:"getstats: curBytesReceived < prevBytesReceived counter reset",conferenceID:o,ucID:s})),p=O(parseInt(oe.packetsLost,10)),null!==p&&null!==d&&(G=p-d),l=i,void 0!==oe.discardedPackets&&($=O(parseInt(oe.discardedPackets,10)),null!==$&&null!==q&&q>$&&(q=0),null!==$&&null!==q&&(H=$-q)),F=O(parseInt(oe.packetsReceived,10)),T=F-B,void 0!==G&&null!==T&&T+G>0&&(Q=G/(T+G)),_=l-c,_>0&&(null!==u&&null!==a&&(J=8*(u-a)/_),null!==T&&(K=T/(_/1e3)));var ae=t.ssrc;e=N(e,ae,"rttInfo",X,"inbound","rttArray",!0),e=N(e,ae,"timeElapse",X,"inbound","totalTimeMs",!1),e=N(e,ae,"jitterInfo",X,"inbound","jitterArray",!0),e=N(e,ae,"fractionalLossInfo",X,"inbound","fractionalLossArray",!0),e=N(e,ae,"frameWidthInfo",X,"inbound","frameWidthArray",!0),e=N(e,ae,"frameRateInfo",X,"inbound","frameRateArray",!0),void 0!==f&&null!==f&&e.rttInfo.streams[ae].inbound[X].rttArray.push(parseInt(f,10)),void 0!==g&&null!==g&&e.jitterInfo.streams[ae].inbound[X].jitterArray.push(parseInt(g,10)),void 0!==Q&&null!==Q&&e.fractionalLossInfo.streams[ae].inbound[X].fractionalLossArray.push(Q),void 0!==v&&null!==v&&e.frameRateInfo.streams[ae].inbound[X].frameRateArray.push(parseInt(v,10)),void 0!==z&&null!==z&&e.frameWidthInfo.streams[ae].inbound[X].frameWidthArray.push(parseInt(z,10)),Y=D(95,e.rttInfo.streams[ae].inbound[X].rttArray),Z=D(95,e.jitterInfo.streams[ae].inbound[X].jitterArray),ee=D(95,e.fractionalLossInfo.streams[ae].inbound[X].fractionalLossArray),null!==u&&null!==a&&u>a&&(e.timeElapse.streams[ae].inbound[X].totalTimeMs=e.timeElapse.streams[ae].inbound[X].totalTimeMs+_),null!==u&&e.timeElapse.streams[ae].inbound[X].totalTimeMs>0&&(ie=8*u/e.timeElapse.streams[ae].inbound[X].totalTimeMs);var ce={csioIntMs:_,csioIntFL:Q,csioIntPR:K,csioIntBRKbps:J,csioSig2Latency:Y,csioAvgBRKbps:ie,csioMediaType:h,csioTimeElapseMs:e.timeElapse.streams[ae].inbound[X].totalTimeMs,csioIntPktRcv:T,csioIntPktLoss:G,csioPercentileJitter:Z,csioRes:m,csioPercentileFl:ee,csioIntPktDiscarded:H};for(W in oe)oe.hasOwnProperty(W)&&(ce[W]=oe[W]);return h===xt.audio?(V=Y+40,te=I(V,h,Tt),ne=I(Q,h,St),re=E(J,h,yt),A=P(te,ne,re),ce.csioMark=A,ce.csioeM=V):h===xt.video&&(ce.csioPercentileFrameRate=D(95,e.frameRateInfo.streams[ae].inbound[X].frameRateArray),ce.csioPercentileFrameWidth=D(95,e.frameWidthInfo.streams[ae].inbound[X].frameWidthArray),R=e.rttInfo.streams[ae].inbound[X].frameRate,U=E(v/R,h,bt),j=I(f,h,wt),M=E(J,h,yt),A=P(U,j,M),e.rttInfo.streams[ae].inbound[X].frameRate=v,ce.csioMark=A),ce}function L(e,t,n,r){var i=e.filter(function(e){return e.ssrc===t&&e.streamType===n&&e.reportType===r});return i.length>0?i[0]:null}function M(e,t,n,r,i,o){var s={streams:[]};s.fabricState=e.pcState,s.connectionState=v();var a=null;return a=e.lastStatsSent?e.lastStatsSent.statistics:{streams:[]},t.streams.forEach(function(t){var c={cname:t.cname,usage:t.usage,msid:t.msid,userID:t.userID,associatedVideoTag:t.associatedVideoTag,ssrc:t.ssrc,streamType:t.streamType,reportType:t.reportType};"inbound"===t.streamType?c.data=j(e,t,a,n,r,i,o):c.data=U(e,t,a,n,r,i,o),s.streams.push(c)}),s}function _(e){var t,n,r;for(t in e.streams)if(e.streams.hasOwnProperty(t)){if(e.streams[t].inbound)for(r in e.streams[t].inbound)e.streams[t].inbound.hasOwnProperty(r)&&(n=e.streams[t].inbound[r].mark,n===ht.bad?e.streams[t].inbound[r].mark=2:n===ht.fair?e.streams[t].inbound[r].mark=1:e.streams[t].inbound[r].mark=0);if(e.streams[t].outbound)for(r in e.streams[t].outbound)e.streams[t].outbound.hasOwnProperty(r)&&(n=e.streams[t].outbound[r].mark,n===ht.bad?e.streams[t].outbound[r].mark=2:n===ht.fair?e.streams[t].outbound[r].mark=1:e.streams[t].outbound[r].mark=0)}return e}function F(e,t,n){var r,i,o;for(r=0;r<e.length;r++)i=t[e[r].localCandidateId],o=n[e[r].remoteCandidateId],e[r].localAddr=i.ipAddress+":"+i.portNumber,e[r].remoteAddr=o.ipAddress+":"+o.portNumber,e[r].localAddrType=i.candidateType,e[r].remoteAddrType=o.candidateType,
    e[r].transportType=i.transport;return e}function B(e){var t={};return e.connectionState&&(t.connectionState=e.connectionState),e.fabricState&&(t.fabricState=e.fabricState),Ie&&(t.conferenceURL=Ie),t.streams={},e.streams.forEach(function(e){var n={cname:e.cname,ssrc:e.ssrc,msid:e.msid,remoteUserID:e.userID,usageLabel:e.usage,associatedVideoTag:e.associatedVideoTag};"inbound"===e.streamType?(e.data.hasOwnProperty("csioIntFL")&&(n.fractionLoss=e.data.csioIntFL),e.data.hasOwnProperty("csioIntBRKbps")&&(n.bitrate=e.data.csioIntBRKbps),e.data.hasOwnProperty("csioMark")&&(n.quality=e.data.csioMark),e.data.hasOwnProperty("csioMediaType")&&(n.mediaType=e.data.csioMediaType),e.data.hasOwnProperty("googRtt")&&(n.rtt=e.data.googRtt),e.data.hasOwnProperty("mozRtt")&&(n.rtt=e.data.mozRtt),e.data.hasOwnProperty("roundTripTime")&&(n.rtt=e.data.roundTripTime),e.data.hasOwnProperty("jitter")&&(n.jitter=e.data.jitter),e.data.hasOwnProperty("googJitterReceived")&&(n.jitter=e.data.googJitterReceived),e.data.hasOwnProperty("audioOutputLevel")&&(n.audioOutputLevel=e.data.audioOutputLevel),e.data.hasOwnProperty("audioInputLevel")&&(n.audioInputLevel=e.data.audioInputLevel)):(e.data.hasOwnProperty("csioIntFL")&&(n.fractionLoss=e.data.csioIntFL),e.data.hasOwnProperty("csioIntBRKbps")&&(n.bitrate=e.data.csioIntBRKbps),e.data.hasOwnProperty("csioMark")&&(n.quality=e.data.csioMark),e.data.hasOwnProperty("csioMediaType")&&(n.mediaType=e.data.csioMediaType),e.data.hasOwnProperty("googRtt")&&(n.rtt=e.data.googRtt),e.data.hasOwnProperty("mozRtt")&&(n.rtt=e.data.mozRtt),e.data.hasOwnProperty("roundTripTime")&&(n.rtt=e.data.roundTripTime),e.data.hasOwnProperty("jitter")&&(n.jitter=e.data.jitter),e.data.hasOwnProperty("googJitterReceived")&&(n.jitter=e.data.googJitterReceived),e.data.hasOwnProperty("audioInputLevel")&&(n.audioInputLevel=e.data.audioInputLevel),e.data.hasOwnProperty("audioOutputLevel")&&(n.audioOutputLevel=e.data.audioOutputLevel)),t.streams[e.ssrc]=n}),t}function $(e,t,n,r,o,s){var a=i();e.hasOwnProperty("token")&&e.hasOwnProperty("ucID")&&ae()&&!Ge?(ce(ot.processedStats,rt.fabricStats,e,s),t.latestEventSent=a,t.lastFabricState=t.pcState):(e.clockUnsynced=Ge,jt({type:ot.processedStats,action:rt.fabricStats,data:e}),e.hasOwnProperty("token")||$e.sendAuthenticationRequest(Se,o))}function q(e,t,n,o,s,u,l){function d(d){var p=i(),f=r();void 0===u.lastRawStatsSentInterval||null===u.lastRawStatsSentInterval?u.lastRawStatsSentInterval=f-u.statsPollingStart:u.lastRawStatsSentInterval=f-u.rawstatsTS+u.lastRawStatsSentInterval,void 0===u.lastProcessedStatsSentInterval||null===u.lastProcessedStatsSentInterval?u.lastProcessedStatsSentInterval=f-u.statsPollingStart:u.lastProcessedStatsSentInterval=f-u.rawstatsTS+u.lastProcessedStatsSentInterval,u.rawstatsTS=f;var h={},m=qe.codebase;h.version=we,h.appID=Se,h.conferenceID=encodeURIComponent(o),h.apiTS=p,h.timeShift=0,h.fabricState=u.pcState,h.pcID=u.pcHash,void 0!==s&&(h.ucID=s),$e.authToken?h.token=$e.authToken:$e.sendAuthenticationRequest(Se,t),h.localID=encodeURIComponent(t),h.remoteID=encodeURIComponent(n),h.deviceID=De;var v,y,b,w,S,T,C,x={streams:[]},k=null,D=!1,I=!1,E={},P={};for(k=tn(d),v=0;v<k.length;++v)if(y=J(k[v]),b=W(JSON.parse(y),m),!G(b))if(b.hasOwnProperty("Transport"))w="Transport",x.hasOwnProperty(w)||(x[w]=[]),m!==Ct.firefox?(parseInt(b[w].bytesReceived,10)>0||parseInt(b[w].bytesSent,10)>0)&&(x[w].push(b[w]),"true"===b[w].googActiveConnection&&(h.activeConnectionIndex=x[w].length)):(x[w].push(b[w]),"true"===b[w].selected&&(h.activeConnectionIndex=x[w].length));else if(b.hasOwnProperty("localCandidate"))E[b.localCandidate.id]=b.localCandidate;else if(b.hasOwnProperty("remoteCandidate"))P[b.remoteCandidate.id]=b.remoteCandidate;else if(b.hasOwnProperty("bwe"))x.bwe=b.bwe;else{T=Mt(b.ssrc),void 0!==T&&T.localStartTime||(C=Ft(n,o,s,u,l,null),C&&(I=!0),T=Mt(b.ssrc)),T&&(S=T.remoteUserID),void 0===S&&(S=n);var A={userID:S,data:b.data,reportType:b.reportType,streamType:b.streamType,ssrc:b.ssrc};void 0!==T&&(A.cname=T.cname,A.msid=T.msid,A.associatedVideoTag=T.associatedVideoTag,A.usage=T.usageLabel),x.streams.push(A)}m===Ct.firefox&&(x.Transport=F(x.Transport,E,P));var O;if(x.Transport)for(O=0;O<x.Transport.length;O++)x.Transport[O].hash=g(x.Transport[O],m);h.statistics=x,x.Transport&&(D=z(x.Transport,u)),D&&an(l,it.updatedConfiguration,o),u.pcState===mt.disrupted&&Q(h);var N=M(u,x,m,p,o,s);if(x.Transport&&(N.Transport=R(u,x.Transport,m,p)),x.bwe&&(N.bwe=x.bwe),void 0===u.processedStatsTupleArray&&(u.processedStatsTupleArray=[]),ge){var U=B(N);ge(U)}N.apiTS=p,N.batteryStatus={},N.batteryStatus.batteryLevel=a(),N.batteryStatus.isBatteryCharging=c(),N=_(N),u.processedStatsTupleArray.push(N),h.processedStatistics=u.processedStatsTupleArray,u.lastStatsSent=h;var j=le(h),L=le(h);delete j.processedStatistics,delete L.statistics,I&&Bt(it.ssrcMap,n,o,s,_t(),u.pcHash),(u.lastProcessedStatsSentInterval>=Re||u.initialPhaseOver)&&(u.processedStatsTupleArray=[],$(L,u,o,n,t,e),u.lastProcessedStatsSentInterval=0)}return d}function H(e){var t;return gt.hasOwnProperty(e)?e===gt.createOffer||e===gt.createAnswer||e===gt.setRemoteDescription?t=vt.negotiationFailure:e===gt.setLocalDescription?t=vt.sdpError:e===gt.addIceCandidate?t=vt.sdpError:e===gt.getUserMedia?t=vt.mediaConfigError:e===gt.iceConnectionFailure?t=vt.iceFailure:e===gt.signalingError?t=vt.signalingError:(e===gt.applicationLog||gt.applicationError)&&(t=vt.applicationLog):t=Et.invalidWebRTCFunctionName,t}function W(e,t){var n={};return t===Ct.firefox?"inboundrtp"===e.type||"outboundrtp"===e.type?(n.ssrc=e.ssrc,n.streamType="inboundrtp"===e.type?"inbound":"outbound",n.data=e,n.mediaType=e.mediaType,n.reportType="true"===e.isRemote?"remote":"local"):"candidatepair"===e.type&&e.selected?n.Transport=e:"localcandidate"===e.type?n.localCandidate=e:"remotecandidate"===e.type&&(n.remoteCandidate=e):t===Ct.chrome?"ssrc"===e.type?(n.reportType="local",e.bytesSent?n.streamType="outbound":n.streamType="inbound",n.ssrc=e.ssrc,n.data=e):"googCandidatePair"===e.type?n.Transport=e:"localcandidate"===e.type?n.localCandidate=e:"remotecandidate"===e.type?n.remoteCandidate=e:"VideoBwe"===e.type&&(n.bwe=e):t===Ct.edge&&("inbound-rtp"===e.type||"outbound-rtp"===e.type?(n.ssrc=e.ssrc,n.streamType="inbound-rtp"===e.type?"inbound":"outbound",n.data=e,n.reportType="local"):"transport"===e.type?n.Transport=e:"localcandidate"===e.type?n.localCandidate=e:"remotecandidate"===e.type&&(n.remoteCandidate=e)),n}function V(e){var t="None";switch(e){case 0:t="TURN/TLS";break;case 1:t="TURN/TCP";break;case 2:t="TURN/UDP"}return t}function z(e,t){var n,r,i,o,s,a,c,u,l=!1,d="None",p=!1,f=function(e){var t=e.typePreference>>24;return"rtp"===e.protocol&&e.address===n?(t>=0&&2>=t&&(d=V(t)),!0):!1};for(c=0;c<e.length;c++)if(u=e[c],navigator.mozGetUserMedia&&"candidatepair"===u.type&&"true"===u.selected?(p=!0,n=u.localAddr,r=u.remoteAddr,i=u.localAddrType,o=u.remoteAddrType,s=u.transportType):"googCandidatePair"===u.type&&"true"===u.googActiveConnection&&(p=!0,n=u.googLocalAddress,r=u.googRemoteAddress,i=u.googLocalCandidateType,o=u.googRemoteCandidateType,s=u.googTransportType),p){a=0===n.indexOf("["),t.iceCandidates.some(f);break}var h=t.transportData;return(void 0===h||h.localAddr!==n||h.remoteAddr!==r||h.localAddrType!==i||h.remoteAddrType!==o||h.transportType!==s)&&(t.transportData={localAddr:n,remoteAddr:r,localAddrType:i,remoteAddrType:o,transportType:s,ipv6:a,relayType:d},l=!0),l}function J(e){var t="";t+='{"Timestamp":"',t+=e.timestamp instanceof Date?e.timestamp.getTime().toString():e.timestamp,t+='",',e.type&&(t+='"type" : "'+e.type+'",');var n=0;if(e.names){var r=e.names();for(n=0;n<r.length;++n)t+='"',t+=r[n],t+='" : "',t+=e.stat(r[n]),t+='"',n+1!==r.length&&(t+=",")}else{var i=Object.keys(e).length;n=0;var o;for(o in e)e.hasOwnProperty(o)&&(n++,"timestamp"!==o&&(t+='"',t+=o,t+='" : "',t+=e[o],t+='"',i>n&&(t+=",")))}return t+="}"}function G(e){if(null===e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function X(e){return{magicKey:e,statsSubmissionInterval:Le,endpoint:We,localUserIDObject:Ce}}function K(e,t,n){var r=Ve[e];void 0===r&&(Ve[e]={},Ve[e].participants=null,n&&(Ve[e].userJoinedSent=!0),t&&(Ve[e].refreshPresence=t))}function Q(e){var t,n=e.statistics.outbound;if(void 0!==n)for(t in n)n.hasOwnProperty(t)&&(navigator.mozGetUserMedia&&n[t].data.mozRtt?n[t].data.mozRtt=0:n[t].data.googRtt&&(n[t].data.googRtt=0))}function Y(e){return clearInterval(e),null}function Z(){var e;for(e in Ve)Ve.hasOwnProperty(e)&&(Ve[e].refreshPresence=Y(Ve[e].refreshPresence),delete Ve[e].refreshPresence);pe()}function ee(){var e,t=function(e){return setInterval(function(){qt(e)},_e)};for(e in Ve)Ve.hasOwnProperty(e)&&(qt(e),Ve[e].refreshPresence=t(e));fe()}function te(e){var t=Ve[e],n=!1;return void 0!==t&&t.participants&&t.participants.length>0&&(n=!0),n}function ne(e,t){var n=Ve[e],r=[];if(void 0===n)r.push(t),Ve[e].participants=r;else{var i=n.participants;null===i?(r.push(t),n.participants=r):i.push(t)}}function re(e){var t=!1;if(!Ve[e])return{conferenceFinished:t,ucID:null};var n=Ve[e].ucID;return 0===Ve[e].participants.length&&(Y(Ve[e].refreshPresence),pe(),delete Ve[e],t=!0),{conferenceFinished:t,ucID:n}}function ie(e,t){Bt(it.userLeft,null,e,t,null,null,null),Ye=Y(Ye),pe(),Qe=Ot,Ot=null}function oe(e,t){var n=JSON.parse(window.sessionStorage.getItem("csio_ucid_data"));n||(n={}),n[e]||(n[e]={}),n[e].ucID=t,window.sessionStorage.setItem("csio_ucid_data",JSON.stringify(n)),Ie[e]=xe+Se+"/conferences/"+encodeURIComponent(e)+"/"+t+"/general"}function se(e){var t=JSON.parse(window.sessionStorage.getItem("csio_ucid_data"));return t[e]?t[e].ucID:null}function ae(){return Ne}function ce(e,t,n,i){e===ot.clockSync?ae()?(Je.syncStartTime=r(),n.syncStartTime=Je.syncStartTime,n.offsetResultsLength=Je.offsetResults.length,Oe.emit(e,JSON.stringify(n)),i&&t!==rt.fabricStats&&i(at.success,t+" sent to the backend.")):setTimeout(function(){Dn()},100):$e._isTokenValid($e.authToken,Se,Te)?Ge&&n.action!==it.userJoined&&n.action!==it.refreshPresence&&n.action!==rt.fabricSetupFailed&&n.action!==rt.applicationErrorLog||!ae()?(n.clockUnsynced=Ge,jt({type:t,action:e,data:n,callback:i})):(Oe.emit(e,JSON.stringify(n)),i&&t!==rt.fabricStats&&i(at.success,t+" sent to the backend.")):$e.sendAuthenticationRequest(Se,Te,function(r,o){r!==at.success?(r===ct.authOngoing&&(n.clockUnsynced=Ge,jt({type:t,action:e,data:n,callback:i})),i&&r!==ct.authOngoing&&i(r,o)):r===at.success&&"SDK authentication successful."===o&&(Ge&&t!==it.userJoined&&n.action!==it.refreshPresence&&n.action!==it.fabricSetupFailed||!ae()?(n.clockUnsynced=Ge,jt({type:t,action:e,data:n,callback:i})):(n.token=$e.authToken,Oe.emit(e,JSON.stringify(n)),i&&t!==rt.fabricStats&&i(at.success,t+" sent to the backend.")))})}function ue(e){e&&e(ct.authOngoing,null)}function le(e){if(null===e||"object"!=typeof e)return e;var t,n=new e.constructor;for(t in e)e.hasOwnProperty(t)&&(n[t]=le(e[t]));return n}function de(){var e={};Object.keys(Ve).forEach(function(t){var n=Ve[t];if(!n)return!0;var r,i,o={ucID:n.ucID,userJoinedSent:n.userJoinedSent},s=[];if(n.participants){var a,c=n.participants;for(r=0;r<c.length;r++)i={},a=c[r],i={pcID:a.pcHash,pcState:a.pcState,iceConnectionState:a.iceConnectionState,iceGatheringState:a.iceGatheringState,iceCandidatesNumber:a.iceCandidates.length,remoteUserID:a.remoteUserID},s.push(i)}o.participants=s,e[t]=o});var t={authStatus:$e.tokenData?!0:!1,clockSync:!Ge,stateMachine:e,pageURL:window.location.href,eventType:"warn",version:we};It(Se,Te,"stateMachine",t)}function pe(){Ze||(Ze=setInterval(function(){de()},et))}function fe(){Y(Ze),Ze=null}var he,me,ge,ve="https://collector.callstats.io:443/",ye="https://auth.callstats.io/",be="443",we="3.15.5",Se=null,Te=null,Ce=null,xe="https://dashboard.callstats.io/apps/",ke="https://dashboard.callstats.io/api-internal/v1/qmodelthresholds",De=null,Ie={},Ee=!1,Pe=!1,Ae=3e4,Re=1e4,Oe=null,Ne=!1,Ue=!1,je="collectCallStats",Le=15e3,Me=!1,_e=1e4,Fe=5e3,Be=function(){var e=this,t="urn:x-callstats:auth:errorActions",n=.9,r=300;this.authInProgress=!1,this.tokenData=null,this.authToken=null,this.tokenGenerator=function(e,t){t("Token generator not set")};var o=null,s=null,a=!1,c=window.atob,u=window.btoa,l=function(e){return u(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},d=function(e){for(var t=c(e.replace(/[ \r\n]+$/,"")),n=[],r=0;r<t.length;++r){var i=t.charCodeAt(r).toString(16);1===i.length&&(i="0"+i),n.push(i)}return n.join("")},p={};p.cryptotype=null,window.crypto&&window.crypto.subtle?(p.cryptotype="standard",p.subtlecrypto=window.crypto.subtle):window.crypto&&!window.crypto.subtle&&window.crypto.webkitSubtle?(p.cryptotype="webkit",p.subtlecrypto=window.crypto.webkitSubtle):window.msCrypto&&window.msCrypto.subtle?(p.cryptotype="ie",p.subtlecrypto=window.msCrypto.subtle):(p.subtlecrypto=null,console.info("WebCryptography API not supported in this browser.")),p.sign=function(e,t,n,r){if("HS256"!==e.alg)return r("Use header.alg=HS256");e=JSON.stringify(e),"string"!=typeof t&&(t=JSON.stringify(t));for(var i=l(e)+"."+l(t),o=new ArrayBuffer(i.length),s=new Uint8Array(o),a=i.length-1;a>=0;a--)s[a]=i.charCodeAt(a);var c=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,s=0;o>s;s++)t+=String.fromCharCode(n[s]);return i+="."+l(t),r(null,i)},u=function(e){return r(e)},d={name:"HMAC"};("ie"===p.cryptotype||"webkit"===p.cryptotype)&&(d.hash={name:"sha-256"});var f=p.subtlecrypto.sign(d,n,s);"ie"===p.cryptotype?(f.onerror=u,f.oncomplete=function(e){c(e.target.result)}):f.then(c)["catch"](u)},p.decode=function(e){try{return JSON.parse(c(e.split(".")[1]))}catch(t){return null}},p.importKey=function(e,t,n){if("webkit"===p.cryptotype)for(;e.length<32;)e+="\x00";var r={kty:"oct",k:l(e),alg:"HS256"},i={name:"HMAC",hash:{name:"SHA-256"}};if("ie"===p.cryptotype?r.extractable=!1:r.ext=!1,"webkit"===p.cryptotype&&(i=null,r.use="sig"),"ie"===p.cryptotype||"webkit"===p.cryptotype){var o=JSON.stringify(r);r=new Uint8Array(o.length);for(var s=0;s<o.length;s++)r[s]=o.charCodeAt(s)}var a=p.subtlecrypto.importKey("jwk",r,i,!1,["sign"]);"ie"===p.cryptotype?(a.onerror=n,a.oncomplete=function(e){t(e.target.result)}):a.then(t)["catch"](n)},this._isTokenValid=function(e,t,n){var r=!1;if(null===e)return!1;try{var o=p.decode(e);if(null!==o&&o.appID===t&&o.userID===encodeURIComponent(n)){var s=null;if(navigator.mozGetUserMedia){var a=o.expiry.split(" ").join("T");s=Date.parse(a)}else s=new Date(o.expiry);var c=new Date(i());s>c&&(r=!0)}return r}catch(u){}return!1},this.setupAuthToken=function(e){window.localStorage.setItem("csio_auth_data",JSON.stringify(e)),this.authToken=e,this.tokenData=p.decode(e),Le=parseInt(this.tokenData.submissionInterval,10),Me=this.tokenData.collectSDP},this.sendAuthenticationRequest=function(r,i,s){if(r&&i){if(e.authInProgress)return void ue(s);null!==o&&(clearTimeout(o),o=null),f(),e.authInProgress=!0,e.tokenGenerator(a,function(c,u){if(null!==c)return e.authInProgress=!1,void(s&&s(at.tokenGenerationError,c.toString()));var l=ye+"authenticate",d={client_id:i+"@"+Se,code:u,grant_type:"authorization_code"};xn(l,d,function(c){var u=null;e.authInProgress=!1;try{u=JSON.parse(c.response)}catch(l){}if(!u)return void(o=setTimeout(e.sendAuthenticationRequest,Fe,r,i,s));if(200===c.status){if("bearer"!==u.token_type)return void(o=setTimeout(e.sendAuthenticationRequest,Fe,r,i,s));e.setupAuthToken(u.access_token);var d=parseInt(1e3*parseInt(u.expires_in)*n);h(d,r,i,s),a=!1,s&&s(at.success,"SDK authentication successful."),ae()?(Ut(),s&&s(at.success,"WebSocket establishment successful.")):En(ve+je,function(e,t){void 0!==s&&s(e,t)})}else{if(u[t]&&u[t].length>0)return m(r,i,s,u[t]);o=setTimeout(e.sendAuthenticationRequest,Fe,r,i,s)}})})}};var f=function(){null!==s&&(clearTimeout(s),s=null)},h=function(t,n,r,i){f(),s=setTimeout(function(){e.sendAuthenticationRequest(n,r,i)},t)},m=function(e,t,n,r){if(0!==r.length){var i=r.shift();return i.action===Pt.RETRY?(h(i.params.timeout,e,t,n),m(e,t,n,r)):i.action===Pt.GET_NEW_TOKEN?(a=!0,m(e,t,n,r)):i.action===Pt.REPORT_ERROR?m(e,t,n,r):void 0}};this.appSecretTokenGenerator=function(t){var n=null,o=null,s=!1,a=null;t.indexOf(":")>-1&&(a=d(t.split(":")[0]),t=t.split(":")[1]);var c=function(e){t=null,n=e},u=function(e){s=!0,t=null};return p.importKey(t,c,u),function(t,c){if(s)return c("appsecret based token generation failed");if(!t&&null!==o)return c(null,o);if(null===n)return setTimeout(function(){e.tokenGenerator(t,c)},100);var u={userID:Te,appID:Se,exp:parseInt(i()/1e3)+r,nbf:parseInt(i()/1e3)-r};a&&(u.keyID=a),p.sign({alg:"HS256"},u,n,function(e,t){return e?c(e):(o=t,c(null,t))})}}},$e=new Be,qe=detectBrowserInfo(),He=measureAppLoadingPerformance(qe),We={type:"browser",name:qe.name,ver:qe.ver,os:qe.os,osVersion:qe.osVersion,userAgent:qe.userAgent},Ve={},ze={statsSubmissionIntervalInMS:[1e3,2e3,5e3,1e4],statsSubmissionPhaseDurationInMS:[1e4,3e4,8e4,18e4],currentActivePhaseIndex:0},Je={currentOffset:0,offsetResults:[],syncStartTime:null,syncAttempts:5,syncHandler:null,maxAllowedLatency:6e4},Ge=!0,Xe=[],Ke={},Qe=null,Ye=null,Ze=null,et=2e4,tt=100,nt=null;"Firefox"===qe.name?nt=mozRTCPeerConnection:"Chrome"===qe.name||"Opera"===qe.name?nt=webkitRTCPeerConnection:"Safari"===qe.name||"Edge"===qe.name&&(nt=window.RTCPeerConnection);var rt={fabricSetup:"fabricSetup",fabricSetupFailed:"fabricSetupFailed",fabricHold:"fabricHold",fabricResume:"fabricResume",audioMute:"audioMute",audioUnmute:"audioUnmute",videoPause:"videoPause",videoResume:"videoResume",fabricUsageEvent:"fabricUsageEvent",fabricStats:"fabricStats",fabricTerminated:"fabricTerminated",screenShareStart:"screenShareStart",screenShareStop:"screenShareStop",dominantSpeaker:"dominantSpeaker",userIDChangedEvent:"userIDChangedEvent",activeDeviceList:"activeDeviceList",applicationErrorLog:"applicationErrorLog"},it={fabricDisrupted:"fabricDisrupted",autoFabricSetup:"autoFabricSetup",autoFabricSetupFailed:"autoFabricSetupFailed",userJoined:"userJoined",userLeft:"userLeft",fabricStatsCaching:"fabricStatsCaching",updatedConfiguration:"updatedConfiguration",refreshPresence:"refreshPresence",ssrcMap:"ssrcMap",mediaPlaybackStartEvent:"mediaPlaybackStartEvent",mediaSuspendedEvent:"mediaSuspendedEvent"},ot={sdpSubmission:"sdpSubmissionEvent",rtpStats:"rtpStats",processedStats:"processedStats",callStatsEvent:"callStatsEvent",registerPresence:"registerPresence",userFeedback:"userFeedbackEvent",clockSync:"clockSync"},st={success:"success",failure:"failure"},at={httpError:"httpError",authError:"authError",wsChannelFailure:"wsChannelFailure",success:"success",csProtoError:"csProtoError",appConnectivityError:"appConnectivityError",tokenGenerationError:"tokenGenerationError",ok:"OK"},ct={authOngoing:"authOngoing"},ut={audio:"audio",video:"video",data:"data",screen:"screen",multiplex:"multiplex",unbundled:"unbundled"},lt={local:"local",remote:"remote"},dt={excellent:5,good:4,fair:3,poor:2,bad:1},pt={local:"local",remote:"remote",inbound:"inbound",outbound:"outbound"},ft={excellent:3,fair:2,bad:1},ht={excellent:"excellent",fair:"fair",bad:"bad"},mt={established:"established",initializing:"initializing",failed:"failed",disrupted:"disrupted"},gt={createOffer:"createOffer",createAnswer:"createAnswer",setLocalDescription:"setLocalDescription",setRemoteDescription:"setRemoteDescription",addIceCandidate:"addIceCandidate",getUserMedia:"getUserMedia",iceConnectionFailure:"iceConnectionFailure",signalingError:"signalingError",applicationError:"applicationError",applicationLog:"applicationLog"},vt={mediaConfigError:"MediaConfigError",negotiationFailure:"NegotiationFailure",sdpError:"SDPGenerationError",iceFailure:"IceConnectionFailure",transportFailure:"TransportFailure",signalingError:"SignalingError",applicationError:"ApplicationError",applicationLog:"ApplicationLog"},yt={video:{gThreshold:1024,rThreshold:256},audio:{gThreshold:30,rThreshold:8}},bt={video:{gThreshold:.8,rThreshold:.3}},wt={video:{gThreshold:400,rThreshold:1e3}},St={video:{gThreshold:10,rThreshold:50},audio:{gThreshold:15,rThreshold:30}},Tt={audio:{gThreshold:240,rThreshold:400}},Ct={chrome:"Chrome",firefox:"Firefox",edge:"Edge"},xt={unknown:"unknown",audio:"audio",video:"video"},kt=function(e,t){var n=null,i=null,o=null,s=new XMLHttpRequest;s&&(s.open("GET",encodeURI(e)),n=r(),s.onload=function(){i=r(),o=i-n,t(s,o)},s.send())},Dt=function(e,t,n){var r=new XMLHttpRequest;r&&(r.open("POST",encodeURI(e)),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){n(r)},r.send(t))},It=function(e,t,n,r){var i=ve+"generics",o={appID:e,userID:encodeURIComponent(t),version:we,eventType:n,data:r};Dt(i,JSON.stringify(o),function(e){200===e.status||200!==e.status})};window.addEventListener("error",function(e){if(e&&e.filename&&e.filename.indexOf("callstats")>-1){var t,n=!1,r={fileName:e.filename,line:e.lineno,col:e.colno,jsVersion:we,eventType:"error",message:e.message,pageURL:window.location.href};for(t in Ve)Ve.hasOwnProperty(t)&&(r.conferenceID=t,It(Se,Te,"onErrorLog",r),n=!0);n||It(Se,Te,"onErrorLog",r)}});var Et={invalidWebRTCFunctionName:"Invalid WebRTC function name"},Pt={RETRY:0,GET_NEW_TOKEN:1,REPORT_ERROR:2},At="fabricSetupFailed error reported by the developer",Rt="Connectivity Failure",Ot=n(),Nt=function(e,t){if(!$e.authToken)return void $e.sendAuthenticationRequest(Se,Te);if(!Ge){var n,r,o,s,a=i(),c=[],u=Math.max(Le/Xe.length,tt);for(n=0;n<Xe.length;n++)if(o=Xe[n],o.data.action!==it.userJoined){if(o.data.token=$e.authToken,e&&o.data.apiTS>=a-t||!o.data.ucID){if(s=decodeURIComponent(o.data.conferenceID),!Ve[s])continue;o.data.ucID=Ve[s].ucID}if(o.data.clockUnsynced&&(o.data.apiTS+=Je.currentOffset),o.action===rt.fabricStats&&o.data.clockUnsynced&&o.data.processedStatistics&&o.data.processedStatistics.length>0)for(r=0;r<o.data.processedStatistics.length;r++)o.data.processedStatistics[r].apiTS+=Je.currentOffset;delete o.data.clockUnsynced,d(o,u*(n+1))}else c.push(Xe[n]);Xe=c}},Ut=function(){if(!$e.authToken)return void $e.sendAuthenticationRequest(Se,Te);var e,t,n=[],r=Math.max(Le/Xe.length,tt);for(e=0;e<Xe.length;e++)t=Xe[e],t.data.action===it.userJoined||t.data.action===rt.fabricSetupFailed||t.data.action===rt.applicationErrorLog?(t.data.token=$e.authToken,t.data.clockUnsynced&&(t.data.apiTS=t.data.apiTS+Je.currentOffset),t.data.value&&(t.data.value.statsSubmissionInterval=Le),d(t,r*(e+1))):n.push(Xe[e]);Xe=n},jt=function(e){Xe.push(e)},Lt=function(e,t){var n=RegExp.prototype.test.bind(/^([a-z])=(.*)/),o=/^ssrc:(\d*) ([\w_]*):(.*)/,s=/^ssrc-group:SIM (\d*)/;e.split(/(\r\n|\r|\n)/).filter(n).forEach(function(e){var n=e[0],a=e.slice(2);if("a"===n){if(o.test(a)){var c=a.match(o),u=c[1];void 0===Ke[u]&&(Ke[u]={}),Ke[u][c[2]]=c[3],Ke[u].localStartTime=r(),Ke[u].syncedStartTime=i(),Ke[u].streamType=t}s.test(a)&&(void 0===Ke.ssrcGroup&&(Ke.ssrcGroup={},Ke.ssrcGroup[t]={}),Ke.ssrcGroup[t].simulcastGroup=a.match(/\d+/g))}})},Mt=function(e){return Ke[e]},_t=function(){return Ke},Ft=function(e,t,n,r,i,o){if(!i.localDescription||!i.remoteDescription)return!1;var s=i.localDescription.sdp,a=i.remoteDescription.sdp;if(!s||!a||s===r.localSDP&&a===r.remoteSDP)return!1;if(Lt(s,pt.outbound),Lt(a,pt.inbound),Me){var c={sdp:{}};c.sdp.localSDP=s!==r.localSDP?s:-1,c.sdp.remoteSDP=a!==r.remoteSDP?a:-1,$t(e,t,n,c,r.pcHash,o)}return r.localSDP=s,r.remoteSDP=a,!0},Bt=function(e,t,n,r,o,s,a){if(!e)return void console.error("sendEvent: Invalid eventType ");var c=i(),u={version:we,apiTS:c,action:e,localID:encodeURIComponent(Te),remoteID:encodeURIComponent(t),conferenceID:encodeURIComponent(n),timeShift:0,appID:Se,ucID:r,pcID:s,deviceID:De,value:o};return null===t&&(u.remoteID=null),null===n?void It(Se,Te,"log",{msg:"conferenceID is null in sendEvent for "+e}):void($e.authToken&&ae()&&(r&&!Ge||e===it.userJoined||e===rt.fabricSetupFailed||e===rt.applicationErrorLog||e===it.refreshPresence)?(u.token=$e.authToken,ce(ot.callStatsEvent,e,u,a)):(u.clockUnsynced=Ge,$e.authToken||$e.sendAuthenticationRequest(Se,Te),e!==it.fabricStatsCaching&&e!==it.refreshPresence&&jt({type:ot.callStatsEvent,action:ot.callStatsEvent,data:u,callback:a})))},$t=function(e,t,n,r,o,s){var a=i(),c={version:we,appID:Se,conferenceID:encodeURIComponent(t),ucID:n,apiTS:a,localID:encodeURIComponent(Te),remoteID:encodeURIComponent(e),pcID:o,deviceID:De,sdpPayload:r};$e.authToken&&ae()&&n&&!Ge?(c.token=$e.authToken,ce(ot.sdpSubmission,ot.sdpSubmission,c,s)):(c.clockUnsynced=Ge,jt({type:ot.sdpSubmission,action:ot.sdpSubmission,data:c,callback:s}),$e.authToken||$e.sendAuthenticationRequest(Se,Te))},qt=function(e){var t={ucID:Ve[e].ucID,magicKey:Ot,endpoint:We,fabricState:{},connectedDevices:he},n=Ve[e];if(he||u(),n&&n.participants){var r,i=n.participants,o=0;for(o=0;o<i.length;o++)r=i[o],t.fabricState[o]={pc:r.pcHash,userId:r.remoteUserID,pcState:r.pcState,iceConnectionState:r.pc.iceConnectionState,iceGatheringState:r.pc.iceGatheringState,iceCandidatesNumber:r.iceCandidates.length,numNegotiationNeededCalls:r.numNegotiationNeededCalls}}Ge||(t.clockSyncOffset=Je.currentOffset),Bt(it.refreshPresence,null,e,Ve[e].ucID,t,null)},Ht=function(e){var t={appID:Se,userID:encodeURIComponent(Te),version:we,endpoint:We,pagePerf:He,endpointID:De,wsID:e.io.engine.id};Se&&$e.authToken&&(t.token=$e.authToken,e.emit(ot.registerPresence,JSON.stringify(t)))},Wt=function(){var e=window.localStorage.getItem("feedback"),t=JSON.parse(window.localStorage.getItem("csio_auth_data"));if(null!==e){var n=JSON.parse(e),r=t.challenge.token===n.token?!0:!1;r||Te!==n.userID||(n.token=t.challenge.token,r=!0),r?ce(ot.userFeedback,ot.userFeedback,n):window.localStorage.removeItem("feedback")}},Vt=function(e,t){var n={};return n.status=e,t&&(n.message=t),n},zt=function(e,t){var n,r,i,o=0;for(n=0,i=e.length;i>n;n++)r=e.charCodeAt(n),o=(o<<5)-o+r,o|=0;return t&&t(o),o},Jt=function(e,t,n,i,o,s){if("function"!=typeof t){if(!(window.crypto&&(window.crypto.subtle||window.crypto.webkitSubtle)||window.msCrypto&&window.msCrypto.subtle))return i(at.tokenGenerationError,"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API"),Vt(st.failure,"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API");t=$e.appSecretTokenGenerator(t)}if(!e||!n)return console.error("initialize: Argument missing/invalid"),Vt(st.failure,"initialize: Argument missing/invalid");if($e.tokenGenerator=t,window.localStorage.getItem("csio_auth_data"))try{var a=JSON.parse(window.localStorage.getItem("csio_auth_data"));$e._isTokenValid(a,e,n)&&(i&&i(at.success,"SDK authentication successful."),$e.setupAuthToken(a),ae()||En(ve+je,i))}catch(c){}if("string"==typeof e&&(e=parseInt(e,10)),Se=e,"object"==typeof n?(Te=n.aliasName,Ce=n):Te=n,s&&(s.disableBeforeUnloadHandler===!0&&(Ee=!0),(null!==s.applicationVersion||void 0!==s.applicationVersion)&&(We.appVer=s.applicationVersion)),l(),De=window.localStorage.getItem("endpointID"),null===De){var d=r(),p=Math.random()*d;pn(p.toString(),function(e){De=e,window.localStorage.setItem("endpointID",De)})}return u(),ge=o,$e.sendAuthenticationRequest(e,n,i),Vt(st.success)},Gt=function(e){return function(t){return t.remoteUserID===e?!0:void 0}},Xt=function(e,t){var n=!1,r=null;return Ve[e]&&Ve[e].participants&&(r=Ve[e].participants.filter(Gt(t))),n=r&&r.length>0?!0:!1},Kt=function(e){return function(t){return t.pc===e?!0:e.callstatsID&&t.pcHash===e.callstatsID?!0:void 0}},Qt=function(e,t){var n=null,r=null;return Ve[e]&&Ve[e].participants&&(r=Ve[e].participants.filter(Kt(t))),n=r&&r.length>0?r[0]:null},Yt=function(e,t){var n=null,r=null;return n=Qt(e,t),n&&(r=n.pcHash),r},Zt=function(e){var t=null,n=null,r=null;for(t in Ve)if(Ve.hasOwnProperty(t)&&(r=Qt(t,e))){n={fabric:r,conferenceID:t};break}return n},en=function(e,t){var n=0;if(e&&Ve[t].participants)for(n=0;n<Ve[t].participants.length;n++)if(Ve[t].participants[n].pcHash===e.pcHash){Ve[t].participants.splice(n,1);break}},tn=function(e){var t=qe.codebase,n=null,r=0;if(t===Ct.firefox&&"Safari"!==qe.name)n=[],e.forEach(function(e){n.push(e)});else if(t===Ct.chrome&&"Safari"!==qe.name)n=e.result();else{n=[];for(r in e)e.hasOwnProperty(r)&&n.push(e[r])}return n},nn=function(e){var t=null,n=null,r=null,i=[],o=[],s=0,a=qe.codebase;for(t=tn(e),s=0;s<t.length;++s)n=J(t[s]),r=W(JSON.parse(n),a),r.hasOwnProperty("localCandidate")?i.push(r.localCandidate):r.hasOwnProperty("remoteCandidate")&&o.push(r.localCandidate);return{localCandidates:i,remoteCandidates:o}},rn=function(e){function t(t){var n={};n=nn(t),e(n.localIceCandidates,n.remoteCandidates)}return t},on=function(e,t,n,r,i,o,s,a){var c=qe.codebase,u=qe.name;c===Ct.firefox||"Safari"===u?e.getStats(null,n(t,r,i,o,s,a,e),function(e){It(Se,r,"log",{msg:"### "+c+" getStats reports error "+JSON.stringify(e)})}):c===Ct.chrome?e.getStats(n(t,r,i,o,s,a,e)):c===Ct.edge&&e.getStats().then(n(t,r,i,o,s,a,e))["catch"](function(e){It(Se,r,"log",{msg:"### "+c+" getStats reports error "+JSON.stringify(e)})})},sn=function(e,t){on(e,t,rn)},an=function(e,t,n,i){if(!e||!t||!n)return console.error("sendFabricEvent: Arguments missing/Invalid"),Vt(st.failure,"sendFabricEvent: Arguments missing/Invalid");if(!Se||!Te||!Ve[n])return console.error("sendFabricEvent: SDK is not initialized or no Fabrics added."),Vt(st.failure,"sendFabricEvent: SDK is not initialized or no Fabrics added.");if(t===rt.fabricSetupFailed)return console.error("sendFabricEvent: Unsupported fabricEvent fabricSetupFailed"),Vt(st.failure,"sendFabricEvent: Unsupported fabricEvent fabricSetupFailed");if(!m(e))return console.error("sendFabricEvent: Invalid PeerConnection object passed"),Vt(st.failure,"sendFabricEvent: Invalid PeerConnection object passed");if(!rt.hasOwnProperty(t)&&!it.hasOwnProperty(t))return console.error("sendFabricEvent: Invalid fabricEvents value: ",t),Vt(st.failure,"sendFabricEvent: Invalid fabricEvents value: "+t);var o=null,s=null,a=r(),c=Ve[n],u=null;if(void 0===c)return console.error("sendFabricEvent: Conference ID not found!"),Vt(st.failure,"sendFabricEvent: Conference ID not found!");if(u=Qt(n,e),null===u)return console.error("sendFabricEvent: fabricData is null"),Vt(st.failure,"sendFabricEvent: fabricData is null");s=u.remoteUserID;var l=u.startTime;if(!(t===rt.fabricSetup||t===it.autoFabricSetup&&u.fabricSetupSent)){if(t===it.autoFabricSetup){var d=a-u.startTime;if(o={setupDelay:d,iceCandidates:u.iceCandidates,iceGatheringDelay:u.gatheringIceCandidatesDelay,iceConnectivityDelay:u.connectivityIceStatusDelay},u.iceCandidates&&0===u.iceCandidates.length)return void sn(e,function(e,r){o.localCandidates=e,o.remoteCandidates=r,u.localCandidates=e,u.remoteCandidates=r,u.pcState=mt.established,u.fabricSetupSent=!0,Bt(t,s,n,c.ucID,o,u.pcHash,u.pcCallback)});u.pcState=mt.established,u.fabricSetupSent=!0}else if(t===it.autoFabricSetupFailed)o={failureDelay:u.setupFailureTime,reason:vt.iceFailure,domError:Rt};else if(t===it.fabricDisrupted)o={disruptionDelay:u.connectivityIceStatusDelay};else if(t===it.updatedConfiguration)o=u.transportData;else if(t===rt.fabricSetupFailed){var p=a-l;o={failureDelay:p,reason:vt.iceFailure,domError:At,fabricState:u.pcState,iceConnectionState:u.pc.iceConnectionState,"function":gt.iceConnectionFailure,magicKey:Ot,endpoint:We}}else if(t===rt.activeDeviceList){if(!i||!i.deviceList)return console.error("sendFabricEvent: Arguments missing/Invalid"),Vt(st.failure,"sendFabricEvent: Arguments missing/Invalid");o={magicKey:Ot,endpoint:We,activeDevicelist:i.deviceList}}if(Bt(t,s,n,c.ucID,o,u.pcHash,u.pcCallback),(t===rt.fabricTerminated||t===it.autoFabricSetupFailed||t===rt.fabricSetupFailed)&&Ve[n].participants){u&&(u.statsInterval=Y(u.statsInterval),en(u,n));var f=re(n);f.conferenceFinished&&ie(n,f.ucID)}if((t===rt.fabricSetup||t===rt.fabricUsageEvent)&&!u.fabricUsageSent){var h=u.fabricUsage;u.fabricUsageSent=!0,Bt(rt.fabricUsageEvent,s,n,c.ucID,h,u.pcHash,null)}return Vt(st.success)}},cn=function(e,t,n){
    return t?t:e&&e[n]?e[n].sdp:-1},un=function(e,t,i,o,s,a){if(void 0===e||!i||!t)return console.error("reportError: Arguments missing/invalid"),Vt(st.error,"reportError: Arguments missing/invalid");if(!Se||!Te)return console.error("reportError: SDK is not initialized"),Vt(st.error,"reportError: SDK is not initialized");if(!gt.hasOwnProperty(i))return console.error("reportError: Invalid webRTC functionName value: %o",i),Vt(st.error,"reportError: Invalid webRTC functionName value: "+i);void 0===o&&console.warn("reportError: Missing dom error parameter");var c,u=null,l=null,d=r(),p=Ve[t],f=null;if(c=H(i),o&&o instanceof DOMException)o={message:o.message,name:o.name};else if(o&&"object"==typeof o){var h={};o.hasOwnProperty("message")&&(h.message=o.message),o.hasOwnProperty("name")&&(h.name=o.name),o.hasOwnProperty("constraintName")&&(h.constraintName=o.constraintName),o.hasOwnProperty("stack")&&(h.stack=o.stack),o=h}if(m(e)){if(void 0===p)return console.error("reportError: Conference ID not found!"),Vt(st.error,"reportError: Conference ID not found!");if(f=Qt(t,e),null===f)return console.error("reportError: Invalid pcObject passed as argument"),Vt(st.error,"reportError: Invalid pcObject passed as argument");l=f.remoteUserID;var g=f.startTime,v=d-g;if(u={failureDelay:v,reason:c,domError:o,fabricState:f.pcState,iceConnectionState:f.pc.iceConnectionState,"function":i,magicKey:Ot,endpoint:We},i===gt.applicationLog||i===gt.applicationError?Bt(rt.applicationErrorLog,l,t,p.ucID,u,f.pcHash,f.pcCallback):Bt(rt.fabricSetupFailed,l,t,p.ucID,u,f.pcHash,f.pcCallback),s||a||e&&e.localDescription||e&&e.remoteDescription){var y={sdp:{}};y.sdp.localSDP=cn(e,s,"localDescription"),y.sdp.remoteSDP=cn(e,a,"remoteDescription"),$t(l,t,p.ucID,y,f.pcHash)}}else{null===Ot&&(Ot=n());var b=n();u={failureDelay:0,reason:c,domError:o,"function":i,magicKey:Ot,endpoint:We},i===gt.applicationLog||i===gt.applicationError?Bt(rt.applicationErrorLog,l,t,null,u,b,null):Bt(rt.fabricSetupFailed,l,t,null,u,b,null)}return Vt(st.success)},ln=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t[t.length]=r:r>127&&2048>r?(t[t.length]=r>>6|192,t[t.length]=63&r|128):(t[t.length]=r>>12|224,t[t.length]=r>>6&63|128,t[t.length]=63&r|128)}return new Uint8Array(t).buffer},dn=function(e){for(var t,n=new DataView(e),r="",i=0;i<n.byteLength;i++)t=n.getUint8(i).toString(16),t.length<2&&(t="0"+t),r+=t;return r},pn=function(e,t){var n={name:"SHA-256"};if(window.crypto){var r=window.crypto.subtle||window.crypto.webkitSubtle;if(!r)return void zt(e,t);r.digest(n,ln(e)).then(function(e){t(dn(e))})["catch"](function(){zt(e,t)})}else if(window.msCrypto){if(!window.msCrypto.subtle)return void zt(e,t);var i=window.msCrypto.subtle.digest(n,ln(e));i.oncomplete=function(e){e.target&&t(dn(e.target.result))},i.onerror=function(){zt(e,t)}}else zt(e,t)},fn=function(e,t,n){if(!t||!e)return console.error("sendUserFeedback: Arguments missing/Invalid"),Vt(st.error,"sendUserFeedback: Arguments missing/Invalid");if("object"!=typeof t)return console.error("sendUserFeedback: Invalid feedback object."),Vt(st.error,"sendUserFeedback: Invalid feedback object.");if(0===Object.keys(t).length)return console.error("sendUserFeedback: Feedback data object must not be empty."),Vt(st.error,"sendUserFeedback: Feedback data object must not be empty.");if(!t.hasOwnProperty("overall"))return console.error("sendUserFeedback: Feedback data object must contain 'conferenceID', 'userID' and 'overall' keys."),Vt(st.error,"sendUserFeedback: Feedback data object must contain 'conferenceID', 'userID' and 'overall' keys.");var r=Ve[e],i=null;void 0!==r&&void 0!==r.ucID&&(i=r.ucID);var o=null;if(o=null===Ot?Qe:Ot,null===i&&(i=se(e)),null===i)return console.error("sendUserFeedback: ucID unavailable"),Vt(st.error,"sendUserFeedback: ucID unavailable");var s={conferenceID:encodeURIComponent(e),magicKey:o,appID:Se,version:we,ucID:i,userID:encodeURIComponent(t.userID),userQoe:{overall:t.overall}};return t.hasOwnProperty("video")?s.userQoe.video=t.video:s.userQoe.video=-1,t.hasOwnProperty("audio")?s.userQoe.audio=t.audio:s.userQoe.audio=-1,t.hasOwnProperty("screen")?s.userQoe.screen=t.screen:s.userQoe.screen=-1,t.hasOwnProperty("comment")?s.userQoe.comment=t.comment:s.userQoe.comment=-1,$e.authToken&&!Ge?(s.token=$e.authToken,window.localStorage.setItem("feedback",JSON.stringify(s)),ce(ot.userFeedback,ot.userFeedback,s,n)):(s.clockUnsynced=Ge,jt({type:ot.userFeedback,action:ot.userFeedback,data:s,callback:n}),$e.sendAuthenticationRequest(Se,Te)),Vt(st.success)},hn=function(e,t,n,r,i,o){var s=null;if(s="object"==typeof t?t.aliasName:t,!(e&&n&&s&&r&&i))return console.error("associateMstWithUserID: Arguments missing"),Vt(st.error,"associateMstWithUserID: Arguments missing");if(""===n||""===s||""===r||""===i)return console.error("associateMstWithUserID: conferenceID or remoteUserID or ssrc MUST not be empty"),Vt(st.error,"associateMstWithUserID: conferenceID or remoteUserID or ssrc MUST not be empty");if(!m(e))return console.error("associateMstWithUserID: Invalid PeerConnection object passed"),Vt(st.error,"associateMstWithUserID: Invalid PeerConnection object passed");var a=Ve[n];if(void 0===a)return console.error("associateMstWithUserID: conferenceID doesn't exist"),Vt(st.error,"associateMstWithUserID: conferenceID doesn't exist");var c=null;if(c=Qt(n,e),null===c)return console.error("associateMstWithUserID: Unknown pcObject passed"),Vt(st.error,"associateMstWithUserID: Unknown pcObject passed");var u=Mt(r);return void 0===u&&(Ke[r]={},u=Mt(r)),u.remoteUserID=s,u.ssrc=r,u.associatedVideoTag=o,u.usageLabel=i,o&&s!==Te&&h(s,n,o,e,r),Vt(st.success)},mn=function(e,t,i,o,s){var a=null,c={authStatus:$e.tokenData?!0:!1,clockSync:!Ge,msg:"addNewFabric called",eventType:"warn",pageURL:window.location.href,conferenceID:o,version:we};if(It(Se,Te,"stateMachine",c),a="object"==typeof t?t.aliasName:t,!(e&&a&&i&&o))return console.error("addNewFabric: Arguments missing/Invalid"),Vt(st.error,"addNewFabric: Arguments missing/Invalid");if(!Se||!Te)return console.error("addNewFabric: SDK not initialized."),Vt(st.error,"addNewFabric: SDK not initialized");if(""===o||""===a)return console.error("addNewFabric: conferenceID or remoteUserID MUST not be empty"),Vt(st.error,"addNewFabric: conferenceID or remoteUserID MUST not be empty");if(!m(e))return console.error("addNewFabric: Invalid PeerConnection object passed"),Vt(st.error,"addNewFabric: Invalid PeerConnection object passed");if(!ut.hasOwnProperty(i)||i instanceof Function)return console.error("addNewFabric: Invalid fabricUsage value"),Vt(st.error,"addNewFabric: Invalid fabricUsage value");var u=r();null===Ot&&(Ot=n());var l=null,d=!1;if(!te(o)){var p=X(Ot);Bt(it.userJoined,null,o,null,p,null,null),d=!0,c={authStatus:$e.tokenData?!0:!1,clockSync:!Ge,msg:"userJoined sent",pageURL:window.location.href,eventType:"warn",conferenceID:o,version:we},It(Se,Te,"stateMachine",c)}if(K(o,l,d),!Qt(o,e)){e.addEventListener("icecandidate",Sn,!1),e.addEventListener("iceconnectionstatechange",wn,!1),e.addEventListener("signalingstatechange",vn,!1),e.addEventListener("negotiationneeded",bn,!1);var f=n(),h={pc:e,remoteUserID:a,fabricUsage:i,magicKey:Ot,startTime:u,pcCallback:s,pcState:mt.initializing,fabricSetupSent:!1,iceCandidates:[],iceConnectionState:e.iceConnectionState,latestEventSent:u,pcHash:f,localSDP:-1,remoteSDP:-1,statsInterval:null,initialPhaseOver:!1,intervalAdaptionPhase:!0,gatheringIceCandidatesDelay:0,connectivityIceStatusDelay:0,numNegotiationNeededCalls:0};"function"!=typeof e||e.callstatsID||(e.callstatsID=f),("connected"===e.iceConnectionState||"completed"===e.iceConnectionState)&&(h.pcState=mt.established),ne(o,h),h.pcState===mt.established&&(an(e,it.autoFabricSetup,o),yn(h,e,o,a))}return Vt(st.success)},gn=function(e,t,n,r){if(!(e&&n&&r&&t))return console.error("reportUserIDChange: Arguments missing/Invalid"),Vt(st.error,"reportUserIDChange: Arguments missing/Invalid");if(!Se||!Te)return console.error("reportUserIDChange: SDK not initialized."),Vt(st.error,"reportUserIDChange: SDK not initialized");if(""===n||""===t)return console.error("reportUserIDChange: id or  conferenceID MUST not be empty"),Vt(st.error,"reportUserIDChange: id or  conferenceID MUST not be empty");if(!m(e))return console.error("reportUserIDChange: Invalid PeerConnection object passed"),Vt(st.error,"reportUserIDChange: Invalid PeerConnection object passed");var i,o=null,s=Ve[t];if(void 0===s)return console.error("reportUserIDChange: Conference ID not found!"),Vt(st.error,"reportUserIDChange: Conference ID not found!");var a=null;if(void 0===s.ucID)return console.error("reportUserIDChange: addNewFabric was not called"),It(Se,Te,"log",{msg:"### reportUserIDChange: addNewFabric was not called"}),Vt(st.error,"reportUserIDChange: addNewFabric was not called");if(a=s.ucID,o=Qt(t,e),null===o)return console.error("reportUserIDChange: Invalid pcObject passed as argument"),Vt(st.error,"reportUserIDChange: Invalid pcObject passed as argument");var c={id:n,idType:r};return Bt(rt.userIDChangedEvent,i,t,a,c,null,o.pcCallback),Vt(st.success)},vn=function(e){if(e){var t,n=qe.codebase,r=null;if(n===Ct.firefox)t=e.target;else if(n===Ct.chrome)t=e.srcElement;else{if(n!==Ct.edge)return void console.error("PeerConnection signaling state changed: unsupported code base");t=e.pc}if(void 0!==t){var i=t.signalingState;"closed"===i&&(r=Zt(t),r&&r.fabric&&an(t,rt.fabricTerminated,r.conferenceID))}}},yn=function(e,t,n,i){null===e.statsInterval&&(e.statsPollingStart=r(),Tn(t,n,i),e.statsInterval=setInterval(Tn,ze.statsSubmissionIntervalInMS[ze.currentActivePhaseIndex],t,n,i))},bn=function(e){if(e){var t,n=qe.codebase;if(n===Ct.firefox)t=e.target;else if(n===Ct.chrome)t=e.srcElement;else{if(n!==Ct.edge)return void console.error("PeerConnection negotiation needed: unsupported code base");t=e.pc}if(void 0!==t){var r=null;r=Zt(t),r&&r.fabric&&r.fabric.numNegotiationNeededCalls++}}},wn=function(e){if(e){var t,n=qe.codebase;if(n===Ct.firefox)t=e.target;else if(n===Ct.chrome)t=e.srcElement;else{if(n!==Ct.edge)return void console.error("PeerConnection ICE connection state changed: unsupported code base");t=e.pc}if(void 0!==t){var i,o,s,a,c=null,u=null;u=Zt(t),u&&u.fabric&&(c=u.fabric,i=u.conferenceID,o=c.remoteUserID,s=r(),a=s-c.startTime,"complete"===t.iceGatheringState&&"checking"===t.iceConnectionState&&(c.gatheringIceCandidatesDelay=a),"connected"===t.iceConnectionState||"completed"===t.iceConnectionState?(c.connectivityIceStatusDelay=a,c.pcState===mt.initializing?c.fabricSetupSent||an(c.pc,it.autoFabricSetup,i):c.pcState===mt.disrupted&&an(c.pc,it.fabricDisrupted,i),c.pcState=mt.established,yn(c,t,i,o)):"failed"===t.iceConnectionState?(c.setupFailureTime=a,an(c.pc,it.autoFabricSetupFailed,i),c.pcState=mt.failed):"disconnected"===t.iceConnectionState&&(c.startTime=r(),c.pcState=mt.disrupted,c.pcCallback&&c.pcCallback(at.appConnectivityError,"Connectivity check for PC object to "+o+" failed.")),c.iceConnectionState=t.iceConnectionState)}}},Sn=function(e){var t,n,r;if(null!==e.candidate){var i=e.candidate.candidate;n=i.split(" ");var o="1"===n[1]?"rtp":"rtcp";"0"!==n[5]&&(r=-1!==n[4].indexOf(":"),t={transport:n[2],protocol:o,typePreference:n[3],address:r?"["+n[4]+"]:"+n[5]:n[4]+":"+n[5],type:n[7],media:e.candidate.sdpMid})}var s,a=qe.codebase;if(a===Ct.firefox)s=e.target;else if(a===Ct.chrome)s=e.srcElement;else{if(a!==Ct.edge)return void console.error("PeerConnection ICE candidate found: unsupported code base");s=e.pc}if(void 0!==s){var c=null;c=Zt(s),c&&c.fabric&&void 0!==t&&-1===c.fabric.iceCandidates.indexOf(t)&&c.fabric.iceCandidates.push(t)}},Tn=function(e,t,n){if(!Ve.hasOwnProperty(t))return void console.error("ConferenceID %o doesn't exist. Can't call getStats for it.",t);if(!Xt(t,n))return void console.error("Remote user ID %o doesn't exist. Can't call getStats for it.",n);if("closed"===e.signalingState)return an(e,rt.fabricTerminated,t),!0;var i=Qt(t,e);if(i.pcState!==mt.established&&i.lastFabricState===i.pcState&&"connected"!==e.iceConnectionState&&"completed"!==e.iceConnectionState)return!0;var o=Ve[t].ucID;on(e,i.pcCallback,q,Te,n,t,o,i);var s,a=r(),c=a-i.statsPollingStart,u=5e3;(c>ze.statsSubmissionPhaseDurationInMS[ze.currentActivePhaseIndex]&&i.intervalAdaptionPhase||Pe===!0)&&(Y(i.statsInterval),Pe?(s=Ae,i.intervalAdaptionPhase=!1,Pe=!1):ze.currentActivePhaseIndex<ze.statsSubmissionIntervalInMS.length-1?(ze.currentActivePhaseIndex+=1,s=ze.statsSubmissionIntervalInMS[ze.currentActivePhaseIndex]):(s=Le,i.intervalAdaptionPhase=!1),s>u&&(i.initialPhaseOver=!0),i.statsInterval=setInterval(Tn,s,e,t,n))},Cn=function(e,t,n){t.hasOwnProperty(e)&&(t[e].hasOwnProperty("video")&&(t[e].video.isGreaterBetter?(n.video.gThreshold=t[e].video.upperThreshold,n.video.rThreshold=t[e].video.lowerThreshold):(n.video.gThreshold=t[e].video.lowerThreshold,n.video.rThreshold=t[e].video.upperThreshold)),t[e].hasOwnProperty("audio")&&(t[e].audio.isGreaterBetter?(n.audio.gThreshold=t[e].audio.upperThreshold,n.audio.rThreshold=t[e].audio.lowerThreshold):(n.audio.gThreshold=t[e].audio.lowerThreshold,n.audio.rThreshold=t[e].audio.upperThreshold)))},xn=function(e,t,n){var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));var o=r.join("&"),s=new XMLHttpRequest;s.open("POST",e),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onload=function(){n(s)},s.send(o)},kn=function(){kt(ke,function(e){if(200===e.status){var t=JSON.parse(e.responseText);Cn("eModelThreshold",t,Tt),Cn("throughputThreshold",t,yt),Cn("fractionalLossThreshold",t,St),Cn("rttThreshold",t,wt),Cn("currOverPrevFrameRateThreshold",t,bt)}})},Dn=function(){var e=ve+"clockSync",t=null,n=null;kt(e,function(e,i){200===e.status&&(t=JSON.parse(e.response),n=r(),In(t,i,n))})},In=function(e,t,n){if(Ge){var r=t/2;if(r>Je.maxAllowedLatency)Je.offsetResults=[],It(Se,Te,"log",{msg:"clockSync restarting"});else{var i=e.now+r,o=i-n;Je.offsetResults.push(o)}if(Je.offsetResults.length>=Je.syncAttempts){var s=Je.offsetResults.reduce(function(e,t){return e+t});Je.currentOffset=s/Je.offsetResults.length,Je.offsetResults=[],Ge=!1,It(Se,Te,"log",{msg:"clockSync Done"}),Nt()}else Ge&&setTimeout(function(){Dn()},100)}},En=function(e,n){return Ne?(It(Se,Te,"log",{msg:"### _setupChannel is called when already connected!"}),void(n&&n(at.success,"WebSocket establishment successful."))):Oe?void It(Se,Te,"log",{msg:"### _setupChannel is called when _connection is not null and not connected! Let's rely on auto reconnect!"}):(Oe=t.connect(e,{port:be,reconnect:!0,"reconnection delay":500,"max reconnection attempts":500,reconnectionDelayMax:8e3}),Oe.on("connect",function(){It(Se,Te,"log",{msg:"Successfully connected to the backend",io_ver:t.protocol}),Ne=!0,Je.syncHandler||(It(Se,Te,"log",{msg:"start clockSync"}),Je.offsetResults=[],Dn(),Je.syncHandler=!0),Ut(),Ue?ee():Ht(Oe),Ue=!1}),Oe.on("disconnect",function(){Ne=!1,Z(),Ge&&(Je.offsetResults=[],Je.syncHandler=null,Ge=!1),n&&n(at.httpError,"Connection to the server disappeared.")}),Oe.on("connect_failed",function(){Ne=!1,n&&n(at.wsChannelFailure,"WebSocket establishment failed.")}),Oe.on("reconnect",function(){Ue=!0}),Oe.on("reconnect_failed",function(){Ne=!1}),void Oe.on("response",function(e){var t=r(),i=JSON.parse(e);if("Error"===i.status)"Invalid client token."===i.reason&&($e.tokenData=null,$e.authToken=null,$e.sendAuthenticationRequest(Se,Te)),n&&n(at.csProtoError,e.reason);else if("200 OK"===i.status)if("feedback"===i.event)window.localStorage.removeItem("feedback");else if(i.event===it.userJoined||i.event===it.refreshPresence){var o,s=!1,a=null,c=decodeURIComponent(i.conferenceID),u=function(e){return setInterval(function(){qt(e)},_e)};for(o in Ve)if(Ve.hasOwnProperty(o)&&o===c){Ve[o].ucID!==i.ucID&&(s=!0,oe(o,i.ucID),a=i.conferenceCreationTS?i.conferenceCreationTS:i.conferenceDuration),i.event!==it.userJoined||Ve[o].refreshPresence||(Ve[o].refreshPresence=u(c),fe()),Ve[o].ucID=i.ucID;break}Wt(),Nt(s,a)}else i.event===ot.clockSync&&In(i,t)}))};return s(),kn(),Dn(),pe(),{version:we,initialize:Jt,fabricEvent:rt,addNewFabric:mn,sendFabricEvent:an,sendUserFeedback:fn,associateMstWithUserID:hn,csError:at,fabricUsage:ut,qualityRating:dt,webRTCFunctions:gt,reportError:un,reportUserIDChange:gn,userIDType:lt,callStatsAPIReturnStatus:st}};"function"==typeof define&&define.amd?define("callstats",["jquery","socketio","sha"],t):e.callstats=t}(this);
